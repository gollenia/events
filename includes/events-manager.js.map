{"version":3,"file":"events-manager.js","mappings":"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","sources":["webpack:///./classes/events_manager.css?c404","webpack:///webpack/bootstrap","webpack:///webpack/runtime/make namespace object","webpack:///./classes/events-manager.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport {};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import \"./events_manager.css\"\r\n\r\njQuery(document).ready( function($){\r\n\tvar load_ui_css = false; //load jquery ui css?\r\n\t/* Time Entry */\r\n\t$('#start-time').each(function(i, el){\r\n\t\t$(el).addClass('em-time-input em-time-start').next('#end-time').addClass('em-time-input em-time-end').parent().addClass('em-time-range');\r\n\t});\r\n\tif( $(\".em-time-input\").length > 0 ){\r\n\t\tem_setup_timepicker('body');\r\n\t}\r\n\t/* Calendar AJAX */\r\n\t$('.em-calendar-wrapper a').off(\"click\");\r\n\t$('.em-calendar-wrapper').on('click', 'a.em-calnav, a.em-calnav', function(e){\r\n\t\te.preventDefault();\r\n\t\t$(this).closest('.em-calendar-wrapper').prepend('<div class=\"loading\" id=\"em-loading\"></div>');\r\n\t\tvar url = em_ajaxify($(this).attr('href'));\r\n\t\t$(this).closest('.em-calendar-wrapper').load(url, function(){$(this).trigger('em_calendar_load');});\r\n\t} );\r\n\r\n\t//Events Search\r\n\t$(document).on('click change', '.em-toggle', function(e){\r\n\t\te.preventDefault();\r\n\t\t//show or hide advanced tickets, hidden by default\r\n\t\tvar el = $(this);\r\n\t\tvar rel = el.attr('rel').split(':');\r\n\t\tif( el.hasClass('show-search') ){\r\n\t\t\tif( rel.length > 1 ){ el.closest(rel[1]).find(rel[0]).slideUp(); }\r\n\t\t\telse{ $(rel[0]).slideUp(); }\r\n\t\t\tel.find('.show, .show-advanced').show();\r\n\t\t\tel.find('.hide, .hide-advanced').hide();\r\n\t\t\tel.removeClass('show-search');\r\n\t\t}else{\r\n\t\t\tif( rel.length > 1 ){ el.closest(rel[1]).find(rel[0]).slideDown(); }\r\n\t\t\telse{ $(rel[0]).slideDown(); }\r\n\t\t\tel.find('.show, .show-advanced').hide();\r\n\t\t\tel.find('.hide, .hide-advanced').show();\r\n\t\t\tel.addClass('show-search');\r\n\t\t}\r\n\t\t\r\n\t});\r\n\tif( EM.search_term_placeholder ){\r\n\t\tif( 'placeholder' in document.createElement('input') ){\r\n\t\t\t$('input.em-events-search-text, input.em-search-text').attr('placeholder', EM.search_term_placeholder);\r\n\t\t}else{\r\n\t\t\t$('input.em-events-search-text, input.em-search-text').on('blur', function(){\r\n\t\t\t\tif( this.value=='' ) this.value = EM.search_term_placeholder;\r\n\t\t\t}).on('focus', function(){\r\n\t\t\t\tif( this.value == EM.search_term_placeholder ) this.value='';\r\n\t\t\t}).trigger('blur');\r\n\t\t}\r\n\t}\r\n\t$('.em-search-form select[name=country]').on('change', function(){\r\n\t\tvar el = $(this);\r\n\t\t$('.em-search select[name=state]').html('<option value=\"\">'+EM.txt_loading+'</option>');\r\n\t\t$('.em-search select[name=region]').html('<option value=\"\">'+EM.txt_loading+'</option>');\r\n\t\t$('.em-search select[name=town]').html('<option value=\"\">'+EM.txt_loading+'</option>');\r\n\t\tif( el.val() != '' ){\r\n\t\t\tel.closest('.em-search-location').find('.em-search-location-meta').slideDown();\r\n\t\t\tvar data = {\r\n\t\t\t\taction : 'search_states',\r\n\t\t\t\tcountry : el.val(),\r\n\t\t\t\treturn_html : true\r\n\t\t\t};\r\n\t\t\t$('.em-search select[name=state]').load( EM.ajaxurl, data );\r\n\t\t\tdata.action = 'search_regions';\r\n\t\t\t$('.em-search select[name=region]').load( EM.ajaxurl, data );\r\n\t\t\tdata.action = 'search_towns';\r\n\t\t\t$('.em-search select[name=town]').load( EM.ajaxurl, data );\r\n\t\t}else{\r\n\t\t\tel.closest('.em-search-location').find('.em-search-location-meta').slideUp();\r\n\t\t}\r\n\t});\r\n\r\n\t$('.em-search-form select[name=region]').on('change', function(){\r\n\t\t$('.em-search select[name=state]').html('<option value=\"\">'+EM.txt_loading+'</option>');\r\n\t\t$('.em-search select[name=town]').html('<option value=\"\">'+EM.txt_loading+'</option>');\r\n\t\tvar data = {\r\n\t\t\taction : 'search_states',\r\n\t\t\tregion : $(this).val(),\r\n\t\t\tcountry : $('.em-search-form select[name=country]').val(),\r\n\t\t\treturn_html : true\r\n\t\t};\r\n\t\t$('.em-search select[name=state]').load( EM.ajaxurl, data );\r\n\t\tdata.action = 'search_towns';\r\n\t\t$('.em-search select[name=town]').load( EM.ajaxurl, data );\r\n\t});\r\n\r\n\t$('.em-search-form select[name=state]').on('change', function(){\r\n\t\t$('.em-search select[name=town]').html('<option value=\"\">'+EM.txt_loading+'</option>');\r\n\t\tvar data = {\r\n\t\t\taction : 'search_towns',\r\n\t\t\tstate : $(this).val(),\r\n\t\t\tregion : $('.em-search-form select[name=region]').val(),\r\n\t\t\tcountry : $('.em-search-form select[name=country]').val(),\r\n\t\t\treturn_html : true\r\n\t\t};\r\n\t\t$('.em-search select[name=town]').load( EM.ajaxurl, data );\r\n\t});\r\n\t\r\n\t//in order for this to work, you need the above classes to be present in your templates\r\n\t$(document).on('submit', '.em-search-form, .em-events-search-form', function(e){\r\n\t\tvar form = $(this);\r\n    \tif( this.em_search && this.em_search.value == EM.txt_search){ this.em_search.value = ''; }\r\n    \tvar results_wrapper = form.closest('.em-search-wrapper').find('.em-search-ajax');\r\n    \tif( results_wrapper.length == 0 ) results_wrapper = $('.em-search-ajax');\r\n    \tif( results_wrapper.length > 0 ){\r\n    \t\tresults_wrapper.append('<div class=\"loading\" id=\"em-loading\"></div>');\r\n    \t\tvar submitButton = form.find('.em-search-submit');\r\n    \t\tsubmitButton.data('buttonText', submitButton.val()).val(EM.txt_searching);\r\n    \t\tvar img = submitButton.children('img');\r\n    \t\tif( img.length > 0 ) img.attr('src', img.attr('src').replace('search-mag.png', 'search-loading.gif'));\r\n    \t\tvar vars = form.serialize();\r\n    \t\t$.ajax( EM.ajaxurl, {\r\n\t\t\t\ttype : 'POST',\r\n\t    \t\tdataType : 'html',\r\n\t    \t\tdata : vars,\r\n\t\t\t    success : function(responseText){\r\n\t\t\t    \tsubmitButton.val(submitButton.data('buttonText'));\r\n\t\t\t    \tif( img.length > 0 ) img.attr('src', img.attr('src').replace('search-loading.gif', 'search-mag.png'));\r\n\t\t    \t\tresults_wrapper.replaceWith(responseText);\r\n\t\t        \tif( form.find('input[name=em_search]').val() == '' ){ form.find('input[name=em_search]').val(EM.txt_search); }\r\n\t\t        \t//reload results_wrapper\r\n\t\t        \tresults_wrapper = form.closest('.em-search-wrapper').find('.em-search-ajax');\r\n\t\t        \tif( results_wrapper.length == 0 ) results_wrapper = $('.em-search-ajax');\r\n\t\t\t    \tjQuery(document).triggerHandler('em_search_ajax', [vars, results_wrapper, e]); //ajax has loaded new results\r\n\t\t\t    }\r\n\t    \t});\r\n    \t\te.preventDefault();\r\n\t\t\treturn false;\r\n    \t}\r\n\t});\r\n\tif( $('.em-search-ajax').length > 0 ){\r\n\t\t$(document).on('click', '.em-search-ajax a.page-numbers', function(e){\r\n\t\t\tvar a = $(this);\r\n\t\t\tvar data = a.closest('.em-pagination').attr('data-em-ajax');\r\n\t\t\tvar wrapper = a.closest('.em-search-ajax');\r\n\t\t\tvar wrapper_parent = wrapper.parent();\r\n\t\t    var qvars = a.attr('href').split('?');\r\n\t\t    var vars = qvars[1];\r\n\t\t    //add data-em-ajax att if it exists\r\n\t\t    if( data != '' ){\r\n\t\t    \tvars = vars != '' ? vars+'&'+data : data;\r\n\t\t    }\r\n\t\t    wrapper.append('<div class=\"loading\" id=\"em-loading\"></div>');\r\n\t\t    $.ajax( EM.ajaxurl, {\r\n\t\t\t\ttype : 'POST',\r\n\t    \t\tdataType : 'html',\r\n\t    \t\tdata : vars,\r\n\t\t\t    success : function(responseText) {\r\n\t\t\t    \twrapper.replaceWith(responseText);\r\n\t\t\t    \twrapper = wrapper_parent.find('.em-search-ajax');\r\n\t\t\t    \tjQuery(document).triggerHandler('em_search_ajax', [vars, wrapper, e]); //ajax has loaded new results\r\n\t\t\t    }\r\n\t    \t});\r\n\t\t\te.preventDefault();\r\n\t\t\treturn false;\r\n\t\t});\r\n\t}\r\n\t\t\r\n\t/*\r\n\t * ADMIN AREA AND PUBLIC FORMS (Still polishing this section up, note that form ids and classes may change accordingly)\r\n\t */\r\n\t//Events List\r\n\t\t//Approve/Reject Links\r\n\t\t$('.events-table').on('click', '.em-event-delete', function(){\r\n\t\t\tif( !confirm(\"Are you sure you want to delete?\") ){ return false; }\r\n\t\t\twindow.location.href = this.href;\r\n\t\t});\r\n\t//Forms\r\n\t$('#event-form #event-image-delete, #location-form #location-image-delete').on('click', function(){\r\n\t\tvar el = $(this);\r\n\t\tif( el.is(':checked') ){\r\n\t\t\tel.closest('.event-form-image, .location-form-image').find('#event-image-img, #location-image-img').hide();\r\n\t\t}else{\r\n\t\t\tel.closest('.event-form-image, .location-form-image').find('#event-image-img, #location-image-img').show();\r\n\t\t}\r\n\t});\r\n\t//Event Editor \r\n\t\t//Recurrence Warnings\r\n\t\t$('#event-form.em-event-admin-recurring').on('submit', function(event){\r\n\t\t\tvar form = $(this);\r\n\t\t\tif( form.find('input[name=\"event_reschedule\"]').first().val() == 1 ){\r\n\t\t\t\tvar warning_text = EM.event_reschedule_warning;\r\n\t\t\t}else if( form.find('input[name=\"event_recreate_tickets\"]').first().val() == 1 ){\r\n\t\t\t\tvar warning_text = EM.event_recurrence_bookings;\r\n\t\t\t}else{\r\n\t\t\t\tvar warning_text = EM.event_recurrence_overwrite;\r\n\t\t\t}\r\n\t\t\tconfirmation = confirm(warning_text);\r\n\t\t\tif( confirmation == false ){\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}\r\n\t\t});\r\n\t\t//Buttons for recurrence warnings within event editor forms\r\n\t\t$('.em-reschedule-trigger').on('click', function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tvar trigger = $(this);\r\n\t\t\ttrigger.closest('.em-recurrence-reschedule').find(trigger.data('target')).removeClass('reschedule-hidden');\r\n\t\t\ttrigger.siblings('.em-reschedule-value').val(1);\r\n\t\t\ttrigger.addClass('reschedule-hidden').siblings('a').removeClass('reschedule-hidden');\r\n\t\t});\r\n\t\t$('.em-reschedule-cancel').on('click', function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tvar trigger = $(this);\r\n\t\t\ttrigger.closest('.em-recurrence-reschedule').find(trigger.data('target')).addClass('reschedule-hidden');\r\n\t\t\ttrigger.siblings('.em-reschedule-value').val(0);\r\n\t\t\ttrigger.addClass('reschedule-hidden').siblings('a').removeClass('reschedule-hidden');\r\n\t\t});\r\n\t//Tickets & Bookings\r\n\tif( $(\"#em-tickets-form\").length > 0 ){\r\n\t\t//Enable/Disable Bookings\r\n\t\t$('#event-rsvp').on('click', function(event){\r\n\t\t\tif( !this.checked ){\r\n\t\t\t\tconfirmation = confirm(EM.disable_bookings_warning);\r\n\t\t\t\tif( confirmation == false ){\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$('#event-rsvp-options').hide();\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t$('#event-rsvp-options').fadeIn();\r\n\t\t\t}\r\n\t\t});\r\n\t\tif($('input#event-rsvp').is(\":checked\")) {\r\n\t\t\t$(\"div#rsvp-data\").fadeIn();\r\n\t\t} else {\r\n\t\t\t$(\"div#rsvp-data\").hide();\r\n\t\t}\r\n\t\t//Ticket(s) UI\r\n\t\tvar reset_ticket_forms = function(){\r\n\t\t\t$('#em-tickets-form table tbody tr.em-tickets-row').show();\r\n\t\t\t$('#em-tickets-form table tbody tr.em-tickets-row-form').hide();\r\n\t\t};\r\n\t\t//recurrences and cut-off logic for ticket availability\r\n\t\tif( $('#em-recurrence-checkbox').length > 0 ){\r\n\t\t\t$('#em-recurrence-checkbox').on('change', function(){\r\n\t\t\t\tif( $('#em-recurrence-checkbox').is(':checked') ){\r\n\t\t\t\t\t$('#em-tickets-form .ticket-dates-from-recurring, #em-tickets-form .ticket-dates-to-recurring, #event-rsvp-options .em-booking-date-recurring').show();\r\n\t\t\t\t\t$('#em-tickets-form .ticket-dates-from-normal, #em-tickets-form .ticket-dates-to-normal, #event-rsvp-options .em-booking-date-normal, #em-tickets-form .hidden').hide();\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$('#em-tickets-form .ticket-dates-from-normal, #em-tickets-form .ticket-dates-to-normal, #event-rsvp-options .em-booking-date-normal').show();\r\n\t\t\t\t\t$('#em-tickets-form .ticket-dates-from-recurring, #em-tickets-form .ticket-dates-to-recurring, #event-rsvp-options .em-booking-date-recurring, #em-tickets-form .hidden').hide();\r\n\t\t\t\t}\r\n\t\t\t}).trigger('change');\r\n\t\t}else if( $('#em-form-recurrence').length > 0 ){\r\n\t\t\t$('#em-tickets-form .ticket-dates-from-recurring, #em-tickets-form .ticket-dates-to-recurring, #event-rsvp-options .em-booking-date-recurring').show();\r\n\t\t\t$('#em-tickets-form .ticket-dates-from-normal, #em-tickets-form .ticket-dates-to-normal, #event-rsvp-options .em-booking-date-normal, #em-tickets-form .hidden').hide();\r\n\t\t}else{\r\n\t\t\t$('#em-tickets-form .ticket-dates-from-recurring, #em-tickets-form .ticket-dates-to-recurring, #event-rsvp-options .em-booking-date-recurring, #em-tickets-form .hidden').hide();\r\n\t\t}\r\n\t\t//Add a new ticket\r\n\t\t$(\"#em-tickets-add\").on('click', function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\treset_ticket_forms();\r\n\t\t\t//create copy of template slot, insert so ready for population\r\n\t\t\tvar tickets = $('#em-tickets-form table tbody');\r\n\t\t\tvar rowNo = tickets.length+1;\r\n\t\t\tvar slot = tickets.first('.em-ticket-template').clone(true).attr('id','em-ticket-'+ rowNo).removeClass('em-ticket-template').addClass('em-ticket').appendTo($('#em-tickets-form table'));\r\n\t\t\t//change the index of the form element names\r\n\t\t\tslot.find('*[name]').each( function(index,el){\r\n\t\t\t\tel = $(el);\r\n\t\t\t\tel.attr('name', el.attr('name').replace('em_tickets[0]','em_tickets['+rowNo+']'));\r\n\t\t\t});\r\n\t\t\t//show ticket and switch to editor\r\n\t\t\tslot.show().find('.ticket-actions-edit').trigger('click');\r\n\t\t\t//refresh datepicker and values\r\n\t\t\tslot.find('.em-date-input-loc').datepicker('destroy').removeAttr('id'); //clear all datepickers\r\n\t\t\tslot.find('.em-time-input').off().each(function(index, el){\r\n\t\t\t\tif( typeof this.em_timepickerObj == 'object' ){\r\n\t\t\t\t\tthis.em_timepicker('remove');\r\n\t\t\t\t}\r\n\t\t\t}); //clear all em_timepickers - consequently, also other click/blur/change events, recreate the further down\r\n\t\t\tem_setup_datepicker(slot);\r\n\t\t\tem_setup_timepicker(slot);\r\n\t\t    $('html, body').animate({ scrollTop: slot.offset().top - 30 }); //sends user to form\r\n\t\t\tcheck_ticket_sortability();\r\n\t\t});\r\n\t\t//Edit a Ticket\r\n\t\t$(document).on('click', '.ticket-actions-edit', function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\treset_ticket_forms();\r\n\t\t\tvar tbody = $(this).closest('tbody');\r\n\t\t\ttbody.find('tr.em-tickets-row').hide();\r\n\t\t\ttbody.find('tr.em-tickets-row-form').fadeIn();\r\n\t\t\treturn false;\r\n\t\t});\r\n\t\t$(document).on('click', '.ticket-actions-edited', function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tvar tbody = $(this).closest('tbody');\r\n\t\t\tvar rowNo = tbody.attr('id').replace('em-ticket-','');\r\n\t\t\ttbody.find('.em-tickets-row').fadeIn();\r\n\t\t\ttbody.find('.em-tickets-row-form').hide();\r\n\t\t\ttbody.find('*[name]').each(function(index,el){\r\n\t\t\t\tel = $(el);\r\n\t\t\t\tif( el.attr('name') == 'ticket_start_pub'){\r\n\t\t\t\t\ttbody.find('span.ticket_start').text(el.val());\r\n\t\t\t\t}else if( el.attr('name') == 'ticket_end_pub' ){\r\n\t\t\t\t\ttbody.find('span.ticket_end').text(el.val());\r\n\t\t\t\t}else if( el.attr('name') == 'em_tickets['+rowNo+'][ticket_type]' ){\r\n\t\t\t\t\tif( el.find(':selected').val() == 'members' ){\r\n\t\t\t\t\t\ttbody.find('span.ticket_name').prepend('* ');\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if( el.attr('name') == 'em_tickets['+rowNo+'][ticket_start_recurring_days]' ){\r\n\t\t\t\t\tvar text = tbody.find('select.ticket-dates-from-recurring-when').val() == 'before' ? '-'+el.val():el.val();\r\n\t\t\t\t\tif( el.val() != '' ){\r\n\t\t\t\t\t\ttbody.find('span.ticket_start_recurring_days').text(text);\r\n\t\t\t\t\t\ttbody.find('span.ticket_start_recurring_days_text, span.ticket_start_time').removeClass('hidden').show();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\ttbody.find('span.ticket_start_recurring_days').text(' - ');\r\n\t\t\t\t\t\ttbody.find('span.ticket_start_recurring_days_text, span.ticket_start_time').removeClass('hidden').hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if( el.attr('name') == 'em_tickets['+rowNo+'][ticket_end_recurring_days]' ){\r\n\t\t\t\t\tvar text = tbody.find('select.ticket-dates-to-recurring-when').val() == 'before' ? '-'+el.val():el.val();\r\n\t\t\t\t\tif( el.val() != '' ){\r\n\t\t\t\t\t\ttbody.find('span.ticket_end_recurring_days').text(text);\r\n\t\t\t\t\t\ttbody.find('span.ticket_end_recurring_days_text, span.ticket_end_time').removeClass('hidden').show();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\ttbody.find('span.ticket_end_recurring_days').text(' - ');\r\n\t\t\t\t\t\ttbody.find('span.ticket_end_recurring_days_text, span.ticket_end_time').removeClass('hidden').hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar classname = el.attr('name').replace('em_tickets['+rowNo+'][','').replace(']','').replace('[]','');\r\n\t\t\t\t\ttbody.find('.em-tickets-row .'+classname).text(el.val());\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t//allow for others to hook into this\r\n\t\t\t$(document).triggerHandler('em_maps_tickets_edit', [tbody, rowNo, true]);\r\n\t\t    $('html, body').animate({ scrollTop: tbody.parent().offset().top - 30 }); //sends user back to top of form\r\n\t\t\treturn false;\r\n\t\t});\r\n\t\t$(document).on('change', '.em-ticket-form select.ticket_type', function(e){\r\n\t\t\t//check if ticket is for all users or members, if members, show roles to limit the ticket to\r\n\t\t\tvar el = $(this);\r\n\t\t\tif( el.find('option:selected').val() == 'members' ){\r\n\t\t\t\tel.closest('.em-ticket-form').find('.ticket-roles').fadeIn();\r\n\t\t\t}else{\r\n\t\t\t\tel.closest('.em-ticket-form').find('.ticket-roles').hide();\r\n\t\t\t}\r\n\t\t});\r\n\t\t$(document).on('click', '.em-ticket-form .ticket-options-advanced', function(e){\r\n\t\t\t//show or hide advanced tickets, hidden by default\r\n\t\t\te.preventDefault();\r\n\t\t\tvar el = $(this);\r\n\t\t\tif( el.hasClass('show') ){\r\n\t\t\t\tel.closest('.em-ticket-form').find('.em-ticket-form-advanced').fadeIn();\r\n\t\t\t\tel.find('.show,.show-advanced').hide();\r\n\t\t\t\tel.find('.hide,.hide-advanced').show();\r\n\t\t\t}else{\r\n\t\t\t\tel.closest('.em-ticket-form').find('.em-ticket-form-advanced').hide();\r\n\t\t\t\tel.find('.show,.show-advanced').show();\r\n\t\t\t\tel.find('.hide,.hide-advanced').hide();\r\n\t\t\t}\r\n\t\t\tel.toggleClass('show');\r\n\t\t});\r\n\t\t$('.em-ticket-form').each( function(){\r\n\t\t\t//check whether to show advanced options or not by default for each ticket\r\n\t\t\tvar show_advanced = false;\r\n\t\t\tvar el = $(this); \r\n\t\t\tel.find('.em-ticket-form-advanced input[type=\"text\"]').each(function(){ if(this.value != '') show_advanced = true; });\r\n\t\t\tif( el.find('.em-ticket-form-advanced input[type=\"checkbox\"]:checked').length > 0 ){ show_advanced = true; }\r\n\t\t\tel.find('.em-ticket-form-advanced option:selected').each(function(){ if(this.value != '') show_advanced = true; });\r\n\t\t\tif( show_advanced ) el.find('.ticket-options-advanced').trigger('click');\r\n\t\t});\r\n\t\t//Delete a ticket\r\n\t\t$(document).on('click', '.ticket-actions-delete', function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tvar el = $(this);\r\n\t\t\tvar tbody = el.closest('tbody');\r\n\t\t\tif( tbody.find('input.ticket_id').val() > 0 ){\r\n\t\t\t\t//only will happen if no bookings made\r\n\t\t\t\tel.text('Deleting...');\t\r\n\t\t\t\t$.getJSON( $(this).attr('href'), {'em_ajax_action':'delete_ticket', 'id':tbody.find('input.ticket_id').val()}, function(data){\r\n\t\t\t\t\tif(data.result){\r\n\t\t\t\t\t\ttbody.remove();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tel.text('Delete');\r\n\t\t\t\t\t\talert(data.error);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\t//not saved to db yet, so just remove\r\n\t\t\t\ttbody.remove();\r\n\t\t\t}\r\n\t\t\tcheck_ticket_sortability();\r\n\t\t\treturn false;\r\n\t\t});\r\n\t\t//Sort Tickets\r\n\t\t$('#em-tickets-form.em-tickets-sortable table').sortable({\r\n\t\t\titems: '> tbody',\r\n\t\t\tplaceholder: \"em-ticket-sortable-placeholder\",\r\n\t\t\thandle:'.ticket-status',\r\n\t\t\thelper: function( event, el ){\r\n\t\t\t\tvar helper = $(el).clone().addClass('em-ticket-sortable-helper');\r\n\t\t\t\tvar tds = helper.find('.em-tickets-row td').length;\r\n\t\t\t\thelper.children().remove();\r\n\t\t\t\thelper.append('<tr class=\"em-tickets-row\"><td colspan=\"'+tds+'\" style=\"text-align:left; padding-left:15px;\"><span class=\"dashicons dashicons-tickets-alt\"></span></td></tr>');\r\n\t\t\t\treturn helper;\r\n\t\t\t},\r\n\t\t});\r\n\t\tvar check_ticket_sortability = function(){\r\n\t\t\tvar em_tickets = $('#em-tickets-form table tbody.em-ticket');\r\n\t\t\tif( em_tickets.length == 1 ){\r\n\t\t\t\tem_tickets.find('.ticket-status').addClass('single');\r\n\t\t\t\t$('#em-tickets-form.em-tickets-sortable table').sortable( \"option\", \"disabled\", true );\r\n\t\t\t}else{\r\n\t\t\t\tem_tickets.find('.ticket-status').removeClass('single');\r\n\t\t\t\t$('#em-tickets-form.em-tickets-sortable table').sortable( \"option\", \"disabled\", false );\r\n\t\t\t}\r\n\t\t};\r\n\t\tcheck_ticket_sortability();\r\n\t}\r\n\t//Manageing Bookings\r\n\tif( $('#em-bookings-table').length > 0 ){\r\n\t\t//Pagination link clicks\r\n\t\t$(document).on('click', '#em-bookings-table .tablenav-pages a', function(){\r\n\t\t\tvar el = $(this);\r\n\t\t\tvar form = el.parents('#em-bookings-table form.bookings-filter');\r\n\t\t\t//get page no from url, change page, submit form\r\n\t\t\tvar match = el.attr('href').match(/#[0-9]+/);\r\n\t\t\tif( match != null && match.length > 0){\r\n\t\t\t\tvar pno = match[0].replace('#','');\r\n\t\t\t\tform.find('input[name=pno]').val(pno);\r\n\t\t\t}else{\r\n\t\t\t\tform.find('input[name=pno]').val(1);\r\n\t\t\t}\r\n\t\t\tform.trigger('submit');\r\n\t\t\treturn false;\r\n\t\t});\r\n\t\t//Overlay Options\r\n\t\tvar em_bookings_settings_dialog = {\r\n\t\t\tmodal : true,\r\n\t\t\tautoOpen: false,\r\n\t\t\tminWidth: 500,\r\n\t\t\theight: 'auto',\r\n\t\t\tbuttons: [{\r\n\t\t\t\ttext: EM.bookings_settings_save,\r\n\t\t\t\tclick: function(e){\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t//we know we'll deal with cols, so wipe hidden value from main\r\n\t\t\t\t\tvar match = $(\"#em-bookings-table form.bookings-filter [name=cols]\").val('');\r\n\t\t\t\t\tvar booking_form_cols = $('form#em-bookings-table-settings-form input.em-bookings-col-item');\r\n\t\t\t\t\t$.each( booking_form_cols, function(i,item_match){\r\n\t\t\t\t\t\t//item_match = $(item_match);\r\n\t\t\t\t\t\tif( item_match.value == 1 ){\r\n\t\t\t\t\t\t\tif( match.val() != ''){\r\n\t\t\t\t\t\t\t\tmatch.val(match.val()+','+item_match.name);\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tmatch.val(item_match.name);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t//submit main form\r\n\t\t\t\t\t$('#em-bookings-table-settings').trigger('submitted'); //hook into this with bind()\r\n\t\t\t\t\t$('#em-bookings-table form.bookings-filter').trigger('submit');\t\t\t\t\t\r\n\t\t\t\t\t$(this).dialog('close');\r\n\t\t\t\t}\r\n\t\t\t}]\r\n\t\t};\r\n\t\tvar em_bookings_export_dialog = {\r\n\t\t\tmodal : true,\r\n\t\t\tautoOpen: false,\r\n\t\t\tminWidth: 700,\r\n\t\t\theight: 'auto',\r\n\t\t\tbuttons: [{\r\n\t\t\t\ttext: EM.bookings_export_save,\r\n\t\t\t\tclick: function(e){\r\n\t\t\t\t\t$(this).children('form').trigger('submit');\r\n\t\t\t\t\t$(this).dialog('close');\r\n\t\t\t\t}\r\n\t\t\t}]\r\n\t\t};\r\n\t\tif( $(\"#em-bookings-table-settings\").length > 0 ){\r\n\t\t\t//Settings Overlay\r\n\t\t\t$(\"#em-bookings-table-settings\").dialog(em_bookings_settings_dialog);\r\n\t\t\t$(document).on('click', '#em-bookings-table-settings-trigger', function(e){ e.preventDefault(); $(\"#em-bookings-table-settings\").dialog('open'); });\r\n\t\t\t//Export Overlay\r\n\t\t\t$(\"#em-bookings-table-export\").dialog(em_bookings_export_dialog);\r\n\t\t\t$(document).on('click', '#em-bookings-table-export-trigger', function(e){ e.preventDefault(); $(\"#em-bookings-table-export\").dialog('open'); });\r\n\t\t\tvar export_overlay_show_tickets = function(){\r\n\t\t\t\tif( $('#em-bookings-table-export-form input[name=show_tickets]').is(':checked') ){\r\n\t\t\t\t\t$('#em-bookings-table-export-form .em-bookings-col-item-ticket').show();\r\n\t\t\t\t\t$('#em-bookings-table-export-form #em-bookings-export-cols-active .em-bookings-col-item-ticket input').val(1);\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$('#em-bookings-table-export-form .em-bookings-col-item-ticket').hide().find('input').val(0);\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t//Sync export overlay with table search field changes\r\n\t\t\t$('#em-bookings-table form select').each(function(i, el){\r\n\t\t\t\t$(el).on('change', function(e){\r\n\t\t\t\t\tvar select_el = $(this);\r\n\t\t\t\t\tvar input_par = $('#em-bookings-table-export-form input[name='+select_el.attr('name')+']');\r\n\t\t\t\t\tvar input_par_selected = select_el.find('option:selected');\r\n\t\t\t\t\tinput_par.val(input_par_selected.val());\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\texport_overlay_show_tickets();\r\n\t\t\t$('#em-bookings-table-export-form input[name=show_tickets]').on('click', export_overlay_show_tickets);\r\n\t\t\t//Sortables\r\n\t\t\t$( \".em-bookings-cols-sortable\" ).sortable({\r\n\t\t\t\tconnectWith: \".em-bookings-cols-sortable\",\r\n\t\t\t\tupdate: function(event, ui) {\r\n\t\t\t\t\tif( ui.item.parents('ul#em-bookings-cols-active, ul#em-bookings-export-cols-active').length > 0 ){\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tui.item.addClass('ui-state-highlight').removeClass('ui-state-default').children('input').val(1);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tui.item.addClass('ui-state-default').removeClass('ui-state-highlight').children('input').val(0);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}).disableSelection();\r\n\t\t\tload_ui_css = true;\r\n\t\t}\r\n\t\t//Widgets and filter submissions\r\n\t\t$(document).on('submit', '#em-bookings-table form.bookings-filter', function(e){\r\n\t\t\tvar el = $(this);\t\t\t\r\n\t\t\t//append loading spinner\r\n\t\t\tel.parents('#em-bookings-table').find('.table-wrap').first().append('<div id=\"em-loading\" />');\r\n\t\t\t//ajax call\r\n\t\t\t$.post( EM.ajaxurl, el.serializeArray(), function(data){\r\n\t\t\t\tvar root = el.parents('#em-bookings-table').first();\r\n\t\t\t\troot.replaceWith(data);\r\n\t\t\t\t//recreate overlays\r\n\t\t\t\t$('#em-bookings-table-export input[name=scope]').val(root.find('select[name=scope]').val());\r\n\t\t\t\t$('#em-bookings-table-export input[name=status]').val(root.find('select[name=status]').val());\r\n\t\t\t\tjQuery(document).triggerHandler('em_bookings_filtered', [data, root, el]);\r\n\t\t\t});\r\n\t\t\treturn false;\r\n\t\t});\r\n\t\t//Approve/Reject Links\r\n\t\t$(document).on('click', '.em-bookings-approve,.em-bookings-reject,.em-bookings-unapprove,.em-bookings-delete', function(){\r\n\t\t\tvar el = $(this); \r\n\t\t\tif( el.hasClass('em-bookings-delete') ){\r\n\t\t\t\tif( !confirm(EM.booking_delete) ){ return false; }\r\n\t\t\t}\r\n\t\t\tvar url = em_ajaxify( el.attr('href'));\t\t\r\n\t\t\tvar td = el.parents('td').first();\r\n\t\t\ttd.html(EM.txt_loading);\r\n\t\t\ttd.load( url );\r\n\t\t\treturn false;\r\n\t\t});\r\n\t}\r\n\t//Old Bookings Table - depreciating soon\r\n\tif( $('.em_bookings_events_table').length > 0 ){\r\n\t\t//Widgets and filter submissions\r\n\t\t$(document).on('submit', '.em_bookings_events_table form', function(e){\r\n\t\t\tvar el = $(this);\r\n\t\t\tvar url = em_ajaxify( el.attr('action') );\t\t\r\n\t\t\tel.parents('.em_bookings_events_table').find('.table-wrap').first().append('<div id=\"em-loading\" />');\r\n\t\t\t$.get( url, el.serializeArray(), function(data){\r\n\t\t\t\tel.parents('.em_bookings_events_table').first().replaceWith(data);\r\n\t\t\t});\r\n\t\t\treturn false;\r\n\t\t});\r\n\t\t//Pagination link clicks\r\n\t\t$(document).on('click', '.em_bookings_events_table .tablenav-pages a', function(){\r\n\t\t\tvar el = $(this);\r\n\t\t\tvar url = em_ajaxify( el.attr('href') );\t\r\n\t\t\tel.parents('.em_bookings_events_table').find('.table-wrap').first().append('<div id=\"em-loading\" />');\r\n\t\t\t$.get( url, function(data){\r\n\t\t\t\tel.parents('.em_bookings_events_table').first().replaceWith(data);\r\n\t\t\t});\r\n\t\t\treturn false;\r\n\t\t});\r\n\t}\r\n\t\r\n\t//Manual Booking\r\n\t$(document).on('click', 'a.em-booking-button', function(e){\r\n\t\te.preventDefault();\r\n\t\tvar button = $(this);\r\n\t\tif( button.text() != EM.bb_booked && $(this).text() != EM.bb_booking){\r\n\t\t\tbutton.text(EM.bb_booking);\r\n\t\t\tvar button_data = button.attr('id').split('_'); \r\n\t\t\t$.ajax({\r\n\t\t\t\turl: EM.ajaxurl,\r\n\t\t\t\tdataType: 'jsonp',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tevent_id : button_data[1],\r\n\t\t\t\t\t_wpnonce : button_data[2],\r\n\t\t\t\t\taction : 'booking_add_one'\r\n\t\t\t\t},\r\n\t\t\t\tsuccess : function(response, statusText, xhr, $form) {\r\n\t\t\t\t\tif(response.result){\r\n\t\t\t\t\t\tbutton.text(EM.bb_booked);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tbutton.text(EM.bb_error);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(response.message != '') alert(response.message);\r\n\t\t\t\t\t$(document).triggerHandler('em_booking_button_response', [response, button]);\r\n\t\t\t\t},\r\n\t\t\t\terror : function(){ button.text(EM.bb_error); }\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn false;\r\n\t});\t\r\n\t$(document).on('click', 'a.em-cancel-button', function(e){\r\n\t\te.preventDefault();\r\n\t\tvar button = $(this);\r\n\t\tif( button.text() != EM.bb_cancelled && button.text() != EM.bb_canceling){\r\n\t\t\tbutton.text(EM.bb_canceling);\r\n\t\t\tvar button_data = button.attr('id').split('_'); \r\n\t\t\t$.ajax({\r\n\t\t\t\turl: EM.ajaxurl,\r\n\t\t\t\tdataType: 'jsonp',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tbooking_id : button_data[1],\r\n\t\t\t\t\t_wpnonce : button_data[2],\r\n\t\t\t\t\taction : 'booking_cancel'\r\n\t\t\t\t},\r\n\t\t\t\tsuccess : function(response, statusText, xhr, $form) {\r\n\t\t\t\t\tif(response.result){\r\n\t\t\t\t\t\tbutton.text(EM.bb_cancelled);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tbutton.text(EM.bb_cancel_error);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror : function(){ button.text(EM.bb_cancel_error); }\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn false;\r\n\t});  \r\n\r\n\t//Datepicker\r\n\tif( $('.em-date-single, .em-date-range, #em-date-start').length > 0 ){\r\n\t\tload_ui_css = true;\r\n\t\tem_setup_datepicker('body');\r\n\t}\r\n\tif( load_ui_css ) em_load_jquery_css();\r\n\t\r\n\t//previously in em-admin.php\r\n\tfunction updateIntervalDescriptor () { \r\n\t\t$(\".interval-desc\").hide();\r\n\t\tvar number = \"-plural\";\r\n\t\tif ($('input#recurrence-interval').val() == 1 || $('input#recurrence-interval').val() == \"\")\r\n\t\tnumber = \"-singular\";\r\n\t\tvar descriptor = \"span#interval-\"+$(\"select#recurrence-frequency\").val()+number;\r\n\t\t$(descriptor).show();\r\n\t}\r\n\tfunction updateIntervalSelectors () {\r\n\t\t$('p.alternate-selector').hide();   \r\n\t\t$('p#'+ $('select#recurrence-frequency').val() + \"-selector\").show();\r\n\t}\r\n\tfunction updateShowHideRecurrence () {\r\n\t\tif( $('input#event-recurrence').is(\":checked\")) {\r\n\t\t\t$(\"#event_recurrence_pattern\").fadeIn();\r\n\t\t\t$(\"#event-date-explanation\").hide();\r\n\t\t\t$(\"#recurrence-dates-explanation\").show();\r\n\t\t\t$(\"h3#recurrence-dates-title\").show();\r\n\t\t\t$(\"h3#event-date-title\").hide();     \r\n\t\t} else {\r\n\t\t\t$(\"#event_recurrence_pattern\").hide();\r\n\t\t\t$(\"#recurrence-dates-explanation\").hide();\r\n\t\t\t$(\"#event-date-explanation\").show();\r\n\t\t\t$(\"h3#recurrence-dates-title\").hide();\r\n\t\t\t$(\"h3#event-date-title\").show();   \r\n\t\t}\r\n\t}\t\t \r\n\t$(\"#recurrence-dates-explanation\").hide();\r\n\t$(\"#date-to-submit\").hide();\r\n\t$(\"#end-date-to-submit\").hide();\r\n\t\r\n\t$(\"#localised-date\").show();\r\n\t$(\"#localised-end-date\").show();\r\n\t\r\n\t$('#em-wrapper input.select-all').on('change', function(){\r\n\t \tif($(this).is(':checked')){\r\n\t\t\t$('input.row-selector').prop('checked', true);\r\n\t\t\t$('input.select-all').prop('checked', true);\r\n\t \t}else{\r\n\t\t\t$('input.row-selector').prop('checked', false);\r\n\t\t\t$('input.select-all').prop('checked', false);\r\n\t\t}\r\n\t}); \r\n\t\r\n\tupdateIntervalDescriptor(); \r\n\tupdateIntervalSelectors();\r\n\tupdateShowHideRecurrence();\r\n\t$('input#event-recurrence').on('change', updateShowHideRecurrence);\r\n\t   \r\n\t// recurrency elements   \r\n\t$('input#recurrence-interval').on('keyup', updateIntervalDescriptor);\r\n\t$('select#recurrence-frequency').on('change', updateIntervalDescriptor);\r\n\t$('select#recurrence-frequency').on('change', updateIntervalSelectors);\r\n\r\n\r\n\r\n\t/* Location Type Selection */\r\n\t$('.em-location-types .em-location-types-select').on('change', function(){\r\n\t\tlet el = $(this);\r\n\t\tif( el.val() == 0 ){\r\n\t\t\t$('.em-location-type').hide();\r\n\t\t}else{\r\n\t\t\tlet location_type = el.find('option:selected').data('display-class');\r\n\t\t\t$('.em-location-type').hide();\r\n\t\t\t$('.em-location-type.'+location_type).show();\r\n\t\t\tif( location_type != 'em-location-type-place' ){\r\n\t\t\t\tjQuery('#em-location-reset a').trigger('click');\r\n\t\t\t}\r\n\t\t}\r\n\t\tif( el.data('active') !== '' && el.val() !== el.data('active') ){\r\n\t\t\t$('.em-location-type-delete-active-alert').hide();\r\n\t\t\t$('.em-location-type-delete-active-alert').show();\r\n\t\t}else{\r\n\t\t\t$('.em-location-type-delete-active-alert').hide();\r\n\t\t}\r\n\t}).trigger('change');\r\n\t\r\n\t//Finally, add autocomplete here\r\n\t//Autocomplete\r\n\tif( jQuery( \"div.em-location-data input#location-name\" ).length > 0 ){\r\n\t\tjQuery( \"div.em-location-data input#location-name\" ).autocomplete({\r\n\t\t\tsource: EM.locationajaxurl,\r\n\t\t\tminLength: 2,\r\n\t\t\tfocus: function( event, ui ){\r\n\t\t\t\tjQuery(\"input#location-id\" ).val( ui.item.value );\r\n\t\t\t\treturn false;\r\n\t\t\t},\t\t\t \r\n\t\t\tselect: function( event, ui ){\r\n\t\t\t\tjQuery(\"input#location-id\" ).val(ui.item.id).trigger('change');\r\n\t\t\t\tjQuery(\"input#location-name\" ).val(ui.item.value);\r\n\t\t\t\tjQuery('input#location-address').val(ui.item.address);\r\n\t\t\t\tjQuery('input#location-town').val(ui.item.town);\r\n\t\t\t\tjQuery('input#location-state').val(ui.item.state);\r\n\t\t\t\tjQuery('input#location-region').val(ui.item.region);\r\n\t\t\t\tjQuery('input#location-postcode').val(ui.item.postcode);\r\n\t\t\t\tjQuery('input#location-latitude').val(ui.item.latitude);\r\n\t\t\t\tjQuery('input#location-longitude').val(ui.item.longitude);\r\n\t\t\t\tif( ui.item.country == '' ){\r\n\t\t\t\t\tjQuery('select#location-country option:selected').removeAttr('selected');\r\n\t\t\t\t}else{\r\n\t\t\t\t\tjQuery('select#location-country option[value=\"'+ui.item.country+'\"]').attr('selected', 'selected');\r\n\t\t\t\t}\r\n\t\t\t\tjQuery('div.em-location-data input').css('background-color','#ccc').prop('readonly', true);\r\n\t\t\t\tjQuery('div.em-location-data select').css('background-color','#ccc').css('color', '#666666').prop('disabled', true);\r\n\t\t\t\tjQuery('#em-location-reset').show();\r\n\t\t\t\tjQuery('#em-location-search-tip').hide();\r\n\t\t\t\tjQuery(document).triggerHandler('em_locations_autocomplete_selected', [event, ui]);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}).data( \"ui-autocomplete\" )._renderItem = function( ul, item ) {\r\n\t\t\thtml_val = \"<a>\" + em_esc_attr(item.label) + '<br><span style=\"font-size:11px\"><em>'+ em_esc_attr(item.address) + ', ' + em_esc_attr(item.town)+\"</em></span></a>\";\r\n\t\t\treturn jQuery( \"<li></li>\" ).data( \"item.autocomplete\", item ).append(html_val).appendTo( ul );\r\n\t\t};\r\n\t\tjQuery('#em-location-reset a').on('click', function(){\r\n\t\t\tjQuery('div.em-location-data input').val('').prop('readonly', false);\r\n\t\t\tjQuery('div.em-location-data select').prop('disabled', false);\r\n\t\t\tjQuery('div.em-location-data option:selected').removeAttr('selected');\r\n\t\t\tjQuery('input#location-id').val('');\r\n\t\t\tjQuery('#em-location-reset').hide();\r\n\t\t\tjQuery('#em-location-search-tip').show();\r\n\t\t\tjQuery('#em-map').hide();\r\n\t\t\tjQuery('#em-map-404').show();\r\n\t\t\tif(typeof(marker) !== 'undefined'){\r\n\t\t\t\tmarker.setPosition(new google.maps.LatLng(0, 0));\r\n\t\t\t\tinfoWindow.close();\r\n\t\t\t\tmarker.setDraggable(true);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\t\tif( jQuery('input#location-id').val() != '0' && jQuery('input#location-id').val() != '' ){\r\n\t\t\tjQuery('div.em-location-data input').prop('readonly', true);\r\n\t\t\tjQuery('div.em-location-data select').prop('disabled', true);\r\n\t\t\tjQuery('#em-location-reset').show();\r\n\t\t\tjQuery('#em-location-search-tip').hide();\r\n\t\t}\r\n\t}\r\n\t/* Local JS Timezone related placeholders */\r\n\t/* Moment JS Timzeone PH */\r\n\tif( window.moment ){\r\n\t\tvar replace_specials = function( day, string ){\r\n\t\t\t// replace things not supported by moment\r\n\t\t\tstring = string.replace(/##T/g, Intl.DateTimeFormat().resolvedOptions().timeZone);\r\n\t\t\tstring = string.replace(/#T/g, \"GMT\"+day.format('Z'));\r\n\t\t\tstring = string.replace(/###t/g, day.utcOffset()*-60);\r\n\t\t\tstring = string.replace(/##t/g, day.isDST());\r\n\t\t\tstring = string.replace(/#t/g, day.daysInMonth());\r\n\t\t\treturn string;\r\n\t\t};\r\n\t\t$('.em-date-momentjs').each( function(){\r\n\t\t\t// Start Date\r\n\t\t\tvar el = $(this);\r\n\t\t\tvar day_start = moment.unix(el.data('date-start'));\r\n\t\t\tvar date_start_string = replace_specials(day_start, day_start.format(el.data('date-format')));\r\n\t\t\tif( el.data('date-start') !== el.data('date-end') ){\r\n\t\t\t\t// End Date\r\n\t\t\t\tvar day_end = moment.unix(el.data('date-end'));\r\n\t\t\t\tvar day_end_string = replace_specials(day_start, day_end.format(el.data('date-format')));\r\n\t\t\t\t// Output\r\n\t\t\t\tvar date_string = date_start_string + el.data('date-separator') + day_end_string;\r\n\t\t\t}else{\r\n\t\t\t\tvar date_string = date_start_string;\r\n\t\t\t}\r\n\t\t\tel.text(date_string);\r\n\t\t});\r\n\t\tvar get_date_string = function(ts, format){\r\n\t\t\tlet date = new Date(ts * 1000);\r\n\t\t\tlet minutes = date.getMinutes();\r\n\t\t\tif( format == 24 ){\r\n\t\t\t\tlet hours = date.getHours();\r\n\t\t\t\thours = hours < 10 ? '0' + hours : hours;\r\n\t\t\t\tminutes = minutes < 10 ? '0' + minutes : minutes;\r\n\t\t\t\treturn hours + ':' + minutes;\r\n\t\t\t}else{\r\n\t\t\t\tlet hours = date.getHours() % 12;\r\n\t\t\t\tlet ampm = hours >= 12 ? 'PM' : 'AM';\r\n\t\t\t\tif( hours === 0 ) hours = 12; // the hour '0' should be '12'\r\n\t\t\t\tminutes = minutes < 10 ? '0'+minutes : minutes;\r\n\t\t\t\treturn hours + ':' + minutes + ' ' + ampm;\r\n\t\t\t}\r\n\t\t}\r\n\t\t$('.em-time-localjs').each( function(){\r\n\t\t\tvar el = $(this);\r\n\t\t\tvar strTime = get_date_string( el.data('time'), el.data('time-format') );\r\n\t\t\tif( el.data('time-end') ){\r\n\t\t\t\tvar separator = el.data('time-separator') ? el.data('time-separator') : ' - ';\r\n\t\t\t\tstrTime = strTime + separator + get_date_string( el.data('time-end'), el.data('time-format') );\r\n\t\t\t}\r\n\t\t\tel.text(strTime);\r\n\t\t});\r\n\t}\r\n\t/* Done! */\r\n\tjQuery(document).triggerHandler('em_javascript_loaded');\r\n});\r\n\r\nfunction em_load_jquery_css(){\r\n\tif( EM.ui_css && jQuery('link#jquery-ui-css').length == 0 ){\r\n\t\tvar script = document.createElement(\"link\");\r\n\t\tscript.id = 'jquery-ui-css';\r\n\t\tscript.rel = \"stylesheet\";\r\n\t\tscript.href = EM.ui_css;\r\n\t\tdocument.body.appendChild(script);\r\n\t}\r\n}\r\n\r\nfunction em_setup_datepicker(wrap){\t\r\n\twrap = jQuery(wrap);\r\n\t//default picker vals\r\n\t\r\n\t//apply datepickers\r\n\tdateDivs = wrap.find('.em-date-single, .em-date-range');\r\n\tif( dateDivs.length > 0 ){\r\n\t\t//apply datepickers to elements\r\n\t\tdateDivs.find('input.em-date-input-loc').each(function(i,dateInput){\r\n\t\t\t//init the datepicker\r\n\t\t\tvar dateInput = jQuery(dateInput);\r\n\t\t\tvar dateValue = dateInput.nextAll('input.em-date-input').first();\r\n\t\t\tvar dateValue_value = dateValue.val();\r\n\r\n\t\t\t//now set the value\r\n\t\t\tif( dateValue_value ){\r\n\t\t\t\t\r\n\t\t\t\tdateInput.val(dateValue_value);\r\n\t\t\t\tdateValue.val(dateValue_value);\r\n\t\t\t}\r\n\t\t\t//add logic for texts\r\n\t\t\tdateInput.on('change', function(){\r\n\t\t\t\tif( jQuery(this).val() == '' ){\r\n\t\t\t\t\tjQuery(this).nextAll('.em-date-input').first().val('');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t\t//deal with date ranges\r\n\t\tdateDivs.filter('.em-date-range').find('input.em-date-input-loc').each(function(i,dateInput){\r\n\t\t\t//finally, apply start/end logic to this field\r\n\t\t\tdateInput = jQuery(dateInput);\r\n\t\t\tif( dateInput.hasClass('em-date-start') ){\r\n\t\t\t\tdateInput.datepicker('option','onSelect', function( selectedDate ) {\r\n\t\t\t\t\t//get corresponding end date input, we expect ranges to be contained in .em-date-range with a start/end input element\r\n\t\t\t\t\tvar startDate = jQuery(this);\r\n\t\t\t\t\tvar endDate = startDate.parents('.em-date-range').find('.em-date-end').first();\r\n\t\t\t\t\tvar startValue = startDate.nextAll('input.em-date-input').first().val();\r\n\t\t\t\t\tvar endValue = endDate.nextAll('input.em-date-input').first().val();\r\n\t\t\t\t\tstartDate.trigger('em_datepicker_change');\r\n\t\t\t\t\tif( startValue > endValue && endValue != '' ){\r\n\t\t\t\t\t\tendDate.datepicker( \"setDate\" , selectedDate );\r\n\t\t\t\t\t\tendDate.trigger('change').trigger('em_datepicker_change');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tendDate.datepicker( \"option\", 'minDate', selectedDate );\r\n\t\t\t\t});\r\n\t\t\t}else if( dateInput.hasClass('em-date-end') ){\r\n\t\t\t\tvar startInput = dateInput.parents('.em-date-range').find('.em-date-start').first();\r\n\t\t\t\tif( startInput.val() != '' ){\r\n\t\t\t\t\tdateInput.datepicker('option', 'minDate', startInput.val());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\nfunction em_setup_timepicker(wrap){\r\n\twrap = jQuery(wrap);\r\n\t\r\n\r\n\t// Keep the duration between the two inputs.\r\n\twrap.find(\".em-time-range input.em-time-start\").each( function(i, el){\r\n\t\tvar time = jQuery(el);\r\n\r\n\t}).on('change', function() {\r\n\t\tvar start = jQuery(this);\r\n\t\tvar end = start.nextAll('.em-time-end');\r\n\t\tif (end.val()) { // Only update when second input has a value.\r\n\t\t\t// Calculate duration.\r\n\t\t\tvar oldTime = start.data('oldTime');\r\n\t\t\tstart.data('oldTime', time);\r\n\t\t}\r\n\t});\r\n\t// Validate.\r\n\twrap.find(\".event-form-when .em-time-range input.em-time-end\").on('change', function() {\r\n\t\tvar end = jQuery(this);\r\n\t\tvar start = end.prevAll('.em-time-start');\r\n\t\tvar wrapper = end.closest('.event-form-when');\r\n\t\tvar start_date = wrapper.find('.em-date-end').val();\r\n\t\tvar end_date = wrapper.find('.em-date-start').val();\r\n\t\tif( start.val() ){\r\n\t\t\tif( start.em_timepicker('getTime') > end.em_timepicker('getTime') && ( end_date.length == 0 || start_date == end_date ) ) { end.addClass(\"error\"); }\r\n\t\t\telse { end.removeClass(\"error\"); }\r\n\t\t}\r\n\t});\r\n\twrap.find(\".event-form-when .em-date-end\").on('change', function(){\r\n\t\tjQuery(this).closest('.event-form-when').find('.em-time-end').trigger('change');\r\n\t});\r\n\t//Sort out all day checkbox\r\n\twrap.find('.em-time-range input.em-time-all-day').on('change', function(){\r\n\t\tvar allday = jQuery(this);\r\n\t\tif( allday.is(':checked') ){\r\n\t\t\tallday.siblings('.em-time-input').css('background-color','#ccc');\r\n\t\t}else{\r\n\t\t\tallday.siblings('.em-time-input').css('background-color','#fff');\r\n\t\t}\r\n\t}).trigger('change');\r\n}\r\n\r\n/* Useful function for adding the em_ajax flag to a url, regardless of querystring format */\r\nvar em_ajaxify = function(url){\r\n\tif ( url.search('em_ajax=0') != -1){\r\n\t\turl = url.replace('em_ajax=0','em_ajax=1');\r\n\t}else if( url.search(/\\?/) != -1 ){\r\n\t\turl = url + \"&em_ajax=1\";\r\n\t}else{\r\n\t\turl = url + \"?em_ajax=1\";\r\n\t}\r\n\treturn url;\r\n};\r\n\r\n\r\n  \r\nfunction em_map_infobox(marker, message, map) {\r\n  var iw = new google.maps.InfoWindow({ content: message });\r\n  google.maps.event.addListener(marker, 'click', function() {\r\n\tif( infoWindow ) infoWindow.close();\r\n\tinfoWindow = iw;\r\n    iw.open(map,marker);\r\n  });\r\n}\r\n\r\nfunction em_esc_attr( str ){\r\n\tif( typeof str !== 'string' ) return '';\r\n\treturn str.replace(/</gi,'&lt;').replace(/>/gi,'&gt;');\r\n}\r\n\r\n// TODO: Put this in extra file\r\nlet EventsManager = {\r\n\r\n\tinit: () => {\r\n\t\tEventsManager.autofillDate();\r\n\t\tEventsManager.autofillTime();\r\n\t\tEventsManager.lockTime();\r\n\t},\r\n\r\n\tgetElementByName: (element) => {\r\n\t\tvar elements = document.getElementsByName(element);\r\n\t\tif (elements.length) {\r\n\t\t\treturn elements[0];\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t},\r\n\r\n\tautofillDate: () => {\r\n\t\tconst dateStartSelector = EventsManager.getElementByName(\"event_start_date\")\r\n\t\tconst dateEndSelector = EventsManager.getElementByName(\"event_end_date\")\r\n\t\tif (dateStartSelector && dateEndSelector) {\r\n\t\t\tdateStartSelector.addEventListener(\"change\", (event) => {\r\n\t\t\t\tif(dateEndSelector.value == \"\") {\r\n\t\t\t\t\tdateEndSelector.value = dateStartSelector.value;\r\n\t\t\t\t} \r\n\t\t\t})\r\n\t\t}\r\n\t},\r\n\r\n\tautofillTime: () => {\r\n\t\tconst timeStartSelector = EventsManager.getElementByName(\"event_start_time\")\r\n\t\tconst timeEndSelector = EventsManager.getElementByName(\"event_end_time\")\r\n\t\tif (timeStartSelector && timeEndSelector) {\r\n\t\t\ttimeStartSelector.addEventListener(\"change\", (event) => {\r\n\t\t\t\tif(timeEndSelector.value == \"00:00\") {\r\n\t\t\t\t\ttimeEndSelector.value = timeStartSelector.value;\r\n\t\t\t\t} \r\n\t\t\t})\r\n\t\t}\r\n\t},\r\n\r\n\tlockTime: () => {\r\n\t\tconst allDaySelector = EventsManager.getElementByName(\"event_all_day\")\r\n\t\tconst timeStartSelector = EventsManager.getElementByName(\"event_start_time\")\r\n\t\tconst timeEndSelector = EventsManager.getElementByName(\"event_end_time\")\r\n\t\tif(allDaySelector) {\r\n\t\t\tallDaySelector.addEventListener(\"change\", (event) => {\r\n\t\t\t\ttimeStartSelector.disabled = allDaySelector.checked;\r\n\t\t\t\ttimeEndSelector.disabled = allDaySelector.checked;\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', EventsManager.init, false);\r\n\r\n\r\n\r\n\r\n"],"names":["jQuery","document","ready","$","load_ui_css","each","i","el","addClass","next","parent","length","em_setup_timepicker","off","on","e","preventDefault","closest","prepend","url","em_ajaxify","attr","load","trigger","rel","split","hasClass","find","slideUp","show","hide","removeClass","slideDown","EM","search_term_placeholder","createElement","value","html","txt_loading","val","data","action","country","return_html","ajaxurl","region","state","form","em_search","txt_search","results_wrapper","append","submitButton","txt_searching","img","children","replace","vars","serialize","ajax","type","dataType","success","responseText","replaceWith","triggerHandler","a","wrapper","wrapper_parent","qvars","confirm","window","location","href","is","event","first","warning_text","event_reschedule_warning","event_recurrence_bookings","event_recurrence_overwrite","confirmation","siblings","checked","disable_bookings_warning","fadeIn","reset_ticket_forms","tickets","rowNo","slot","clone","appendTo","index","datepicker","removeAttr","em_timepickerObj","em_timepicker","em_setup_datepicker","animate","scrollTop","offset","top","check_ticket_sortability","tbody","text","classname","toggleClass","show_advanced","getJSON","result","remove","alert","error","sortable","items","placeholder","handle","helper","tds","em_tickets","parents","match","pno","em_bookings_settings_dialog","modal","autoOpen","minWidth","height","buttons","bookings_settings_save","click","booking_form_cols","item_match","name","dialog","em_bookings_export_dialog","bookings_export_save","export_overlay_show_tickets","select_el","input_par","input_par_selected","connectWith","update","ui","item","disableSelection","post","serializeArray","root","booking_delete","td","get","button","bb_booked","bb_booking","button_data","event_id","_wpnonce","response","statusText","xhr","$form","bb_error","message","bb_cancelled","bb_canceling","booking_id","bb_cancel_error","em_load_jquery_css","updateIntervalDescriptor","number","descriptor","updateIntervalSelectors","updateShowHideRecurrence","prop","location_type","autocomplete","source","locationajaxurl","minLength","focus","select","id","address","town","postcode","latitude","longitude","css","_renderItem","ul","html_val","em_esc_attr","label","marker","setPosition","google","maps","LatLng","infoWindow","close","setDraggable","moment","replace_specials","day","string","Intl","DateTimeFormat","resolvedOptions","timeZone","format","utcOffset","isDST","daysInMonth","day_start","unix","date_start_string","day_end","day_end_string","date_string","get_date_string","ts","date","Date","minutes","getMinutes","hours","getHours","ampm","strTime","separator","ui_css","script","body","appendChild","wrap","dateDivs","dateInput","dateValue","nextAll","dateValue_value","filter","selectedDate","startDate","endDate","startValue","endValue","startInput","time","start","end","oldTime","prevAll","start_date","end_date","allday","search","em_map_infobox","map","iw","InfoWindow","content","addListener","open","str","EventsManager","init","autofillDate","autofillTime","lockTime","getElementByName","element","elements","getElementsByName","dateStartSelector","dateEndSelector","addEventListener","timeStartSelector","timeEndSelector","allDaySelector","disabled"],"sourceRoot":""}