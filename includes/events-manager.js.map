{"version":3,"file":"events-manager.js","mappings":"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","sources":["webpack:///./src/events_manager.scss?c20a","webpack:///webpack/bootstrap","webpack:///webpack/runtime/make namespace object","webpack:///./src/events-manager.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport {};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import './events_manager.scss';\n\njQuery( document ).ready( function ( $ ) {\n\tlet load_ui_css = false; //load jquery ui css?\n\t/* Time Entry */\n\t$( '#start-time' ).each( function ( i, el ) {\n\t\t$( el )\n\t\t\t.addClass( 'em-time-input em-time-start' )\n\t\t\t.next( '#end-time' )\n\t\t\t.addClass( 'em-time-input em-time-end' )\n\t\t\t.parent()\n\t\t\t.addClass( 'em-time-range' );\n\t} );\n\n\t/* Calendar AJAX */\n\t$( '.em-calendar-wrapper a' ).off( 'click' );\n\t$( '.em-calendar-wrapper' ).on( 'click', 'a.em-calnav, a.em-calnav', function ( e ) {\n\t\te.preventDefault();\n\t\t$( this ).closest( '.em-calendar-wrapper' ).prepend( '<div class=\"loading\" id=\"em-loading\"></div>' );\n\t\tlet url = em_ajaxify( $( this ).attr( 'href' ) );\n\t\t$( this )\n\t\t\t.closest( '.em-calendar-wrapper' )\n\t\t\t.load( url, function () {\n\t\t\t\t$( this ).trigger( 'em_calendar_load' );\n\t\t\t} );\n\t} );\n\n\t/*\n\t * ADMIN AREA AND PUBLIC FORMS (Still polishing this section up, note that form ids and classes may change accordingly)\n\t */\n\t//Events List\n\t//Approve/Reject Links\n\t$( '.events-table' ).on( 'click', '.em-event-delete', function () {\n\t\tif ( ! confirm( 'Are you sure you want to delete?' ) ) {\n\t\t\treturn false;\n\t\t}\n\t\twindow.location.href = this.href;\n\t} );\n\t//Forms\n\t$( '#event-form #event-image-delete, #location-form #location-image-delete' ).on( 'click', function () {\n\t\tlet el = $( this );\n\t\tif ( el.is( ':checked' ) ) {\n\t\t\tel.closest( '.event-form-image, .location-form-image' )\n\t\t\t\t.find( '#event-image-img, #location-image-img' )\n\t\t\t\t.hide();\n\t\t} else {\n\t\t\tel.closest( '.event-form-image, .location-form-image' )\n\t\t\t\t.find( '#event-image-img, #location-image-img' )\n\t\t\t\t.show();\n\t\t}\n\t} );\n\t//Event Editor\n\t//Recurrence Warnings\n\t$( '#event-form.em-event-admin-recurring' ).on( 'submit', function ( event ) {\n\t\tlet form = $( this );\n\t\tif ( form.find( 'input[name=\"event_reschedule\"]' ).first().val() == 1 ) {\n\t\t\tlet warning_text = EM.event_reschedule_warning;\n\t\t} else if ( form.find( 'input[name=\"event_recreate_tickets\"]' ).first().val() == 1 ) {\n\t\t\tlet warning_text = EM.event_recurrence_bookings;\n\t\t} else {\n\t\t\tlet warning_text = EM.event_recurrence_overwrite;\n\t\t}\n\t\tlet confirmation = confirm( warning_text );\n\t\tif ( confirmation == false ) {\n\t\t\tevent.preventDefault();\n\t\t}\n\t} );\n\t//Buttons for recurrence warnings within event editor forms\n\t$( '.em-reschedule-trigger' ).on( 'click', function ( e ) {\n\t\te.preventDefault();\n\t\tlet trigger = $( this );\n\t\ttrigger\n\t\t\t.closest( '.em-recurrence-reschedule' )\n\t\t\t.find( trigger.data( 'target' ) )\n\t\t\t.removeClass( 'reschedule-hidden' );\n\t\ttrigger.siblings( '.em-reschedule-value' ).val( 1 );\n\t\ttrigger.addClass( 'reschedule-hidden' ).siblings( 'a' ).removeClass( 'reschedule-hidden' );\n\t} );\n\t$( '.em-reschedule-cancel' ).on( 'click', function ( e ) {\n\t\te.preventDefault();\n\t\tlet trigger = $( this );\n\t\ttrigger.closest( '.em-recurrence-reschedule' ).find( trigger.data( 'target' ) ).addClass( 'reschedule-hidden' );\n\t\ttrigger.siblings( '.em-reschedule-value' ).val( 0 );\n\t\ttrigger.addClass( 'reschedule-hidden' ).siblings( 'a' ).removeClass( 'reschedule-hidden' );\n\t} );\n\t//Tickets & Bookings\n\tif ( $( '#em-tickets-form' ).length > 0 ) {\n\t\t//Enable/Disable Bookings\n\t\t$( '#event-rsvp' ).on( 'click', function ( event ) {\n\t\t\tif ( ! this.checked ) {\n\t\t\t\tlet confirmation = confirm( EM.disable_bookings_warning );\n\t\t\t\tif ( confirmation == false ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t} else {\n\t\t\t\t\t$( '#event-rsvp-options' ).hide();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$( '#event-rsvp-options' ).fadeIn();\n\t\t\t}\n\t\t} );\n\t\tif ( $( 'input#event-rsvp' ).is( ':checked' ) ) {\n\t\t\t$( 'div#rsvp-data' ).fadeIn();\n\t\t} else {\n\t\t\t$( 'div#rsvp-data' ).hide();\n\t\t}\n\t\t//Ticket(s) UI\n\t\tlet reset_ticket_forms = function () {\n\t\t\t$( '#em-tickets-form table tbody tr.em-tickets-row' ).show();\n\t\t\t$( '#em-tickets-form table tbody tr.em-tickets-row-form' ).hide();\n\t\t};\n\t\t//recurrences and cut-off logic for ticket availability\n\t\tif ( $( '#em-recurrence-checkbox' ).length > 0 ) {\n\t\t\t$( '#em-recurrence-checkbox' )\n\t\t\t\t.on( 'change', function () {\n\t\t\t\t\tif ( $( '#em-recurrence-checkbox' ).is( ':checked' ) ) {\n\t\t\t\t\t\t$(\n\t\t\t\t\t\t\t'#em-tickets-form .ticket-dates-from-recurring, #em-tickets-form .ticket-dates-to-recurring, #event-rsvp-options .em-booking-date-recurring'\n\t\t\t\t\t\t).show();\n\t\t\t\t\t\t$(\n\t\t\t\t\t\t\t'#em-tickets-form .ticket-dates-from-normal, #em-tickets-form .ticket-dates-to-normal, #event-rsvp-options .em-booking-date-normal, #em-tickets-form .hidden'\n\t\t\t\t\t\t).hide();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(\n\t\t\t\t\t\t\t'#em-tickets-form .ticket-dates-from-normal, #em-tickets-form .ticket-dates-to-normal, #event-rsvp-options .em-booking-date-normal'\n\t\t\t\t\t\t).show();\n\t\t\t\t\t\t$(\n\t\t\t\t\t\t\t'#em-tickets-form .ticket-dates-from-recurring, #em-tickets-form .ticket-dates-to-recurring, #event-rsvp-options .em-booking-date-recurring, #em-tickets-form .hidden'\n\t\t\t\t\t\t).hide();\n\t\t\t\t\t}\n\t\t\t\t} )\n\t\t\t\t.trigger( 'change' );\n\t\t} else if ( $( '#em-form-recurrence' ).length > 0 ) {\n\t\t\t$(\n\t\t\t\t'#em-tickets-form .ticket-dates-from-recurring, #em-tickets-form .ticket-dates-to-recurring, #event-rsvp-options .em-booking-date-recurring'\n\t\t\t).show();\n\t\t\t$(\n\t\t\t\t'#em-tickets-form .ticket-dates-from-normal, #em-tickets-form .ticket-dates-to-normal, #event-rsvp-options .em-booking-date-normal, #em-tickets-form .hidden'\n\t\t\t).hide();\n\t\t} else {\n\t\t\t$(\n\t\t\t\t'#em-tickets-form .ticket-dates-from-recurring, #em-tickets-form .ticket-dates-to-recurring, #event-rsvp-options .em-booking-date-recurring, #em-tickets-form .hidden'\n\t\t\t).hide();\n\t\t}\n\t\t//Add a new ticket\n\t\t$( '#em-tickets-add' ).on( 'click', function ( e ) {\n\t\t\te.preventDefault();\n\t\t\treset_ticket_forms();\n\t\t\t//create copy of template slot, insert so ready for population\n\t\t\tlet tickets = $( '#em-tickets-form table tbody' );\n\t\t\tlet rowNo = tickets.length + 1;\n\t\t\tlet slot = tickets\n\t\t\t\t.first( '.em-ticket-template' )\n\t\t\t\t.clone( true )\n\t\t\t\t.attr( 'id', 'em-ticket-' + rowNo )\n\t\t\t\t.removeClass( 'em-ticket-template' )\n\t\t\t\t.addClass( 'em-ticket' )\n\t\t\t\t.appendTo( $( '#em-tickets-form table' ) );\n\t\t\t//change the index of the form element names\n\t\t\tslot.find( '*[name]' ).each( function ( index, el ) {\n\t\t\t\tel = $( el );\n\t\t\t\tel.attr( 'name', el.attr( 'name' ).replace( 'em_tickets[0]', 'em_tickets[' + rowNo + ']' ) );\n\t\t\t} );\n\t\t\t//show ticket and switch to editor\n\t\t\tslot.show().find( '.ticket-actions-edit' ).trigger( 'click' );\n\t\t\t//refresh datepicker and values\n\t\t\tslot.find( '.em-date-input-loc' ).datepicker( 'destroy' ).removeAttr( 'id' ); //clear all datepickers\n\t\t\tslot.find( '.em-time-input' )\n\t\t\t\t.off()\n\t\t\t\t.each( function ( index, el ) {\n\t\t\t\t\tif ( typeof this.em_timepickerObj == 'object' ) {\n\t\t\t\t\t\tthis.em_timepicker( 'remove' );\n\t\t\t\t\t}\n\t\t\t\t} ); //clear all em_timepickers - consequently, also other click/blur/change events, recreate the further down\n\t\t\tem_setup_datepicker( slot );\n\t\t\tem_setup_timepicker( slot );\n\t\t\t$( 'html, body' ).animate( { scrollTop: slot.offset().top - 30 } ); //sends user to form\n\t\t\tcheck_ticket_sortability();\n\t\t} );\n\t\t//Edit a Ticket\n\t\t$( document ).on( 'click', '.ticket-actions-edit', function ( e ) {\n\t\t\te.preventDefault();\n\t\t\treset_ticket_forms();\n\t\t\tlet tbody = $( this ).closest( 'tbody' );\n\t\t\ttbody.find( 'tr.em-tickets-row' ).hide();\n\t\t\ttbody.find( 'tr.em-tickets-row-form' ).fadeIn();\n\t\t\treturn false;\n\t\t} );\n\t\t$( document ).on( 'click', '.ticket-actions-edited', function ( e ) {\n\t\t\te.preventDefault();\n\t\t\tlet tbody = $( this ).closest( 'tbody' );\n\t\t\tlet rowNo = tbody.attr( 'id' ).replace( 'em-ticket-', '' );\n\t\t\ttbody.find( '.em-tickets-row' ).fadeIn();\n\t\t\ttbody.find( '.em-tickets-row-form' ).hide();\n\t\t\ttbody.find( '*[name]' ).each( function ( index, el ) {\n\t\t\t\tel = $( el );\n\t\t\t\tif ( el.attr( 'name' ) == 'ticket_start_pub' ) {\n\t\t\t\t\ttbody.find( 'span.ticket_start' ).text( el.val() );\n\t\t\t\t} else if ( el.attr( 'name' ) == 'ticket_end_pub' ) {\n\t\t\t\t\ttbody.find( 'span.ticket_end' ).text( el.val() );\n\t\t\t\t} else if ( el.attr( 'name' ) == 'em_tickets[' + rowNo + '][ticket_type]' ) {\n\t\t\t\t\tif ( el.find( ':selected' ).val() == 'members' ) {\n\t\t\t\t\t\ttbody.find( 'span.ticket_name' ).prepend( '* ' );\n\t\t\t\t\t}\n\t\t\t\t} else if ( el.attr( 'name' ) == 'em_tickets[' + rowNo + '][ticket_start_recurring_days]' ) {\n\t\t\t\t\tlet text =\n\t\t\t\t\t\ttbody.find( 'select.ticket-dates-from-recurring-when' ).val() == 'before'\n\t\t\t\t\t\t\t? '-' + el.val()\n\t\t\t\t\t\t\t: el.val();\n\t\t\t\t\tif ( el.val() != '' ) {\n\t\t\t\t\t\ttbody.find( 'span.ticket_start_recurring_days' ).text( text );\n\t\t\t\t\t\ttbody\n\t\t\t\t\t\t\t.find( 'span.ticket_start_recurring_days_text, span.ticket_start_time' )\n\t\t\t\t\t\t\t.removeClass( 'hidden' )\n\t\t\t\t\t\t\t.show();\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttbody.find( 'span.ticket_start_recurring_days' ).text( ' - ' );\n\t\t\t\t\t\ttbody\n\t\t\t\t\t\t\t.find( 'span.ticket_start_recurring_days_text, span.ticket_start_time' )\n\t\t\t\t\t\t\t.removeClass( 'hidden' )\n\t\t\t\t\t\t\t.hide();\n\t\t\t\t\t}\n\t\t\t\t} else if ( el.attr( 'name' ) == 'em_tickets[' + rowNo + '][ticket_end_recurring_days]' ) {\n\t\t\t\t\tlet text =\n\t\t\t\t\t\ttbody.find( 'select.ticket-dates-to-recurring-when' ).val() == 'before'\n\t\t\t\t\t\t\t? '-' + el.val()\n\t\t\t\t\t\t\t: el.val();\n\t\t\t\t\tif ( el.val() != '' ) {\n\t\t\t\t\t\ttbody.find( 'span.ticket_end_recurring_days' ).text( text );\n\t\t\t\t\t\ttbody\n\t\t\t\t\t\t\t.find( 'span.ticket_end_recurring_days_text, span.ticket_end_time' )\n\t\t\t\t\t\t\t.removeClass( 'hidden' )\n\t\t\t\t\t\t\t.show();\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttbody.find( 'span.ticket_end_recurring_days' ).text( ' - ' );\n\t\t\t\t\t\ttbody\n\t\t\t\t\t\t\t.find( 'span.ticket_end_recurring_days_text, span.ticket_end_time' )\n\t\t\t\t\t\t\t.removeClass( 'hidden' )\n\t\t\t\t\t\t\t.hide();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlet classname = el\n\t\t\t\t\t\t.attr( 'name' )\n\t\t\t\t\t\t.replace( 'em_tickets[' + rowNo + '][', '' )\n\t\t\t\t\t\t.replace( ']', '' )\n\t\t\t\t\t\t.replace( '[]', '' );\n\t\t\t\t\ttbody.find( '.em-tickets-row .' + classname ).text( el.val() );\n\t\t\t\t}\n\t\t\t} );\n\t\t\t//allow for others to hook into this\n\t\t\t$( document ).triggerHandler( 'em_maps_tickets_edit', [ tbody, rowNo, true ] );\n\t\t\t$( 'html, body' ).animate( { scrollTop: tbody.parent().offset().top - 30 } ); //sends user back to top of form\n\t\t\treturn false;\n\t\t} );\n\t\t$( document ).on( 'change', '.em-ticket-form select.ticket_type', function ( e ) {\n\t\t\t//check if ticket is for all users or members, if members, show roles to limit the ticket to\n\t\t\tlet el = $( this );\n\t\t\tif ( el.find( 'option:selected' ).val() == 'members' ) {\n\t\t\t\tel.closest( '.em-ticket-form' ).find( '.ticket-roles' ).fadeIn();\n\t\t\t} else {\n\t\t\t\tel.closest( '.em-ticket-form' ).find( '.ticket-roles' ).hide();\n\t\t\t}\n\t\t} );\n\t\t$( document ).on( 'click', '.em-ticket-form .ticket-options-advanced', function ( e ) {\n\t\t\t//show or hide advanced tickets, hidden by default\n\t\t\te.preventDefault();\n\t\t\tlet el = $( this );\n\t\t\tif ( el.hasClass( 'show' ) ) {\n\t\t\t\tel.closest( '.em-ticket-form' ).find( '.em-ticket-form-advanced' ).fadeIn();\n\t\t\t\tel.find( '.show,.show-advanced' ).hide();\n\t\t\t\tel.find( '.hide,.hide-advanced' ).show();\n\t\t\t} else {\n\t\t\t\tel.closest( '.em-ticket-form' ).find( '.em-ticket-form-advanced' ).hide();\n\t\t\t\tel.find( '.show,.show-advanced' ).show();\n\t\t\t\tel.find( '.hide,.hide-advanced' ).hide();\n\t\t\t}\n\t\t\tel.toggleClass( 'show' );\n\t\t} );\n\t\t$( '.em-ticket-form' ).each( function () {\n\t\t\t//check whether to show advanced options or not by default for each ticket\n\t\t\tlet show_advanced = false;\n\t\t\tlet el = $( this );\n\t\t\tel.find( '.em-ticket-form-advanced input[type=\"text\"]' ).each( function () {\n\t\t\t\tif ( this.value != '' ) show_advanced = true;\n\t\t\t} );\n\t\t\tif ( el.find( '.em-ticket-form-advanced input[type=\"checkbox\"]:checked' ).length > 0 ) {\n\t\t\t\tshow_advanced = true;\n\t\t\t}\n\t\t\tel.find( '.em-ticket-form-advanced option:selected' ).each( function () {\n\t\t\t\tif ( this.value != '' ) show_advanced = true;\n\t\t\t} );\n\t\t\tif ( show_advanced ) el.find( '.ticket-options-advanced' ).trigger( 'click' );\n\t\t} );\n\t\t//Delete a ticket\n\t\t$( document ).on( 'click', '.ticket-actions-delete', function ( e ) {\n\t\t\te.preventDefault();\n\t\t\tlet el = $( this );\n\t\t\tlet tbody = el.closest( 'tbody' );\n\t\t\tif ( tbody.find( 'input.ticket_id' ).val() > 0 ) {\n\t\t\t\t//only will happen if no bookings made\n\t\t\t\tel.text( 'Deleting...' );\n\t\t\t\t$.getJSON(\n\t\t\t\t\t$( this ).attr( 'href' ),\n\t\t\t\t\t{ em_ajax_action: 'delete_ticket', id: tbody.find( 'input.ticket_id' ).val() },\n\t\t\t\t\tfunction ( data ) {\n\t\t\t\t\t\tif ( data.result ) {\n\t\t\t\t\t\t\ttbody.remove();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tel.text( 'Delete' );\n\t\t\t\t\t\t\talert( data.error );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t//not saved to db yet, so just remove\n\t\t\t\ttbody.remove();\n\t\t\t}\n\t\t\tcheck_ticket_sortability();\n\t\t\treturn false;\n\t\t} );\n\t\t//Sort Tickets\n\t\t$( '#em-tickets-form.em-tickets-sortable table' ).sortable( {\n\t\t\titems: '> tbody',\n\t\t\tplaceholder: 'em-ticket-sortable-placeholder',\n\t\t\thandle: '.ticket-status',\n\t\t\thelper: function ( event, el ) {\n\t\t\t\tlet helper = $( el ).clone().addClass( 'em-ticket-sortable-helper' );\n\t\t\t\tlet tds = helper.find( '.em-tickets-row td' ).length;\n\t\t\t\thelper.children().remove();\n\t\t\t\thelper.append(\n\t\t\t\t\t'<tr class=\"em-tickets-row\"><td colspan=\"' +\n\t\t\t\t\t\ttds +\n\t\t\t\t\t\t'\" style=\"text-align:left; padding-left:15px;\"><span class=\"dashicons dashicons-tickets-alt\"></span></td></tr>'\n\t\t\t\t);\n\t\t\t\treturn helper;\n\t\t\t},\n\t\t} );\n\t\tlet check_ticket_sortability = function () {\n\t\t\tlet em_tickets = $( '#em-tickets-form table tbody.em-ticket' );\n\n\t\t\tif ( em_tickets.length == 1 ) {\n\t\t\t\tem_tickets.find( '.ticket-status' ).addClass( 'single' );\n\t\t\t\t$( '#em-tickets-form.em-tickets-sortable table' ).sortable( 'option', 'disabled', true );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tem_tickets.find( '.ticket-status' ).removeClass( 'single' );\n\t\t\t$( '#em-tickets-form.em-tickets-sortable table' ).sortable( 'option', 'disabled', false );\n\t\t};\n\t\tcheck_ticket_sortability();\n\t}\n\t//Manageing Bookings\n\tif ( $( '#em-bookings-table' ).length > 0 ) {\n\t\t//Pagination link clicks\n\t\t$( document ).on( 'click', '#em-bookings-table .tablenav-pages a', function () {\n\t\t\tlet el = $( this );\n\t\t\tlet form = el.parents( '#em-bookings-table form.bookings-filter' );\n\t\t\t//get page no from url, change page, submit form\n\t\t\tlet match = el.attr( 'href' ).match( /#[0-9]+/ );\n\t\t\tif ( match != null && match.length > 0 ) {\n\t\t\t\tlet pno = match[ 0 ].replace( '#', '' );\n\t\t\t\tform.find( 'input[name=pno]' ).val( pno );\n\t\t\t} else {\n\t\t\t\tform.find( 'input[name=pno]' ).val( 1 );\n\t\t\t}\n\t\t\tform.trigger( 'submit' );\n\t\t\treturn false;\n\t\t} );\n\t\t//Overlay Options\n\t\tlet em_bookings_settings_dialog = {\n\t\t\tmodal: true,\n\t\t\tautoOpen: false,\n\t\t\tminWidth: 500,\n\t\t\theight: 'auto',\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ttext: EM.bookings_settings_save,\n\t\t\t\t\tclick: function ( e ) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t//we know we'll deal with cols, so wipe hidden value from main\n\t\t\t\t\t\tlet match = $( '#em-bookings-table form.bookings-filter [name=cols]' ).val( '' );\n\t\t\t\t\t\tlet booking_form_cols = $( 'form#em-bookings-table-settings-form input.em-bookings-col-item' );\n\t\t\t\t\t\t$.each( booking_form_cols, function ( i, item_match ) {\n\t\t\t\t\t\t\t//item_match = $(item_match);\n\t\t\t\t\t\t\tif ( item_match.value == 1 ) {\n\t\t\t\t\t\t\t\tif ( match.val() != '' ) {\n\t\t\t\t\t\t\t\t\tmatch.val( match.val() + ',' + item_match.name );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tmatch.val( item_match.name );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t\t//submit main form\n\t\t\t\t\t\t$( '#em-bookings-table-settings' ).trigger( 'submitted' ); //hook into this with bind()\n\t\t\t\t\t\t$( '#em-bookings-table form.bookings-filter' ).trigger( 'submit' );\n\t\t\t\t\t\t$( this ).dialog( 'close' );\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t\tlet em_bookings_export_dialog = {\n\t\t\tmodal: true,\n\t\t\tautoOpen: false,\n\t\t\tminWidth: 700,\n\t\t\theight: 'auto',\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ttext: EM.bookings_export_save,\n\t\t\t\t\tclick: function ( e ) {\n\t\t\t\t\t\t$( this ).children( 'form' ).trigger( 'submit' );\n\t\t\t\t\t\t$( this ).dialog( 'close' );\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t\tif ( $( '#em-bookings-table-settings' ).length > 0 ) {\n\t\t\t//Settings Overlay\n\t\t\t$( '#em-bookings-table-settings' ).dialog( em_bookings_settings_dialog );\n\t\t\t$( document ).on( 'click', '#em-bookings-table-settings-trigger', function ( e ) {\n\t\t\t\te.preventDefault();\n\t\t\t\t$( '#em-bookings-table-settings' ).dialog( 'open' );\n\t\t\t} );\n\t\t\t//Export Overlay\n\t\t\t$( '#em-bookings-table-export' ).dialog( em_bookings_export_dialog );\n\t\t\t$( document ).on( 'click', '#em-bookings-table-export-trigger', function ( e ) {\n\t\t\t\te.preventDefault();\n\t\t\t\t$( '#em-bookings-table-export' ).dialog( 'open' );\n\t\t\t} );\n\t\t\tlet export_overlay_show_tickets = function () {\n\t\t\t\tif ( $( '#em-bookings-table-export-form input[name=show_tickets]' ).is( ':checked' ) ) {\n\t\t\t\t\t$( '#em-bookings-table-export-form .em-bookings-col-item-ticket' ).show();\n\t\t\t\t\t$(\n\t\t\t\t\t\t'#em-bookings-table-export-form #em-bookings-export-cols-active .em-bookings-col-item-ticket input'\n\t\t\t\t\t).val( 1 );\n\t\t\t\t} else {\n\t\t\t\t\t$( '#em-bookings-table-export-form .em-bookings-col-item-ticket' ).hide().find( 'input' ).val( 0 );\n\t\t\t\t}\n\t\t\t};\n\t\t\t//Sync export overlay with table search field changes\n\t\t\t$( '#em-bookings-table form select' ).each( function ( i, el ) {\n\t\t\t\t$( el ).on( 'change', function ( e ) {\n\t\t\t\t\tlet select_el = $( this );\n\t\t\t\t\tlet input_par = $( '#em-bookings-table-export-form input[name=' + select_el.attr( 'name' ) + ']' );\n\t\t\t\t\tlet input_par_selected = select_el.find( 'option:selected' );\n\t\t\t\t\tinput_par.val( input_par_selected.val() );\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t\texport_overlay_show_tickets();\n\t\t\t$( '#em-bookings-table-export-form input[name=show_tickets]' ).on( 'click', export_overlay_show_tickets );\n\t\t\t//Sortables\n\t\t\t$( '.em-bookings-cols-sortable' )\n\t\t\t\t.sortable( {\n\t\t\t\t\tconnectWith: '.em-bookings-cols-sortable',\n\t\t\t\t\tupdate: function ( event, ui ) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tui.item.parents( 'ul#em-bookings-cols-active, ul#em-bookings-export-cols-active' ).length >\n\t\t\t\t\t\t\t0\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tui.item\n\t\t\t\t\t\t\t\t.addClass( 'ui-state-highlight' )\n\t\t\t\t\t\t\t\t.removeClass( 'ui-state-default' )\n\t\t\t\t\t\t\t\t.children( 'input' )\n\t\t\t\t\t\t\t\t.val( 1 );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tui.item\n\t\t\t\t\t\t\t\t.addClass( 'ui-state-default' )\n\t\t\t\t\t\t\t\t.removeClass( 'ui-state-highlight' )\n\t\t\t\t\t\t\t\t.children( 'input' )\n\t\t\t\t\t\t\t\t.val( 0 );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t} )\n\t\t\t\t.disableSelection();\n\t\t\tload_ui_css = true;\n\t\t}\n\t\t//Widgets and filter submissions\n\t\t$( document ).on( 'submit', '#em-bookings-table form.bookings-filter', function ( e ) {\n\t\t\tlet el = $( this );\n\t\t\t//append loading spinner\n\t\t\tel.parents( '#em-bookings-table' ).find( '.table-wrap' ).first().append( '<div id=\"em-loading\" />' );\n\t\t\t//ajax call\n\t\t\t$.post( EM.ajaxurl, el.serializeArray(), function ( data ) {\n\t\t\t\tlet root = el.parents( '#em-bookings-table' ).first();\n\t\t\t\troot.replaceWith( data );\n\t\t\t\t//recreate overlays\n\t\t\t\t$( '#em-bookings-table-export input[name=scope]' ).val( root.find( 'select[name=scope]' ).val() );\n\t\t\t\t$( '#em-bookings-table-export input[name=status]' ).val( root.find( 'select[name=status]' ).val() );\n\t\t\t\tjQuery( document ).triggerHandler( 'em_bookings_filtered', [ data, root, el ] );\n\t\t\t} );\n\t\t\treturn false;\n\t\t} );\n\t\t//Approve/Reject Links\n\t\t$( document ).on(\n\t\t\t'click',\n\t\t\t'.em-bookings-approve,.em-bookings-reject,.em-bookings-unapprove,.em-bookings-delete',\n\t\t\tfunction () {\n\t\t\t\tlet el = $( this );\n\t\t\t\tif ( el.hasClass( 'em-bookings-delete' ) && ! confirm( EM.booking_delete ) ) return false;\n\t\t\t\tlet url = em_ajaxify( el.attr( 'href' ) );\n\t\t\t\tlet td = el.parents( 'td' ).first();\n\t\t\t\ttd.html( EM.txt_loading );\n\t\t\t\ttd.load( url );\n\t\t\t\treturn false;\n\t\t\t}\n\t\t);\n\t}\n\t//Old Bookings Table - depreciating soon\n\tif ( $( '.em_bookings_events_table' ).length > 0 ) {\n\t\t//Widgets and filter submissions\n\t\t$( document ).on( 'submit', '.em_bookings_events_table form', function ( e ) {\n\t\t\tlet el = $( this );\n\t\t\tlet url = em_ajaxify( el.attr( 'action' ) );\n\t\t\tel.parents( '.em_bookings_events_table' ).find( '.table-wrap' ).first().append( '<div id=\"em-loading\" />' );\n\t\t\t$.get( url, el.serializeArray(), function ( data ) {\n\t\t\t\tel.parents( '.em_bookings_events_table' ).first().replaceWith( data );\n\t\t\t} );\n\t\t\treturn false;\n\t\t} );\n\t\t//Pagination link clicks\n\t\t$( document ).on( 'click', '.em_bookings_events_table .tablenav-pages a', function () {\n\t\t\tlet el = $( this );\n\t\t\tlet url = em_ajaxify( el.attr( 'href' ) );\n\t\t\tel.parents( '.em_bookings_events_table' ).find( '.table-wrap' ).first().append( '<div id=\"em-loading\" />' );\n\t\t\t$.get( url, function ( data ) {\n\t\t\t\tel.parents( '.em_bookings_events_table' ).first().replaceWith( data );\n\t\t\t} );\n\t\t\treturn false;\n\t\t} );\n\t}\n\n\t//Manual Booking\n\t$( document ).on( 'click', 'a.em-booking-button', function ( e ) {\n\t\te.preventDefault();\n\t\tlet button = $( this );\n\t\tif ( button.text() != EM.bb_booked && $( this ).text() != EM.bb_booking ) {\n\t\t\tbutton.text( EM.bb_booking );\n\t\t\tlet button_data = button.attr( 'id' ).split( '_' );\n\t\t\t$.ajax( {\n\t\t\t\turl: EM.ajaxurl,\n\t\t\t\tdataType: 'jsonp',\n\t\t\t\tdata: {\n\t\t\t\t\tevent_id: button_data[ 1 ],\n\t\t\t\t\t_wpnonce: button_data[ 2 ],\n\t\t\t\t\taction: 'booking_add_one',\n\t\t\t\t},\n\t\t\t\tsuccess: function ( response, statusText, xhr, $form ) {\n\t\t\t\t\tif ( response.result ) {\n\t\t\t\t\t\tbutton.text( EM.bb_booked );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbutton.text( EM.bb_error );\n\t\t\t\t\t}\n\t\t\t\t\tif ( response.message != '' ) alert( response.message );\n\t\t\t\t\t$( document ).triggerHandler( 'em_booking_button_response', [ response, button ] );\n\t\t\t\t},\n\t\t\t\terror: function () {\n\t\t\t\t\tbutton.text( EM.bb_error );\n\t\t\t\t},\n\t\t\t} );\n\t\t}\n\t\treturn false;\n\t} );\n\t$( document ).on( 'click', 'a.em-cancel-button', function ( e ) {\n\t\te.preventDefault();\n\t\tlet button = $( this );\n\t\tif ( button.text() != EM.bb_cancelled && button.text() != EM.bb_canceling ) {\n\t\t\tbutton.text( EM.bb_canceling );\n\t\t\tlet button_data = button.attr( 'id' ).split( '_' );\n\t\t\t$.ajax( {\n\t\t\t\turl: EM.ajaxurl,\n\t\t\t\tdataType: 'jsonp',\n\t\t\t\tdata: {\n\t\t\t\t\tbooking_id: button_data[ 1 ],\n\t\t\t\t\t_wpnonce: button_data[ 2 ],\n\t\t\t\t\taction: 'booking_cancel',\n\t\t\t\t},\n\t\t\t\tsuccess: function ( response, statusText, xhr, $form ) {\n\t\t\t\t\tif ( response.result ) {\n\t\t\t\t\t\tbutton.text( EM.bb_cancelled );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbutton.text( EM.bb_cancel_error );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function () {\n\t\t\t\t\tbutton.text( EM.bb_cancel_error );\n\t\t\t\t},\n\t\t\t} );\n\t\t}\n\t\treturn false;\n\t} );\n\n\tif ( load_ui_css ) em_load_jquery_css();\n\n\t//previously in em-admin.php\n\tfunction updateIntervalDescriptor() {\n\t\t$( '.interval-desc' ).hide();\n\t\tlet number = '-plural';\n\t\tif ( $( 'input#recurrence-interval' ).val() == 1 || $( 'input#recurrence-interval' ).val() == '' )\n\t\t\tnumber = '-singular';\n\t\tlet descriptor = 'span#interval-' + $( 'select#recurrence-frequency' ).val() + number;\n\t\t$( descriptor ).show();\n\t}\n\tfunction updateIntervalSelectors() {\n\t\t$( 'p.alternate-selector' ).hide();\n\t\t$( 'p#' + $( 'select#recurrence-frequency' ).val() + '-selector' ).show();\n\t}\n\tfunction updateShowHideRecurrence() {\n\t\tif ( $( 'input#event-recurrence' ).is( ':checked' ) ) {\n\t\t\t$( '#event_recurrence_pattern' ).fadeIn();\n\t\t\t$( '#event-date-explanation' ).hide();\n\t\t\t$( '#recurrence-dates-explanation' ).show();\n\t\t\t$( 'h3#recurrence-dates-title' ).show();\n\t\t\t$( 'h3#event-date-title' ).hide();\n\t\t} else {\n\t\t\t$( '#event_recurrence_pattern' ).hide();\n\t\t\t$( '#recurrence-dates-explanation' ).hide();\n\t\t\t$( '#event-date-explanation' ).show();\n\t\t\t$( 'h3#recurrence-dates-title' ).hide();\n\t\t\t$( 'h3#event-date-title' ).show();\n\t\t}\n\t}\n\t$( '#recurrence-dates-explanation' ).hide();\n\t$( '#date-to-submit' ).hide();\n\t$( '#end-date-to-submit' ).hide();\n\n\t$( '#localised-date' ).show();\n\t$( '#localised-end-date' ).show();\n\n\t$( '#em-wrapper input.select-all' ).on( 'change', function () {\n\t\tif ( $( this ).is( ':checked' ) ) {\n\t\t\t$( 'input.row-selector' ).prop( 'checked', true );\n\t\t\t$( 'input.select-all' ).prop( 'checked', true );\n\t\t} else {\n\t\t\t$( 'input.row-selector' ).prop( 'checked', false );\n\t\t\t$( 'input.select-all' ).prop( 'checked', false );\n\t\t}\n\t} );\n\n\tupdateIntervalDescriptor();\n\tupdateIntervalSelectors();\n\tupdateShowHideRecurrence();\n\t$( 'input#event-recurrence' ).on( 'change', updateShowHideRecurrence );\n\n\t// recurrency elements\n\t$( 'input#recurrence-interval' ).on( 'keyup', updateIntervalDescriptor );\n\t$( 'select#recurrence-frequency' ).on( 'change', updateIntervalDescriptor );\n\t$( 'select#recurrence-frequency' ).on( 'change', updateIntervalSelectors );\n\n\t/* Location Type Selection */\n\t$( '.em-location-types .em-location-types-select' )\n\t\t.on( 'change', function () {\n\t\t\tlet el = $( this );\n\t\t\tif ( el.val() == 0 ) {\n\t\t\t\t$( '.em-location-type' ).hide();\n\t\t\t} else {\n\t\t\t\tlet location_type = el.find( 'option:selected' ).data( 'display-class' );\n\t\t\t\t$( '.em-location-type' ).hide();\n\t\t\t\t$( '.em-location-type.' + location_type ).show();\n\t\t\t\tif ( location_type != 'em-location-type-place' ) {\n\t\t\t\t\tjQuery( '#em-location-reset a' ).trigger( 'click' );\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ( el.data( 'active' ) !== '' && el.val() !== el.data( 'active' ) ) {\n\t\t\t\t$( '.em-location-type-delete-active-alert' ).hide();\n\t\t\t\t$( '.em-location-type-delete-active-alert' ).show();\n\t\t\t} else {\n\t\t\t\t$( '.em-location-type-delete-active-alert' ).hide();\n\t\t\t}\n\t\t} )\n\t\t.trigger( 'change' );\n\n\t//Finally, add autocomplete here\n\t//Autocomplete\n\tif ( jQuery( 'div.em-location-data input#location-name' ).length > 0 ) {\n\t\tjQuery( 'div.em-location-data input#location-name' )\n\t\t\t.autocomplete( {\n\t\t\t\tsource: EM.locationajaxurl,\n\t\t\t\tminLength: 2,\n\t\t\t\tfocus: function ( event, ui ) {\n\t\t\t\t\tjQuery( 'input#location-id' ).val( ui.item.value );\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\tselect: function ( event, ui ) {\n\t\t\t\t\tjQuery( 'input#location-id' ).val( ui.item.id ).trigger( 'change' );\n\t\t\t\t\tjQuery( 'input#location-name' ).val( ui.item.value );\n\t\t\t\t\tjQuery( 'input#location-address' ).val( ui.item.address );\n\t\t\t\t\tjQuery( 'input#location-town' ).val( ui.item.town );\n\t\t\t\t\tjQuery( 'input#location-state' ).val( ui.item.state );\n\t\t\t\t\tjQuery( 'input#location-region' ).val( ui.item.region );\n\t\t\t\t\tjQuery( 'input#location-postcode' ).val( ui.item.postcode );\n\t\t\t\t\tjQuery( 'input#location-latitude' ).val( ui.item.latitude );\n\t\t\t\t\tjQuery( 'input#location-longitude' ).val( ui.item.longitude );\n\t\t\t\t\tif ( ui.item.country == '' ) {\n\t\t\t\t\t\tjQuery( 'select#location-country option:selected' ).removeAttr( 'selected' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tjQuery( 'select#location-country option[value=\"' + ui.item.country + '\"]' ).attr(\n\t\t\t\t\t\t\t'selected',\n\t\t\t\t\t\t\t'selected'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tjQuery( 'div.em-location-data input' ).css( 'background-color', '#ccc' ).prop( 'readonly', true );\n\t\t\t\t\tjQuery( 'div.em-location-data select' )\n\t\t\t\t\t\t.css( 'background-color', '#ccc' )\n\t\t\t\t\t\t.css( 'color', '#666666' )\n\t\t\t\t\t\t.prop( 'disabled', true );\n\t\t\t\t\tjQuery( '#em-location-reset' ).show();\n\t\t\t\t\tjQuery( '#em-location-search-tip' ).hide();\n\t\t\t\t\tjQuery( document ).triggerHandler( 'em_locations_autocomplete_selected', [ event, ui ] );\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t} )\n\t\t\t.data( 'ui-autocomplete' )._renderItem = function ( ul, item ) {\n\t\t\tlet html_val =\n\t\t\t\t'<a>' +\n\t\t\t\tem_esc_attr( item.label ) +\n\t\t\t\t'<br><span style=\"font-size:11px\"><em>' +\n\t\t\t\tem_esc_attr( item.address ) +\n\t\t\t\t', ' +\n\t\t\t\tem_esc_attr( item.town ) +\n\t\t\t\t'</em></span></a>';\n\t\t\treturn jQuery( '<li></li>' ).data( 'item.autocomplete', item ).append( html_val ).appendTo( ul );\n\t\t};\n\t\tjQuery( '#em-location-reset a' ).on( 'click', function () {\n\t\t\tjQuery( 'div.em-location-data input' ).val( '' ).prop( 'readonly', false );\n\t\t\tjQuery( 'div.em-location-data select' ).prop( 'disabled', false );\n\t\t\tjQuery( 'div.em-location-data option:selected' ).removeAttr( 'selected' );\n\t\t\tjQuery( 'input#location-id' ).val( '' );\n\t\t\tjQuery( '#em-location-reset' ).hide();\n\t\t\tjQuery( '#em-location-search-tip' ).show();\n\t\t\tjQuery( '#em-map' ).hide();\n\t\t\tjQuery( '#em-map-404' ).show();\n\t\t\tif ( typeof marker !== 'undefined' ) {\n\t\t\t\tmarker.setPosition( new google.maps.LatLng( 0, 0 ) );\n\t\t\t\tinfoWindow.close();\n\t\t\t\tmarker.setDraggable( true );\n\t\t\t}\n\t\t\treturn false;\n\t\t} );\n\t\tif ( jQuery( 'input#location-id' ).val() != '0' && jQuery( 'input#location-id' ).val() != '' ) {\n\t\t\tjQuery( 'div.em-location-data input' ).prop( 'readonly', true );\n\t\t\tjQuery( 'div.em-location-data select' ).prop( 'disabled', true );\n\t\t\tjQuery( '#em-location-reset' ).show();\n\t\t\tjQuery( '#em-location-search-tip' ).hide();\n\t\t}\n\t}\n\t/* Local JS Timezone related placeholders */\n\t/* Moment JS Timzeone PH */\n\tif ( window.moment ) {\n\t\tlet replace_specials = function ( day, string ) {\n\t\t\t// replace things not supported by moment\n\t\t\tstring = string.replace( /##T/g, Intl.DateTimeFormat().resolvedOptions().timeZone );\n\t\t\tstring = string.replace( /#T/g, 'GMT' + day.format( 'Z' ) );\n\t\t\tstring = string.replace( /###t/g, day.utcOffset() * -60 );\n\t\t\tstring = string.replace( /##t/g, day.isDST() );\n\t\t\tstring = string.replace( /#t/g, day.daysInMonth() );\n\t\t\treturn string;\n\t\t};\n\t\t$( '.em-date-momentjs' ).each( function () {\n\t\t\t// Start Date\n\t\t\tlet el = $( this );\n\t\t\tlet day_start = moment.unix( el.data( 'date-start' ) );\n\t\t\tlet date_start_string = replace_specials( day_start, day_start.format( el.data( 'date-format' ) ) );\n\t\t\tif ( el.data( 'date-start' ) !== el.data( 'date-end' ) ) {\n\t\t\t\t// End Date\n\t\t\t\tlet day_end = moment.unix( el.data( 'date-end' ) );\n\t\t\t\tlet day_end_string = replace_specials( day_start, day_end.format( el.data( 'date-format' ) ) );\n\t\t\t\t// Output\n\t\t\t\tlet date_string = date_start_string + el.data( 'date-separator' ) + day_end_string;\n\t\t\t} else {\n\t\t\t\tlet date_string = date_start_string;\n\t\t\t}\n\t\t\tel.text( date_string );\n\t\t} );\n\t\tlet get_date_string = function ( ts, format ) {\n\t\t\tlet date = new Date( ts * 1000 );\n\t\t\tlet minutes = date.getMinutes();\n\t\t\tif ( format == 24 ) {\n\t\t\t\tlet hours = date.getHours();\n\t\t\t\thours = hours < 10 ? '0' + hours : hours;\n\t\t\t\tminutes = minutes < 10 ? '0' + minutes : minutes;\n\t\t\t\treturn hours + ':' + minutes;\n\t\t\t} else {\n\t\t\t\tlet hours = date.getHours() % 12;\n\t\t\t\tlet ampm = hours >= 12 ? 'PM' : 'AM';\n\t\t\t\tif ( hours === 0 ) hours = 12; // the hour '0' should be '12'\n\t\t\t\tminutes = minutes < 10 ? '0' + minutes : minutes;\n\t\t\t\treturn hours + ':' + minutes + ' ' + ampm;\n\t\t\t}\n\t\t};\n\t\t$( '.em-time-localjs' ).each( function () {\n\t\t\tlet el = $( this );\n\t\t\tlet strTime = get_date_string( el.data( 'time' ), el.data( 'time-format' ) );\n\t\t\tif ( el.data( 'time-end' ) ) {\n\t\t\t\tlet separator = el.data( 'time-separator' ) ? el.data( 'time-separator' ) : ' - ';\n\t\t\t\tstrTime = strTime + separator + get_date_string( el.data( 'time-end' ), el.data( 'time-format' ) );\n\t\t\t}\n\t\t\tel.text( strTime );\n\t\t} );\n\t}\n\t/* Done! */\n\tjQuery( document ).triggerHandler( 'em_javascript_loaded' );\n} );\n\nfunction em_load_jquery_css() {\n\tif ( EM.ui_css && jQuery( 'link#jquery-ui-css' ).length == 0 ) {\n\t\tlet script = document.createElement( 'link' );\n\t\tscript.id = 'jquery-ui-css';\n\t\tscript.rel = 'stylesheet';\n\t\tscript.href = EM.ui_css;\n\t\tdocument.body.appendChild( script );\n\t}\n}\n\n/* Useful function for adding the em_ajax flag to a url, regardless of querystring format */\nlet em_ajaxify = function ( url ) {\n\tif ( url.search( 'em_ajax=0' ) != -1 ) {\n\t\turl = url.replace( 'em_ajax=0', 'em_ajax=1' );\n\t} else if ( url.search( /\\?/ ) != -1 ) {\n\t\turl = url + '&em_ajax=1';\n\t} else {\n\t\turl = url + '?em_ajax=1';\n\t}\n\treturn url;\n};\n\nfunction em_esc_attr( str ) {\n\tif ( typeof str !== 'string' ) return '';\n\treturn str.replace( /</gi, '&lt;' ).replace( />/gi, '&gt;' );\n}\n\n// TODO: Put this in extra file\nlet EventsManager = {\n\tinit: () => {\n\t\tEventsManager.autofillDate();\n\t\tEventsManager.autofillTime();\n\t\tEventsManager.lockTime();\n\t},\n\n\tgetElementByName: ( element ) => {\n\t\tlet elements = document.getElementsByName( element );\n\t\tif ( elements.length ) {\n\t\t\treturn elements[ 0 ];\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\n\tautofillDate: () => {\n\t\tconst dateStartSelector = EventsManager.getElementByName( 'event_start_date' );\n\t\tconst dateEndSelector = EventsManager.getElementByName( 'event_end_date' );\n\t\tif ( dateStartSelector && dateEndSelector ) {\n\t\t\tdateStartSelector.addEventListener( 'change', ( event ) => {\n\t\t\t\tif ( dateEndSelector.value == '' ) {\n\t\t\t\t\tdateEndSelector.value = dateStartSelector.value;\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t},\n\n\tautofillTime: () => {\n\t\tconst timeStartSelector = EventsManager.getElementByName( 'event_start_time' );\n\t\tconst timeEndSelector = EventsManager.getElementByName( 'event_end_time' );\n\t\tif ( timeStartSelector && timeEndSelector ) {\n\t\t\ttimeStartSelector.addEventListener( 'change', ( event ) => {\n\t\t\t\tif ( timeEndSelector.value == '00:00' ) {\n\t\t\t\t\ttimeEndSelector.value = timeStartSelector.value;\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t},\n\n\tlockTime: () => {\n\t\tconst allDaySelector = EventsManager.getElementByName( 'event_all_day' );\n\t\tconst timeStartSelector = EventsManager.getElementByName( 'event_start_time' );\n\t\tconst timeEndSelector = EventsManager.getElementByName( 'event_end_time' );\n\t\tif ( allDaySelector ) {\n\t\t\tallDaySelector.addEventListener( 'change', ( event ) => {\n\t\t\t\ttimeStartSelector.disabled = allDaySelector.checked;\n\t\t\t\ttimeEndSelector.disabled = allDaySelector.checked;\n\t\t\t} );\n\t\t}\n\t},\n};\n\ndocument.addEventListener( 'DOMContentLoaded', EventsManager.init, false );\n\nfunction em_custom_mails() {\n\tlet trigger_selector = document.querySelectorAll( '.em-nav-item' );\n\tif ( trigger_selector.length == 0 ) return;\n\tif ( trigger_selector.length == 1 ) {\n\t\tdocument.querySelector( '.em-nav-side' )?.classList.add( 'hidden' );\n\t\tdocument.querySelector( '.em-nav-content' )?.classList.remove( 'hidden' );\n\t\treturn;\n\t}\n\n\t//add listener to triggers for groups and subgroups\n\ttrigger_selector.forEach( ( element ) => {\n\t\telement.addEventListener( 'click', ( event ) => {\n\t\t\ttrigger_selector.forEach( ( item ) => {\n\t\t\t\titem.classList.remove( 'active' );\n\t\t\t} );\n\t\t\tdocument.querySelectorAll( '.em-nav-content' )?.forEach( ( e ) => {\n\t\t\t\te.classList.add( 'hidden' );\n\t\t\t} );\n\t\t\tevent.target.classList.add( 'active' );\n\t\t\tdocument.querySelector( element.getAttribute( 'rel' ) )?.classList.remove( 'hidden' );\n\t\t} );\n\t} );\n\n\tlet accordion_items = document.querySelectorAll( '.em-accordion-item' );\n\n\taccordion_items.forEach( ( element ) => {\n\t\telement.addEventListener( 'click', ( event ) => {\n\t\t\taccordion_items.forEach( ( item ) => {\n\t\t\t\titem.classList.remove( 'active' );\n\t\t\t} );\n\t\t\tdocument.querySelectorAll( '.em-accordion-content' )?.forEach( ( e ) => {\n\t\t\t\te.classList.add( 'hidden' );\n\t\t\t} );\n\t\t\tevent.target.classList.add( 'active' );\n\t\t\tdocument.getElementById( element.getAttribute( 'rel' ) )?.classList.remove( 'hidden' );\n\t\t} );\n\t} );\n\n\tlet mail_subgroups = document.querySelectorAll( '.em-subgroup-email' );\n\n\tmail_subgroups.forEach( ( element ) => {\n\t\tlet selector = element.querySelector( '.em-cet-status' );\n\t\tlet content = element.querySelector( '.em-mail-vals' );\n\t\tlet indicator = element.querySelector( '.em-mail-status-indicator' );\n\n\t\tselector.addEventListener( 'change', ( event ) => {\n\t\t\tindicator?.setAttribute( 'data-status', event.target.value );\n\t\t\tif ( event.target.value == 1 ) {\n\t\t\t\tcontent.classList.remove( 'hidden' );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcontent.classList.add( 'hidden' );\n\t\t} );\n\t} );\n\n\tdocument.getElementById( 'booking-modal-close' )?.addEventListener( 'click', ( event ) => {\n\t\tlet element = document.getElementById( 'booking-modal' );\n\t\telement.style.display = 'none';\n\t} );\n\n\tdocument.getElementById( 'email-modal-close' )?.addEventListener( 'click', ( event ) => {\n\t\tlet element = document.getElementById( 'email-modal' );\n\t\telement.style.display = 'none';\n\t} );\n}\n\ndocument.addEventListener( 'DOMContentLoaded', em_custom_mails, false );\n\ndocument.addEventListener( 'DOMContentLoaded', () => {\n\tdocument.body.addEventListener( 'click', ( event ) => {\n\t\tif ( event.target.classList.contains( 'em-bookings-approve-offline' ) && ! confirm( EM.offline_confirm ) ) {\n\t\t\tevent.stopPropagation();\n\t\t\tevent.stopImmediatePropagation();\n\t\t\tevent.preventDefault();\n\t\t\treturn false;\n\t\t}\n\t} );\n\n\tdocument.body.addEventListener( 'click', ( event ) => {\n\t\tif ( event.target.classList.contains( 'em-transaction-delete' ) ) {\n\t\t\tconst el = event.target;\n\t\t\tif ( ! confirm( EM.transaction_delete ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst url = em_ajaxify( el.attr( 'href' ) );\n\t\t\tlet td = el.parents( 'td' ).first();\n\t\t\ttd.html( EM.txt_loading );\n\t\t\ttd.load( url );\n\t\t\treturn false;\n\t\t}\n\t} );\n} );\n"],"names":["jQuery","document","ready","$","load_ui_css","each","i","el","addClass","next","parent","off","on","e","preventDefault","closest","prepend","url","em_ajaxify","attr","load","trigger","confirm","window","location","href","is","find","hide","show","event","form","first","val","warning_text","EM","event_reschedule_warning","event_recurrence_bookings","event_recurrence_overwrite","confirmation","data","removeClass","siblings","length","checked","disable_bookings_warning","fadeIn","reset_ticket_forms","tickets","rowNo","slot","clone","appendTo","index","replace","datepicker","removeAttr","em_timepickerObj","em_timepicker","em_setup_datepicker","em_setup_timepicker","animate","scrollTop","offset","top","check_ticket_sortability","tbody","text","classname","triggerHandler","hasClass","toggleClass","show_advanced","value","getJSON","em_ajax_action","id","result","remove","alert","error","sortable","items","placeholder","handle","helper","tds","children","append","em_tickets","parents","match","pno","em_bookings_settings_dialog","modal","autoOpen","minWidth","height","buttons","bookings_settings_save","click","booking_form_cols","item_match","name","dialog","em_bookings_export_dialog","bookings_export_save","export_overlay_show_tickets","select_el","input_par","input_par_selected","connectWith","update","ui","item","disableSelection","post","ajaxurl","serializeArray","root","replaceWith","booking_delete","td","html","txt_loading","get","button","bb_booked","bb_booking","button_data","split","ajax","dataType","event_id","_wpnonce","action","success","response","statusText","xhr","$form","bb_error","message","bb_cancelled","bb_canceling","booking_id","bb_cancel_error","em_load_jquery_css","updateIntervalDescriptor","number","descriptor","updateIntervalSelectors","updateShowHideRecurrence","prop","location_type","autocomplete","source","locationajaxurl","minLength","focus","select","address","town","state","region","postcode","latitude","longitude","country","css","_renderItem","ul","html_val","em_esc_attr","label","marker","setPosition","google","maps","LatLng","infoWindow","close","setDraggable","moment","replace_specials","day","string","Intl","DateTimeFormat","resolvedOptions","timeZone","format","utcOffset","isDST","daysInMonth","day_start","unix","date_start_string","day_end","day_end_string","date_string","get_date_string","ts","date","Date","minutes","getMinutes","hours","getHours","ampm","strTime","separator","ui_css","script","createElement","rel","body","appendChild","search","str","EventsManager","init","autofillDate","autofillTime","lockTime","getElementByName","element","elements","getElementsByName","dateStartSelector","dateEndSelector","addEventListener","timeStartSelector","timeEndSelector","allDaySelector","disabled","em_custom_mails","trigger_selector","querySelectorAll","querySelector","classList","add","forEach","target","getAttribute","accordion_items","getElementById","mail_subgroups","selector","content","indicator","setAttribute","style","display","contains","offline_confirm","stopPropagation","stopImmediatePropagation","transaction_delete"],"sourceRoot":""}