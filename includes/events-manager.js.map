{"version":3,"file":"events-manager.js","mappings":"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","sources":["webpack:///./classes/events_manager.css?41d3","webpack:///webpack/bootstrap","webpack:///webpack/runtime/make namespace object","webpack:///./classes/events-manager.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport {};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import \"./events_manager.css\"\n\njQuery(document).ready( function($){\n\tlet load_ui_css = false; //load jquery ui css?\n\t/* Time Entry */\n\t$('#start-time').each(function(i, el){\n\t\t$(el).addClass('em-time-input em-time-start').next('#end-time').addClass('em-time-input em-time-end').parent().addClass('em-time-range');\n\t});\n\t\n\t/* Calendar AJAX */\n\t$('.em-calendar-wrapper a').off(\"click\");\n\t$('.em-calendar-wrapper').on('click', 'a.em-calnav, a.em-calnav', function(e){\n\t\te.preventDefault();\n\t\t$(this).closest('.em-calendar-wrapper').prepend('<div class=\"loading\" id=\"em-loading\"></div>');\n\t\tlet url = em_ajaxify($(this).attr('href'));\n\t\t$(this).closest('.em-calendar-wrapper').load(url, function(){$(this).trigger('em_calendar_load');});\n\t} );\n\n\t\t\n\t/*\n\t * ADMIN AREA AND PUBLIC FORMS (Still polishing this section up, note that form ids and classes may change accordingly)\n\t */\n\t//Events List\n\t\t//Approve/Reject Links\n\t\t$('.events-table').on('click', '.em-event-delete', function(){\n\t\t\tif( !confirm(\"Are you sure you want to delete?\") ){ return false; }\n\t\t\twindow.location.href = this.href;\n\t\t});\n\t//Forms\n\t$('#event-form #event-image-delete, #location-form #location-image-delete').on('click', function(){\n\t\tlet el = $(this);\n\t\tif( el.is(':checked') ){\n\t\t\tel.closest('.event-form-image, .location-form-image').find('#event-image-img, #location-image-img').hide();\n\t\t}else{\n\t\t\tel.closest('.event-form-image, .location-form-image').find('#event-image-img, #location-image-img').show();\n\t\t}\n\t});\n\t//Event Editor \n\t\t//Recurrence Warnings\n\t\t$('#event-form.em-event-admin-recurring').on('submit', function(event){\n\t\t\tlet form = $(this);\n\t\t\tif( form.find('input[name=\"event_reschedule\"]').first().val() == 1 ){\n\t\t\t\tlet warning_text = EM.event_reschedule_warning;\n\t\t\t}else if( form.find('input[name=\"event_recreate_tickets\"]').first().val() == 1 ){\n\t\t\t\tlet warning_text = EM.event_recurrence_bookings;\n\t\t\t}else{\n\t\t\t\tlet warning_text = EM.event_recurrence_overwrite;\n\t\t\t}\n\t\t\tlet confirmation = confirm(warning_text);\n\t\t\tif( confirmation == false ){\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t});\n\t\t//Buttons for recurrence warnings within event editor forms\n\t\t$('.em-reschedule-trigger').on('click', function(e){\n\t\t\te.preventDefault();\n\t\t\tlet trigger = $(this);\n\t\t\ttrigger.closest('.em-recurrence-reschedule').find(trigger.data('target')).removeClass('reschedule-hidden');\n\t\t\ttrigger.siblings('.em-reschedule-value').val(1);\n\t\t\ttrigger.addClass('reschedule-hidden').siblings('a').removeClass('reschedule-hidden');\n\t\t});\n\t\t$('.em-reschedule-cancel').on('click', function(e){\n\t\t\te.preventDefault();\n\t\t\tlet trigger = $(this);\n\t\t\ttrigger.closest('.em-recurrence-reschedule').find(trigger.data('target')).addClass('reschedule-hidden');\n\t\t\ttrigger.siblings('.em-reschedule-value').val(0);\n\t\t\ttrigger.addClass('reschedule-hidden').siblings('a').removeClass('reschedule-hidden');\n\t\t});\n\t//Tickets & Bookings\n\tif( $(\"#em-tickets-form\").length > 0 ){\n\t\t//Enable/Disable Bookings\n\t\t$('#event-rsvp').on('click', function(event){\n\t\t\tif( !this.checked ){\n\t\t\t\tlet confirmation = confirm(EM.disable_bookings_warning);\n\t\t\t\tif( confirmation == false ){\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}else{\n\t\t\t\t\t$('#event-rsvp-options').hide();\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\t$('#event-rsvp-options').fadeIn();\n\t\t\t}\n\t\t});\n\t\tif($('input#event-rsvp').is(\":checked\")) {\n\t\t\t$(\"div#rsvp-data\").fadeIn();\n\t\t} else {\n\t\t\t$(\"div#rsvp-data\").hide();\n\t\t}\n\t\t//Ticket(s) UI\n\t\tlet reset_ticket_forms = function(){\n\t\t\t$('#em-tickets-form table tbody tr.em-tickets-row').show();\n\t\t\t$('#em-tickets-form table tbody tr.em-tickets-row-form').hide();\n\t\t};\n\t\t//recurrences and cut-off logic for ticket availability\n\t\tif( $('#em-recurrence-checkbox').length > 0 ){\n\t\t\t$('#em-recurrence-checkbox').on('change', function(){\n\t\t\t\tif( $('#em-recurrence-checkbox').is(':checked') ){\n\t\t\t\t\t$('#em-tickets-form .ticket-dates-from-recurring, #em-tickets-form .ticket-dates-to-recurring, #event-rsvp-options .em-booking-date-recurring').show();\n\t\t\t\t\t$('#em-tickets-form .ticket-dates-from-normal, #em-tickets-form .ticket-dates-to-normal, #event-rsvp-options .em-booking-date-normal, #em-tickets-form .hidden').hide();\n\t\t\t\t}else{\n\t\t\t\t\t$('#em-tickets-form .ticket-dates-from-normal, #em-tickets-form .ticket-dates-to-normal, #event-rsvp-options .em-booking-date-normal').show();\n\t\t\t\t\t$('#em-tickets-form .ticket-dates-from-recurring, #em-tickets-form .ticket-dates-to-recurring, #event-rsvp-options .em-booking-date-recurring, #em-tickets-form .hidden').hide();\n\t\t\t\t}\n\t\t\t}).trigger('change');\n\t\t}else if( $('#em-form-recurrence').length > 0 ){\n\t\t\t$('#em-tickets-form .ticket-dates-from-recurring, #em-tickets-form .ticket-dates-to-recurring, #event-rsvp-options .em-booking-date-recurring').show();\n\t\t\t$('#em-tickets-form .ticket-dates-from-normal, #em-tickets-form .ticket-dates-to-normal, #event-rsvp-options .em-booking-date-normal, #em-tickets-form .hidden').hide();\n\t\t}else{\n\t\t\t$('#em-tickets-form .ticket-dates-from-recurring, #em-tickets-form .ticket-dates-to-recurring, #event-rsvp-options .em-booking-date-recurring, #em-tickets-form .hidden').hide();\n\t\t}\n\t\t//Add a new ticket\n\t\t$(\"#em-tickets-add\").on('click', function(e){\n\t\t\te.preventDefault();\n\t\t\treset_ticket_forms();\n\t\t\t//create copy of template slot, insert so ready for population\n\t\t\tlet tickets = $('#em-tickets-form table tbody');\n\t\t\tlet rowNo = tickets.length+1;\n\t\t\tlet slot = tickets.first('.em-ticket-template').clone(true).attr('id','em-ticket-'+ rowNo).removeClass('em-ticket-template').addClass('em-ticket').appendTo($('#em-tickets-form table'));\n\t\t\t//change the index of the form element names\n\t\t\tslot.find('*[name]').each( function(index,el){\n\t\t\t\tel = $(el);\n\t\t\t\tel.attr('name', el.attr('name').replace('em_tickets[0]','em_tickets['+rowNo+']'));\n\t\t\t});\n\t\t\t//show ticket and switch to editor\n\t\t\tslot.show().find('.ticket-actions-edit').trigger('click');\n\t\t\t//refresh datepicker and values\n\t\t\tslot.find('.em-date-input-loc').datepicker('destroy').removeAttr('id'); //clear all datepickers\n\t\t\tslot.find('.em-time-input').off().each(function(index, el){\n\t\t\t\tif( typeof this.em_timepickerObj == 'object' ){\n\t\t\t\t\tthis.em_timepicker('remove');\n\t\t\t\t}\n\t\t\t}); //clear all em_timepickers - consequently, also other click/blur/change events, recreate the further down\n\t\t\tem_setup_datepicker(slot);\n\t\t\tem_setup_timepicker(slot);\n\t\t    $('html, body').animate({ scrollTop: slot.offset().top - 30 }); //sends user to form\n\t\t\tcheck_ticket_sortability();\n\t\t});\n\t\t//Edit a Ticket\n\t\t$(document).on('click', '.ticket-actions-edit', function(e){\n\t\t\te.preventDefault();\n\t\t\treset_ticket_forms();\n\t\t\tlet tbody = $(this).closest('tbody');\n\t\t\ttbody.find('tr.em-tickets-row').hide();\n\t\t\ttbody.find('tr.em-tickets-row-form').fadeIn();\n\t\t\treturn false;\n\t\t});\n\t\t$(document).on('click', '.ticket-actions-edited', function(e){\n\t\t\te.preventDefault();\n\t\t\tlet tbody = $(this).closest('tbody');\n\t\t\tlet rowNo = tbody.attr('id').replace('em-ticket-','');\n\t\t\ttbody.find('.em-tickets-row').fadeIn();\n\t\t\ttbody.find('.em-tickets-row-form').hide();\n\t\t\ttbody.find('*[name]').each(function(index,el){\n\t\t\t\tel = $(el);\n\t\t\t\tif( el.attr('name') == 'ticket_start_pub'){\n\t\t\t\t\ttbody.find('span.ticket_start').text(el.val());\n\t\t\t\t}else if( el.attr('name') == 'ticket_end_pub' ){\n\t\t\t\t\ttbody.find('span.ticket_end').text(el.val());\n\t\t\t\t}else if( el.attr('name') == 'em_tickets['+rowNo+'][ticket_type]' ){\n\t\t\t\t\tif( el.find(':selected').val() == 'members' ){\n\t\t\t\t\t\ttbody.find('span.ticket_name').prepend('* ');\n\t\t\t\t\t}\n\t\t\t\t}else if( el.attr('name') == 'em_tickets['+rowNo+'][ticket_start_recurring_days]' ){\n\t\t\t\t\tlet text = tbody.find('select.ticket-dates-from-recurring-when').val() == 'before' ? '-'+el.val():el.val();\n\t\t\t\t\tif( el.val() != '' ){\n\t\t\t\t\t\ttbody.find('span.ticket_start_recurring_days').text(text);\n\t\t\t\t\t\ttbody.find('span.ticket_start_recurring_days_text, span.ticket_start_time').removeClass('hidden').show();\n\t\t\t\t\t}else{\n\t\t\t\t\t\ttbody.find('span.ticket_start_recurring_days').text(' - ');\n\t\t\t\t\t\ttbody.find('span.ticket_start_recurring_days_text, span.ticket_start_time').removeClass('hidden').hide();\n\t\t\t\t\t}\n\t\t\t\t}else if( el.attr('name') == 'em_tickets['+rowNo+'][ticket_end_recurring_days]' ){\n\t\t\t\t\tlet text = tbody.find('select.ticket-dates-to-recurring-when').val() == 'before' ? '-'+el.val():el.val();\n\t\t\t\t\tif( el.val() != '' ){\n\t\t\t\t\t\ttbody.find('span.ticket_end_recurring_days').text(text);\n\t\t\t\t\t\ttbody.find('span.ticket_end_recurring_days_text, span.ticket_end_time').removeClass('hidden').show();\n\t\t\t\t\t}else{\n\t\t\t\t\t\ttbody.find('span.ticket_end_recurring_days').text(' - ');\n\t\t\t\t\t\ttbody.find('span.ticket_end_recurring_days_text, span.ticket_end_time').removeClass('hidden').hide();\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tlet classname = el.attr('name').replace('em_tickets['+rowNo+'][','').replace(']','').replace('[]','');\n\t\t\t\t\ttbody.find('.em-tickets-row .'+classname).text(el.val());\n\t\t\t\t}\n\t\t\t});\n\t\t\t//allow for others to hook into this\n\t\t\t$(document).triggerHandler('em_maps_tickets_edit', [tbody, rowNo, true]);\n\t\t    $('html, body').animate({ scrollTop: tbody.parent().offset().top - 30 }); //sends user back to top of form\n\t\t\treturn false;\n\t\t});\n\t\t$(document).on('change', '.em-ticket-form select.ticket_type', function(e){\n\t\t\t//check if ticket is for all users or members, if members, show roles to limit the ticket to\n\t\t\tlet el = $(this);\n\t\t\tif( el.find('option:selected').val() == 'members' ){\n\t\t\t\tel.closest('.em-ticket-form').find('.ticket-roles').fadeIn();\n\t\t\t}else{\n\t\t\t\tel.closest('.em-ticket-form').find('.ticket-roles').hide();\n\t\t\t}\n\t\t});\n\t\t$(document).on('click', '.em-ticket-form .ticket-options-advanced', function(e){\n\t\t\t//show or hide advanced tickets, hidden by default\n\t\t\te.preventDefault();\n\t\t\tlet el = $(this);\n\t\t\tif( el.hasClass('show') ){\n\t\t\t\tel.closest('.em-ticket-form').find('.em-ticket-form-advanced').fadeIn();\n\t\t\t\tel.find('.show,.show-advanced').hide();\n\t\t\t\tel.find('.hide,.hide-advanced').show();\n\t\t\t}else{\n\t\t\t\tel.closest('.em-ticket-form').find('.em-ticket-form-advanced').hide();\n\t\t\t\tel.find('.show,.show-advanced').show();\n\t\t\t\tel.find('.hide,.hide-advanced').hide();\n\t\t\t}\n\t\t\tel.toggleClass('show');\n\t\t});\n\t\t$('.em-ticket-form').each( function(){\n\t\t\t//check whether to show advanced options or not by default for each ticket\n\t\t\tlet show_advanced = false;\n\t\t\tlet el = $(this); \n\t\t\tel.find('.em-ticket-form-advanced input[type=\"text\"]').each(function(){ if(this.value != '') show_advanced = true; });\n\t\t\tif( el.find('.em-ticket-form-advanced input[type=\"checkbox\"]:checked').length > 0 ){ show_advanced = true; }\n\t\t\tel.find('.em-ticket-form-advanced option:selected').each(function(){ if(this.value != '') show_advanced = true; });\n\t\t\tif( show_advanced ) el.find('.ticket-options-advanced').trigger('click');\n\t\t});\n\t\t//Delete a ticket\n\t\t$(document).on('click', '.ticket-actions-delete', function(e){\n\t\t\te.preventDefault();\n\t\t\tlet el = $(this);\n\t\t\tlet tbody = el.closest('tbody');\n\t\t\tif( tbody.find('input.ticket_id').val() > 0 ){\n\t\t\t\t//only will happen if no bookings made\n\t\t\t\tel.text('Deleting...');\t\n\t\t\t\t$.getJSON( $(this).attr('href'), {'em_ajax_action':'delete_ticket', 'id':tbody.find('input.ticket_id').val()}, function(data){\n\t\t\t\t\tif(data.result){\n\t\t\t\t\t\ttbody.remove();\n\t\t\t\t\t}else{\n\t\t\t\t\t\tel.text('Delete');\n\t\t\t\t\t\talert(data.error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\t//not saved to db yet, so just remove\n\t\t\t\ttbody.remove();\n\t\t\t}\n\t\t\tcheck_ticket_sortability();\n\t\t\treturn false;\n\t\t});\n\t\t//Sort Tickets\n\t\t$('#em-tickets-form.em-tickets-sortable table').sortable({\n\t\t\titems: '> tbody',\n\t\t\tplaceholder: \"em-ticket-sortable-placeholder\",\n\t\t\thandle:'.ticket-status',\n\t\t\thelper: function( event, el ){\n\t\t\t\tlet helper = $(el).clone().addClass('em-ticket-sortable-helper');\n\t\t\t\tlet tds = helper.find('.em-tickets-row td').length;\n\t\t\t\thelper.children().remove();\n\t\t\t\thelper.append('<tr class=\"em-tickets-row\"><td colspan=\"'+tds+'\" style=\"text-align:left; padding-left:15px;\"><span class=\"dashicons dashicons-tickets-alt\"></span></td></tr>');\n\t\t\t\treturn helper;\n\t\t\t},\n\t\t});\n\t\tlet check_ticket_sortability = function(){\n\t\t\tlet em_tickets = $('#em-tickets-form table tbody.em-ticket');\n\t\t\tconsole.log(em_tickets)\n\t\t\tif( em_tickets.length == 1 ){\n\t\t\t\tem_tickets.find('.ticket-status').addClass('single');\n\t\t\t\t$('#em-tickets-form.em-tickets-sortable table').sortable( \"option\", \"disabled\", true );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tem_tickets.find('.ticket-status').removeClass('single');\n\t\t\t$('#em-tickets-form.em-tickets-sortable table').sortable( \"option\", \"disabled\", false );\n\t\t\t\n\t\t};\n\t\tcheck_ticket_sortability();\n\t}\n\t//Manageing Bookings\n\tif( $('#em-bookings-table').length > 0 ){\n\t\t//Pagination link clicks\n\t\t$(document).on('click', '#em-bookings-table .tablenav-pages a', function(){\n\t\t\tlet el = $(this);\n\t\t\tlet form = el.parents('#em-bookings-table form.bookings-filter');\n\t\t\t//get page no from url, change page, submit form\n\t\t\tlet match = el.attr('href').match(/#[0-9]+/);\n\t\t\tif( match != null && match.length > 0){\n\t\t\t\tlet pno = match[0].replace('#','');\n\t\t\t\tform.find('input[name=pno]').val(pno);\n\t\t\t}else{\n\t\t\t\tform.find('input[name=pno]').val(1);\n\t\t\t}\n\t\t\tform.trigger('submit');\n\t\t\treturn false;\n\t\t});\n\t\t//Overlay Options\n\t\tlet em_bookings_settings_dialog = {\n\t\t\tmodal : true,\n\t\t\tautoOpen: false,\n\t\t\tminWidth: 500,\n\t\t\theight: 'auto',\n\t\t\tbuttons: [{\n\t\t\t\ttext: EM.bookings_settings_save,\n\t\t\t\tclick: function(e){\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\t//we know we'll deal with cols, so wipe hidden value from main\n\t\t\t\t\tlet match = $(\"#em-bookings-table form.bookings-filter [name=cols]\").val('');\n\t\t\t\t\tlet booking_form_cols = $('form#em-bookings-table-settings-form input.em-bookings-col-item');\n\t\t\t\t\t$.each( booking_form_cols, function(i,item_match){\n\t\t\t\t\t\t//item_match = $(item_match);\n\t\t\t\t\t\tif( item_match.value == 1 ){\n\t\t\t\t\t\t\tif( match.val() != ''){\n\t\t\t\t\t\t\t\tmatch.val(match.val()+','+item_match.name);\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tmatch.val(item_match.name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t//submit main form\n\t\t\t\t\t$('#em-bookings-table-settings').trigger('submitted'); //hook into this with bind()\n\t\t\t\t\t$('#em-bookings-table form.bookings-filter').trigger('submit');\t\t\t\t\t\n\t\t\t\t\t$(this).dialog('close');\n\t\t\t\t}\n\t\t\t}]\n\t\t};\n\t\tlet em_bookings_export_dialog = {\n\t\t\tmodal : true,\n\t\t\tautoOpen: false,\n\t\t\tminWidth: 700,\n\t\t\theight: 'auto',\n\t\t\tbuttons: [{\n\t\t\t\ttext: EM.bookings_export_save,\n\t\t\t\tclick: function(e){\n\t\t\t\t\t$(this).children('form').trigger('submit');\n\t\t\t\t\t$(this).dialog('close');\n\t\t\t\t}\n\t\t\t}]\n\t\t};\n\t\tif( $(\"#em-bookings-table-settings\").length > 0 ){\n\t\t\t//Settings Overlay\n\t\t\t$(\"#em-bookings-table-settings\").dialog(em_bookings_settings_dialog);\n\t\t\t$(document).on('click', '#em-bookings-table-settings-trigger', function(e){ e.preventDefault(); $(\"#em-bookings-table-settings\").dialog('open'); });\n\t\t\t//Export Overlay\n\t\t\t$(\"#em-bookings-table-export\").dialog(em_bookings_export_dialog);\n\t\t\t$(document).on('click', '#em-bookings-table-export-trigger', function(e){ e.preventDefault(); $(\"#em-bookings-table-export\").dialog('open'); });\n\t\t\tlet export_overlay_show_tickets = function(){\n\t\t\t\tif( $('#em-bookings-table-export-form input[name=show_tickets]').is(':checked') ){\n\t\t\t\t\t$('#em-bookings-table-export-form .em-bookings-col-item-ticket').show();\n\t\t\t\t\t$('#em-bookings-table-export-form #em-bookings-export-cols-active .em-bookings-col-item-ticket input').val(1);\n\t\t\t\t}else{\n\t\t\t\t\t$('#em-bookings-table-export-form .em-bookings-col-item-ticket').hide().find('input').val(0);\t\t\t\t\t\n\t\t\t\t}\n\t\t\t};\n\t\t\t//Sync export overlay with table search field changes\n\t\t\t$('#em-bookings-table form select').each(function(i, el){\n\t\t\t\t$(el).on('change', function(e){\n\t\t\t\t\tlet select_el = $(this);\n\t\t\t\t\tlet input_par = $('#em-bookings-table-export-form input[name='+select_el.attr('name')+']');\n\t\t\t\t\tlet input_par_selected = select_el.find('option:selected');\n\t\t\t\t\tinput_par.val(input_par_selected.val());\n\t\t\t\t});\n\t\t\t});\n\t\t\t\n\t\t\texport_overlay_show_tickets();\n\t\t\t$('#em-bookings-table-export-form input[name=show_tickets]').on('click', export_overlay_show_tickets);\n\t\t\t//Sortables\n\t\t\t$( \".em-bookings-cols-sortable\" ).sortable({\n\t\t\t\tconnectWith: \".em-bookings-cols-sortable\",\n\t\t\t\tupdate: function(event, ui) {\n\t\t\t\t\tif( ui.item.parents('ul#em-bookings-cols-active, ul#em-bookings-export-cols-active').length > 0 ){\t\t\t\t\t\t\t\n\t\t\t\t\t\tui.item.addClass('ui-state-highlight').removeClass('ui-state-default').children('input').val(1);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tui.item.addClass('ui-state-default').removeClass('ui-state-highlight').children('input').val(0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}).disableSelection();\n\t\t\tload_ui_css = true;\n\t\t}\n\t\t//Widgets and filter submissions\n\t\t$(document).on('submit', '#em-bookings-table form.bookings-filter', function(e){\n\t\t\tlet el = $(this);\t\t\t\n\t\t\t//append loading spinner\n\t\t\tel.parents('#em-bookings-table').find('.table-wrap').first().append('<div id=\"em-loading\" />');\n\t\t\t//ajax call\n\t\t\t$.post( EM.ajaxurl, el.serializeArray(), function(data){\n\t\t\t\tlet root = el.parents('#em-bookings-table').first();\n\t\t\t\troot.replaceWith(data);\n\t\t\t\t//recreate overlays\n\t\t\t\t$('#em-bookings-table-export input[name=scope]').val(root.find('select[name=scope]').val());\n\t\t\t\t$('#em-bookings-table-export input[name=status]').val(root.find('select[name=status]').val());\n\t\t\t\tjQuery(document).triggerHandler('em_bookings_filtered', [data, root, el]);\n\t\t\t});\n\t\t\treturn false;\n\t\t});\n\t\t//Approve/Reject Links\n\t\t$(document).on('click', '.em-bookings-approve,.em-bookings-reject,.em-bookings-unapprove,.em-bookings-delete', function(){\n\t\t\tlet el = $(this); \n\t\t\tif( el.hasClass('em-bookings-delete') ){\n\t\t\t\tif( !confirm(EM.booking_delete) ){ return false; }\n\t\t\t}\n\t\t\tlet url = em_ajaxify( el.attr('href'));\t\t\n\t\t\tlet td = el.parents('td').first();\n\t\t\ttd.html(EM.txt_loading);\n\t\t\ttd.load( url );\n\t\t\treturn false;\n\t\t});\n\t}\n\t//Old Bookings Table - depreciating soon\n\tif( $('.em_bookings_events_table').length > 0 ){\n\t\t//Widgets and filter submissions\n\t\t$(document).on('submit', '.em_bookings_events_table form', function(e){\n\t\t\tlet el = $(this);\n\t\t\tlet url = em_ajaxify( el.attr('action') );\t\t\n\t\t\tel.parents('.em_bookings_events_table').find('.table-wrap').first().append('<div id=\"em-loading\" />');\n\t\t\t$.get( url, el.serializeArray(), function(data){\n\t\t\t\tel.parents('.em_bookings_events_table').first().replaceWith(data);\n\t\t\t});\n\t\t\treturn false;\n\t\t});\n\t\t//Pagination link clicks\n\t\t$(document).on('click', '.em_bookings_events_table .tablenav-pages a', function(){\n\t\t\tlet el = $(this);\n\t\t\tlet url = em_ajaxify( el.attr('href') );\t\n\t\t\tel.parents('.em_bookings_events_table').find('.table-wrap').first().append('<div id=\"em-loading\" />');\n\t\t\t$.get( url, function(data){\n\t\t\t\tel.parents('.em_bookings_events_table').first().replaceWith(data);\n\t\t\t});\n\t\t\treturn false;\n\t\t});\n\t}\n\t\n\t//Manual Booking\n\t$(document).on('click', 'a.em-booking-button', function(e){\n\t\te.preventDefault();\n\t\tlet button = $(this);\n\t\tif( button.text() != EM.bb_booked && $(this).text() != EM.bb_booking){\n\t\t\tbutton.text(EM.bb_booking);\n\t\t\tlet button_data = button.attr('id').split('_'); \n\t\t\t$.ajax({\n\t\t\t\turl: EM.ajaxurl,\n\t\t\t\tdataType: 'jsonp',\n\t\t\t\tdata: {\n\t\t\t\t\tevent_id : button_data[1],\n\t\t\t\t\t_wpnonce : button_data[2],\n\t\t\t\t\taction : 'booking_add_one'\n\t\t\t\t},\n\t\t\t\tsuccess : function(response, statusText, xhr, $form) {\n\t\t\t\t\tif(response.result){\n\t\t\t\t\t\tbutton.text(EM.bb_booked);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tbutton.text(EM.bb_error);\n\t\t\t\t\t}\n\t\t\t\t\tif(response.message != '') alert(response.message);\n\t\t\t\t\t$(document).triggerHandler('em_booking_button_response', [response, button]);\n\t\t\t\t},\n\t\t\t\terror : function(){ button.text(EM.bb_error); }\n\t\t\t});\n\t\t}\n\t\treturn false;\n\t});\t\n\t$(document).on('click', 'a.em-cancel-button', function(e){\n\t\te.preventDefault();\n\t\tlet button = $(this);\n\t\tif( button.text() != EM.bb_cancelled && button.text() != EM.bb_canceling){\n\t\t\tbutton.text(EM.bb_canceling);\n\t\t\tlet button_data = button.attr('id').split('_'); \n\t\t\t$.ajax({\n\t\t\t\turl: EM.ajaxurl,\n\t\t\t\tdataType: 'jsonp',\n\t\t\t\tdata: {\n\t\t\t\t\tbooking_id : button_data[1],\n\t\t\t\t\t_wpnonce : button_data[2],\n\t\t\t\t\taction : 'booking_cancel'\n\t\t\t\t},\n\t\t\t\tsuccess : function(response, statusText, xhr, $form) {\n\t\t\t\t\tif(response.result){\n\t\t\t\t\t\tbutton.text(EM.bb_cancelled);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tbutton.text(EM.bb_cancel_error);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror : function(){ button.text(EM.bb_cancel_error); }\n\t\t\t});\n\t\t}\n\t\treturn false;\n\t});  \n\n\tif( load_ui_css ) em_load_jquery_css();\n\t\n\t//previously in em-admin.php\n\tfunction updateIntervalDescriptor () { \n\t\t$(\".interval-desc\").hide();\n\t\tlet number = \"-plural\";\n\t\tif ($('input#recurrence-interval').val() == 1 || $('input#recurrence-interval').val() == \"\")\n\t\tnumber = \"-singular\";\n\t\tlet descriptor = \"span#interval-\"+$(\"select#recurrence-frequency\").val()+number;\n\t\t$(descriptor).show();\n\t}\n\tfunction updateIntervalSelectors () {\n\t\t$('p.alternate-selector').hide();   \n\t\t$('p#'+ $('select#recurrence-frequency').val() + \"-selector\").show();\n\t}\n\tfunction updateShowHideRecurrence () {\n\t\tif( $('input#event-recurrence').is(\":checked\")) {\n\t\t\t$(\"#event_recurrence_pattern\").fadeIn();\n\t\t\t$(\"#event-date-explanation\").hide();\n\t\t\t$(\"#recurrence-dates-explanation\").show();\n\t\t\t$(\"h3#recurrence-dates-title\").show();\n\t\t\t$(\"h3#event-date-title\").hide();     \n\t\t} else {\n\t\t\t$(\"#event_recurrence_pattern\").hide();\n\t\t\t$(\"#recurrence-dates-explanation\").hide();\n\t\t\t$(\"#event-date-explanation\").show();\n\t\t\t$(\"h3#recurrence-dates-title\").hide();\n\t\t\t$(\"h3#event-date-title\").show();   \n\t\t}\n\t}\t\t \n\t$(\"#recurrence-dates-explanation\").hide();\n\t$(\"#date-to-submit\").hide();\n\t$(\"#end-date-to-submit\").hide();\n\t\n\t$(\"#localised-date\").show();\n\t$(\"#localised-end-date\").show();\n\t\n\t$('#em-wrapper input.select-all').on('change', function(){\n\t \tif($(this).is(':checked')){\n\t\t\t$('input.row-selector').prop('checked', true);\n\t\t\t$('input.select-all').prop('checked', true);\n\t \t}else{\n\t\t\t$('input.row-selector').prop('checked', false);\n\t\t\t$('input.select-all').prop('checked', false);\n\t\t}\n\t}); \n\t\n\tupdateIntervalDescriptor(); \n\tupdateIntervalSelectors();\n\tupdateShowHideRecurrence();\n\t$('input#event-recurrence').on('change', updateShowHideRecurrence);\n\t   \n\t// recurrency elements   \n\t$('input#recurrence-interval').on('keyup', updateIntervalDescriptor);\n\t$('select#recurrence-frequency').on('change', updateIntervalDescriptor);\n\t$('select#recurrence-frequency').on('change', updateIntervalSelectors);\n\n\n\n\t/* Location Type Selection */\n\t$('.em-location-types .em-location-types-select').on('change', function(){\n\t\tlet el = $(this);\n\t\tif( el.val() == 0 ){\n\t\t\t$('.em-location-type').hide();\n\t\t}else{\n\t\t\tlet location_type = el.find('option:selected').data('display-class');\n\t\t\t$('.em-location-type').hide();\n\t\t\t$('.em-location-type.'+location_type).show();\n\t\t\tif( location_type != 'em-location-type-place' ){\n\t\t\t\tjQuery('#em-location-reset a').trigger('click');\n\t\t\t}\n\t\t}\n\t\tif( el.data('active') !== '' && el.val() !== el.data('active') ){\n\t\t\t$('.em-location-type-delete-active-alert').hide();\n\t\t\t$('.em-location-type-delete-active-alert').show();\n\t\t}else{\n\t\t\t$('.em-location-type-delete-active-alert').hide();\n\t\t}\n\t}).trigger('change');\n\t\n\t//Finally, add autocomplete here\n\t//Autocomplete\n\tif( jQuery( \"div.em-location-data input#location-name\" ).length > 0 ){\n\t\tjQuery( \"div.em-location-data input#location-name\" ).autocomplete({\n\t\t\tsource: EM.locationajaxurl,\n\t\t\tminLength: 2,\n\t\t\tfocus: function( event, ui ){\n\t\t\t\tjQuery(\"input#location-id\" ).val( ui.item.value );\n\t\t\t\treturn false;\n\t\t\t},\t\t\t \n\t\t\tselect: function( event, ui ){\n\t\t\t\tjQuery(\"input#location-id\" ).val(ui.item.id).trigger('change');\n\t\t\t\tjQuery(\"input#location-name\" ).val(ui.item.value);\n\t\t\t\tjQuery('input#location-address').val(ui.item.address);\n\t\t\t\tjQuery('input#location-town').val(ui.item.town);\n\t\t\t\tjQuery('input#location-state').val(ui.item.state);\n\t\t\t\tjQuery('input#location-region').val(ui.item.region);\n\t\t\t\tjQuery('input#location-postcode').val(ui.item.postcode);\n\t\t\t\tjQuery('input#location-latitude').val(ui.item.latitude);\n\t\t\t\tjQuery('input#location-longitude').val(ui.item.longitude);\n\t\t\t\tif( ui.item.country == '' ){\n\t\t\t\t\tjQuery('select#location-country option:selected').removeAttr('selected');\n\t\t\t\t}else{\n\t\t\t\t\tjQuery('select#location-country option[value=\"'+ui.item.country+'\"]').attr('selected', 'selected');\n\t\t\t\t}\n\t\t\t\tjQuery('div.em-location-data input').css('background-color','#ccc').prop('readonly', true);\n\t\t\t\tjQuery('div.em-location-data select').css('background-color','#ccc').css('color', '#666666').prop('disabled', true);\n\t\t\t\tjQuery('#em-location-reset').show();\n\t\t\t\tjQuery('#em-location-search-tip').hide();\n\t\t\t\tjQuery(document).triggerHandler('em_locations_autocomplete_selected', [event, ui]);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}).data( \"ui-autocomplete\" )._renderItem = function( ul, item ) {\n\t\t\tlet html_val = \"<a>\" + em_esc_attr(item.label) + '<br><span style=\"font-size:11px\"><em>'+ em_esc_attr(item.address) + ', ' + em_esc_attr(item.town)+\"</em></span></a>\";\n\t\t\treturn jQuery( \"<li></li>\" ).data( \"item.autocomplete\", item ).append(html_val).appendTo( ul );\n\t\t};\n\t\tjQuery('#em-location-reset a').on('click', function(){\n\t\t\tjQuery('div.em-location-data input').val('').prop('readonly', false);\n\t\t\tjQuery('div.em-location-data select').prop('disabled', false);\n\t\t\tjQuery('div.em-location-data option:selected').removeAttr('selected');\n\t\t\tjQuery('input#location-id').val('');\n\t\t\tjQuery('#em-location-reset').hide();\n\t\t\tjQuery('#em-location-search-tip').show();\n\t\t\tjQuery('#em-map').hide();\n\t\t\tjQuery('#em-map-404').show();\n\t\t\tif(typeof(marker) !== 'undefined'){\n\t\t\t\tmarker.setPosition(new google.maps.LatLng(0, 0));\n\t\t\t\tinfoWindow.close();\n\t\t\t\tmarker.setDraggable(true);\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\tif( jQuery('input#location-id').val() != '0' && jQuery('input#location-id').val() != '' ){\n\t\t\tjQuery('div.em-location-data input').prop('readonly', true);\n\t\t\tjQuery('div.em-location-data select').prop('disabled', true);\n\t\t\tjQuery('#em-location-reset').show();\n\t\t\tjQuery('#em-location-search-tip').hide();\n\t\t}\n\t}\n\t/* Local JS Timezone related placeholders */\n\t/* Moment JS Timzeone PH */\n\tif( window.moment ){\n\t\tlet replace_specials = function( day, string ){\n\t\t\t// replace things not supported by moment\n\t\t\tstring = string.replace(/##T/g, Intl.DateTimeFormat().resolvedOptions().timeZone);\n\t\t\tstring = string.replace(/#T/g, \"GMT\"+day.format('Z'));\n\t\t\tstring = string.replace(/###t/g, day.utcOffset()*-60);\n\t\t\tstring = string.replace(/##t/g, day.isDST());\n\t\t\tstring = string.replace(/#t/g, day.daysInMonth());\n\t\t\treturn string;\n\t\t};\n\t\t$('.em-date-momentjs').each( function(){\n\t\t\t// Start Date\n\t\t\tlet el = $(this);\n\t\t\tlet day_start = moment.unix(el.data('date-start'));\n\t\t\tlet date_start_string = replace_specials(day_start, day_start.format(el.data('date-format')));\n\t\t\tif( el.data('date-start') !== el.data('date-end') ){\n\t\t\t\t// End Date\n\t\t\t\tlet day_end = moment.unix(el.data('date-end'));\n\t\t\t\tlet day_end_string = replace_specials(day_start, day_end.format(el.data('date-format')));\n\t\t\t\t// Output\n\t\t\t\tlet date_string = date_start_string + el.data('date-separator') + day_end_string;\n\t\t\t}else{\n\t\t\t\tlet date_string = date_start_string;\n\t\t\t}\n\t\t\tel.text(date_string);\n\t\t});\n\t\tlet get_date_string = function(ts, format){\n\t\t\tlet date = new Date(ts * 1000);\n\t\t\tlet minutes = date.getMinutes();\n\t\t\tif( format == 24 ){\n\t\t\t\tlet hours = date.getHours();\n\t\t\t\thours = hours < 10 ? '0' + hours : hours;\n\t\t\t\tminutes = minutes < 10 ? '0' + minutes : minutes;\n\t\t\t\treturn hours + ':' + minutes;\n\t\t\t}else{\n\t\t\t\tlet hours = date.getHours() % 12;\n\t\t\t\tlet ampm = hours >= 12 ? 'PM' : 'AM';\n\t\t\t\tif( hours === 0 ) hours = 12; // the hour '0' should be '12'\n\t\t\t\tminutes = minutes < 10 ? '0'+minutes : minutes;\n\t\t\t\treturn hours + ':' + minutes + ' ' + ampm;\n\t\t\t}\n\t\t}\n\t\t$('.em-time-localjs').each( function(){\n\t\t\tlet el = $(this);\n\t\t\tlet strTime = get_date_string( el.data('time'), el.data('time-format') );\n\t\t\tif( el.data('time-end') ){\n\t\t\t\tlet separator = el.data('time-separator') ? el.data('time-separator') : ' - ';\n\t\t\t\tstrTime = strTime + separator + get_date_string( el.data('time-end'), el.data('time-format') );\n\t\t\t}\n\t\t\tel.text(strTime);\n\t\t});\n\t}\n\t/* Done! */\n\tjQuery(document).triggerHandler('em_javascript_loaded');\n});\n\nfunction em_load_jquery_css(){\n\tif( EM.ui_css && jQuery('link#jquery-ui-css').length == 0 ){\n\t\tlet script = document.createElement(\"link\");\n\t\tscript.id = 'jquery-ui-css';\n\t\tscript.rel = \"stylesheet\";\n\t\tscript.href = EM.ui_css;\n\t\tdocument.body.appendChild(script);\n\t}\n}\n\n/* Useful function for adding the em_ajax flag to a url, regardless of querystring format */\nlet em_ajaxify = function(url){\n\tif ( url.search('em_ajax=0') != -1){\n\t\turl = url.replace('em_ajax=0','em_ajax=1');\n\t}else if( url.search(/\\?/) != -1 ){\n\t\turl = url + \"&em_ajax=1\";\n\t}else{\n\t\turl = url + \"?em_ajax=1\";\n\t}\n\treturn url;\n};\n\n\n\nfunction em_esc_attr( str ){\n\tif( typeof str !== 'string' ) return '';\n\treturn str.replace(/</gi,'&lt;').replace(/>/gi,'&gt;');\n}\n\n// TODO: Put this in extra file\nlet EventsManager = {\n\n\tinit: () => {\n\t\tEventsManager.autofillDate();\n\t\tEventsManager.autofillTime();\n\t\tEventsManager.lockTime();\n\t},\n\n\tgetElementByName: (element) => {\n\t\tlet elements = document.getElementsByName(element);\n\t\tif (elements.length) {\n\t\t\treturn elements[0];\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\n\tautofillDate: () => {\n\t\tconst dateStartSelector = EventsManager.getElementByName(\"event_start_date\")\n\t\tconst dateEndSelector = EventsManager.getElementByName(\"event_end_date\")\n\t\tif (dateStartSelector && dateEndSelector) {\n\t\t\tdateStartSelector.addEventListener(\"change\", (event) => {\n\t\t\t\tif(dateEndSelector.value == \"\") {\n\t\t\t\t\tdateEndSelector.value = dateStartSelector.value;\n\t\t\t\t} \n\t\t\t})\n\t\t}\n\t},\n\n\tautofillTime: () => {\n\t\tconst timeStartSelector = EventsManager.getElementByName(\"event_start_time\")\n\t\tconst timeEndSelector = EventsManager.getElementByName(\"event_end_time\")\n\t\tif (timeStartSelector && timeEndSelector) {\n\t\t\ttimeStartSelector.addEventListener(\"change\", (event) => {\n\t\t\t\tif(timeEndSelector.value == \"00:00\") {\n\t\t\t\t\ttimeEndSelector.value = timeStartSelector.value;\n\t\t\t\t} \n\t\t\t})\n\t\t}\n\t},\n\n\tlockTime: () => {\n\t\tconst allDaySelector = EventsManager.getElementByName(\"event_all_day\")\n\t\tconst timeStartSelector = EventsManager.getElementByName(\"event_start_time\")\n\t\tconst timeEndSelector = EventsManager.getElementByName(\"event_end_time\")\n\t\tif(allDaySelector) {\n\t\t\tallDaySelector.addEventListener(\"change\", (event) => {\n\t\t\t\ttimeStartSelector.disabled = allDaySelector.checked;\n\t\t\t\ttimeEndSelector.disabled = allDaySelector.checked;\n\t\t\t})\n\t\t}\n\t}\n}\n\ndocument.addEventListener('DOMContentLoaded', EventsManager.init, false);\n\n\n\n\n\nfunction em_custom_mails() {\n\tlet trigger_selector = document.querySelectorAll('.em-nav-item');\n\tif(trigger_selector.length == 0) return;\t\n\tif( trigger_selector.length == 1 ){\n\t\tdocument.querySelector('.em-nav-side')?.classList.add('hidden');\n\t\tdocument.querySelector('.em-nav-content')?.classList.remove('hidden');\n\t\treturn;\n\t}\n\n\t//add listener to triggers for groups and subgroups\n\ttrigger_selector.forEach(element => {\n\t\t\n\t\telement.addEventListener(\"click\", (event) => {\n\t\t\ttrigger_selector.forEach(item => { item.classList.remove('active') });\n\t\t\tdocument.querySelectorAll('.em-nav-content')?.forEach(e =>{\n\t\t\t\te.classList.add('hidden');\n\t\t\t})\n\t\t\tevent.target.classList.add('active')\n\t\t\tdocument.querySelector(element.getAttribute('rel'))?.classList.remove('hidden');\n\t\t})\n\t});\n\n\n\tlet accordion_items = document.querySelectorAll('.em-accordion-item');\n\n\taccordion_items.forEach(element => {\n\t\t\n\t\telement.addEventListener(\"click\", (event) => {\n\t\t\taccordion_items.forEach(item => { item.classList.remove('active') });\n\t\t\tdocument.querySelectorAll('.em-accordion-content')?.forEach(e =>{\n\t\t\t\te.classList.add('hidden');\n\t\t\t})\n\t\t\tevent.target.classList.add('active')\n\t\t\tdocument.getElementById(element.getAttribute('rel'))?.classList.remove('hidden');\n\t\t})\n\t});\n\n\tlet mail_subgroups = document.querySelectorAll('.em-subgroup-email')\n\n\tmail_subgroups.forEach(element => {\n\n\t\tlet selector = element.querySelector('.em-cet-status');\n\t\tlet content = element.querySelector('.em-mail-vals');\n\t\tlet indicator = element.querySelector('.em-mail-status-indicator')\n\t\t\n\t\tselector.addEventListener(\"change\", (event) => {\n\t\t\tconsole.log(indicator)\n\t\t\tindicator?.setAttribute('data-status', event.target.value)\n\t\t\tif(event.target.value == 1) {\n\t\t\t\tcontent.classList.remove(\"hidden\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcontent.classList.add(\"hidden\");\n\t\t})\n\t});\n\n\tdocument.getElementById('booking-modal-close')?.addEventListener('click', (event) => {\n\t\tlet element = document.getElementById('booking-modal')\n\t\telement.style.display = \"none\"\n\t})\n\n\tdocument.getElementById('email-modal-close')?.addEventListener('click', (event) => {\n\t\tlet element = document.getElementById('email-modal')\n\t\telement.style.display = \"none\"\n\t})\n}\n\ndocument.addEventListener('DOMContentLoaded', em_custom_mails, false);\n\n\n document.addEventListener('DOMContentLoaded', () => {\n     document.body.addEventListener('click', event => {\n         if(event.target.classList.contains(\"em-bookings-approve-offline\") && !confirm(EM.offline_confirm)) {\n             event.stopPropagation();\n             event.stopImmediatePropagation();\n             event.preventDefault();\n             return false;\n         }\n     });\n\n     document.body.addEventListener('click', event => {\n         if(event.target.classList.contains(\"em-transaction-delete\")) {\n             const el = event.target;\n             if( !confirm(EM.transaction_delete) ){ return false; }\n             const url = em_ajaxify( el.attr('href'));\n             let td = el.parents('td').first();\n             td.html(EM.txt_loading);\n             td.load( url );\n             return false;\n         }\n     })\n });"],"names":["jQuery","document","ready","$","load_ui_css","each","i","el","addClass","next","parent","off","on","e","preventDefault","closest","prepend","url","em_ajaxify","attr","load","trigger","confirm","window","location","href","is","find","hide","show","event","form","first","val","warning_text","EM","event_reschedule_warning","event_recurrence_bookings","event_recurrence_overwrite","confirmation","data","removeClass","siblings","length","checked","disable_bookings_warning","fadeIn","reset_ticket_forms","tickets","rowNo","slot","clone","appendTo","index","replace","datepicker","removeAttr","em_timepickerObj","em_timepicker","em_setup_datepicker","em_setup_timepicker","animate","scrollTop","offset","top","check_ticket_sortability","tbody","text","classname","triggerHandler","hasClass","toggleClass","show_advanced","value","getJSON","result","remove","alert","error","sortable","items","placeholder","handle","helper","tds","children","append","em_tickets","console","log","parents","match","pno","em_bookings_settings_dialog","modal","autoOpen","minWidth","height","buttons","bookings_settings_save","click","booking_form_cols","item_match","name","dialog","em_bookings_export_dialog","bookings_export_save","export_overlay_show_tickets","select_el","input_par","input_par_selected","connectWith","update","ui","item","disableSelection","post","ajaxurl","serializeArray","root","replaceWith","booking_delete","td","html","txt_loading","get","button","bb_booked","bb_booking","button_data","split","ajax","dataType","event_id","_wpnonce","action","success","response","statusText","xhr","$form","bb_error","message","bb_cancelled","bb_canceling","booking_id","bb_cancel_error","em_load_jquery_css","updateIntervalDescriptor","number","descriptor","updateIntervalSelectors","updateShowHideRecurrence","prop","location_type","autocomplete","source","locationajaxurl","minLength","focus","select","id","address","town","state","region","postcode","latitude","longitude","country","css","_renderItem","ul","html_val","em_esc_attr","label","marker","setPosition","google","maps","LatLng","infoWindow","close","setDraggable","moment","replace_specials","day","string","Intl","DateTimeFormat","resolvedOptions","timeZone","format","utcOffset","isDST","daysInMonth","day_start","unix","date_start_string","day_end","day_end_string","date_string","get_date_string","ts","date","Date","minutes","getMinutes","hours","getHours","ampm","strTime","separator","ui_css","script","createElement","rel","body","appendChild","search","str","EventsManager","init","autofillDate","autofillTime","lockTime","getElementByName","element","elements","getElementsByName","dateStartSelector","dateEndSelector","addEventListener","timeStartSelector","timeEndSelector","allDaySelector","disabled","em_custom_mails","trigger_selector","querySelectorAll","querySelector","classList","add","forEach","target","getAttribute","accordion_items","getElementById","mail_subgroups","selector","content","indicator","setAttribute","style","display","contains","offline_confirm","stopPropagation","stopImmediatePropagation","transaction_delete"],"sourceRoot":""}