{"version":3,"file":"events-manager.js","mappings":"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","sources":["webpack:///./src/events_manager.scss?c20a","webpack:///webpack/bootstrap","webpack:///webpack/runtime/make namespace object","webpack:///./src/events-manager.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport {};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import './events_manager.scss';\n\njQuery( document ).ready( function ( $ ) {\n\tlet load_ui_css = false; //load jquery ui css?\n\t/* Time Entry */\n\t$( '#start-time' ).each( function ( i, el ) {\n\t\t$( el )\n\t\t\t.addClass( 'em-time-input em-time-start' )\n\t\t\t.next( '#end-time' )\n\t\t\t.addClass( 'em-time-input em-time-end' )\n\t\t\t.parent()\n\t\t\t.addClass( 'em-time-range' );\n\t} );\n\n\t/*\n\t * ADMIN AREA AND PUBLIC FORMS (Still polishing this section up, note that form ids and classes may change accordingly)\n\t */\n\t//Events List\n\t//Approve/Reject Links\n\t$( '.events-table' ).on( 'click', '.em-event-delete', function () {\n\t\tif ( ! confirm( 'Are you sure you want to delete?' ) ) {\n\t\t\treturn false;\n\t\t}\n\t\twindow.location.href = this.href;\n\t} );\n\t//Forms\n\t$( '#event-form #event-image-delete, #location-form #location-image-delete' ).on( 'click', function () {\n\t\tlet el = $( this );\n\t\tif ( el.is( ':checked' ) ) {\n\t\t\tel.closest( '.event-form-image, .location-form-image' )\n\t\t\t\t.find( '#event-image-img, #location-image-img' )\n\t\t\t\t.hide();\n\t\t} else {\n\t\t\tel.closest( '.event-form-image, .location-form-image' )\n\t\t\t\t.find( '#event-image-img, #location-image-img' )\n\t\t\t\t.show();\n\t\t}\n\t} );\n\t//Event Editor\n\t//Recurrence Warnings\n\t$( '#event-form.em-event-admin-recurring' ).on( 'submit', function ( event ) {\n\t\tlet form = $( this );\n\t\tif ( form.find( 'input[name=\"event_reschedule\"]' ).first().val() == 1 ) {\n\t\t\tlet warning_text = EM.event_reschedule_warning;\n\t\t} else if ( form.find( 'input[name=\"event_recreate_tickets\"]' ).first().val() == 1 ) {\n\t\t\tlet warning_text = EM.event_recurrence_bookings;\n\t\t} else {\n\t\t\tlet warning_text = EM.event_recurrence_overwrite;\n\t\t}\n\t\tlet confirmation = confirm( warning_text );\n\t\tif ( confirmation == false ) {\n\t\t\tevent.preventDefault();\n\t\t}\n\t} );\n\t//Buttons for recurrence warnings within event editor forms\n\t$( '.em-reschedule-trigger' ).on( 'click', function ( e ) {\n\t\te.preventDefault();\n\t\tlet trigger = $( this );\n\t\ttrigger\n\t\t\t.closest( '.em-recurrence-reschedule' )\n\t\t\t.find( trigger.data( 'target' ) )\n\t\t\t.removeClass( 'reschedule-hidden' );\n\t\ttrigger.siblings( '.em-reschedule-value' ).val( 1 );\n\t\ttrigger.addClass( 'reschedule-hidden' ).siblings( 'a' ).removeClass( 'reschedule-hidden' );\n\t} );\n\t$( '.em-reschedule-cancel' ).on( 'click', function ( e ) {\n\t\te.preventDefault();\n\t\tlet trigger = $( this );\n\t\ttrigger.closest( '.em-recurrence-reschedule' ).find( trigger.data( 'target' ) ).addClass( 'reschedule-hidden' );\n\t\ttrigger.siblings( '.em-reschedule-value' ).val( 0 );\n\t\ttrigger.addClass( 'reschedule-hidden' ).siblings( 'a' ).removeClass( 'reschedule-hidden' );\n\t} );\n\t//Tickets & Bookings\n\tif ( $( '#em-tickets-form' ).length > 0 ) {\n\t\t//Enable/Disable Bookings\n\t\t$( '#event-rsvp' ).on( 'click', function ( event ) {\n\t\t\tif ( ! this.checked ) {\n\t\t\t\tlet confirmation = confirm( EM.disable_bookings_warning );\n\t\t\t\tif ( confirmation == false ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t} else {\n\t\t\t\t\t$( '#event-rsvp-options' ).hide();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$( '#event-rsvp-options' ).fadeIn();\n\t\t\t}\n\t\t} );\n\t\tif ( $( 'input#event-rsvp' ).is( ':checked' ) ) {\n\t\t\t$( 'div#rsvp-data' ).fadeIn();\n\t\t} else {\n\t\t\t$( 'div#rsvp-data' ).hide();\n\t\t}\n\t\t//Ticket(s) UI\n\t\tlet reset_ticket_forms = function () {\n\t\t\t$( '#em-tickets-form table tbody tr.em-tickets-row' ).show();\n\t\t\t$( '#em-tickets-form table tbody tr.em-tickets-row-form' ).hide();\n\t\t};\n\t\t//recurrences and cut-off logic for ticket availability\n\t\tif ( $( '#em-recurrence-checkbox' ).length > 0 ) {\n\t\t\t$( '#em-recurrence-checkbox' )\n\t\t\t\t.on( 'change', function () {\n\t\t\t\t\tif ( $( '#em-recurrence-checkbox' ).is( ':checked' ) ) {\n\t\t\t\t\t\t$(\n\t\t\t\t\t\t\t'#em-tickets-form .ticket-dates-from-recurring, #em-tickets-form .ticket-dates-to-recurring, #event-rsvp-options .em-booking-date-recurring'\n\t\t\t\t\t\t).show();\n\t\t\t\t\t\t$(\n\t\t\t\t\t\t\t'#em-tickets-form .ticket-dates-from-normal, #em-tickets-form .ticket-dates-to-normal, #event-rsvp-options .em-booking-date-normal, #em-tickets-form .hidden'\n\t\t\t\t\t\t).hide();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(\n\t\t\t\t\t\t\t'#em-tickets-form .ticket-dates-from-normal, #em-tickets-form .ticket-dates-to-normal, #event-rsvp-options .em-booking-date-normal'\n\t\t\t\t\t\t).show();\n\t\t\t\t\t\t$(\n\t\t\t\t\t\t\t'#em-tickets-form .ticket-dates-from-recurring, #em-tickets-form .ticket-dates-to-recurring, #event-rsvp-options .em-booking-date-recurring, #em-tickets-form .hidden'\n\t\t\t\t\t\t).hide();\n\t\t\t\t\t}\n\t\t\t\t} )\n\t\t\t\t.trigger( 'change' );\n\t\t} else if ( $( '#em-form-recurrence' ).length > 0 ) {\n\t\t\t$(\n\t\t\t\t'#em-tickets-form .ticket-dates-from-recurring, #em-tickets-form .ticket-dates-to-recurring, #event-rsvp-options .em-booking-date-recurring'\n\t\t\t).show();\n\t\t\t$(\n\t\t\t\t'#em-tickets-form .ticket-dates-from-normal, #em-tickets-form .ticket-dates-to-normal, #event-rsvp-options .em-booking-date-normal, #em-tickets-form .hidden'\n\t\t\t).hide();\n\t\t} else {\n\t\t\t$(\n\t\t\t\t'#em-tickets-form .ticket-dates-from-recurring, #em-tickets-form .ticket-dates-to-recurring, #event-rsvp-options .em-booking-date-recurring, #em-tickets-form .hidden'\n\t\t\t).hide();\n\t\t}\n\t\t//Add a new ticket\n\t\t$( '#em-tickets-add' ).on( 'click', function ( e ) {\n\t\t\te.preventDefault();\n\t\t\treset_ticket_forms();\n\t\t\t//create copy of template slot, insert so ready for population\n\t\t\tlet tickets = $( '#em-tickets-form table tbody' );\n\t\t\tlet rowNo = tickets.length + 1;\n\t\t\tlet slot = tickets\n\t\t\t\t.first( '.em-ticket-template' )\n\t\t\t\t.clone( true )\n\t\t\t\t.attr( 'id', 'em-ticket-' + rowNo )\n\t\t\t\t.removeClass( 'em-ticket-template' )\n\t\t\t\t.addClass( 'em-ticket' )\n\t\t\t\t.appendTo( $( '#em-tickets-form table' ) );\n\t\t\t//change the index of the form element names\n\t\t\tslot.find( '*[name]' ).each( function ( index, el ) {\n\t\t\t\tel = $( el );\n\t\t\t\tel.attr( 'name', el.attr( 'name' ).replace( 'em_tickets[0]', 'em_tickets[' + rowNo + ']' ) );\n\t\t\t} );\n\t\t\t//show ticket and switch to editor\n\t\t\tslot.show().find( '.ticket-actions-edit' ).trigger( 'click' );\n\t\t\t//refresh datepicker and values\n\t\t\tslot.find( '.em-date-input-loc' ).datepicker( 'destroy' ).removeAttr( 'id' ); //clear all datepickers\n\t\t\tslot.find( '.em-time-input' )\n\t\t\t\t.off()\n\t\t\t\t.each( function ( index, el ) {\n\t\t\t\t\tif ( typeof this.em_timepickerObj == 'object' ) {\n\t\t\t\t\t\tthis.em_timepicker( 'remove' );\n\t\t\t\t\t}\n\t\t\t\t} ); //clear all em_timepickers - consequently, also other click/blur/change events, recreate the further down\n\t\t\tem_setup_datepicker( slot );\n\t\t\tem_setup_timepicker( slot );\n\t\t\t$( 'html, body' ).animate( { scrollTop: slot.offset().top - 30 } ); //sends user to form\n\t\t\tcheck_ticket_sortability();\n\t\t} );\n\t\t//Edit a Ticket\n\t\t$( document ).on( 'click', '.ticket-actions-edit', function ( e ) {\n\t\t\te.preventDefault();\n\t\t\treset_ticket_forms();\n\t\t\tlet tbody = $( this ).closest( 'tbody' );\n\t\t\ttbody.find( 'tr.em-tickets-row' ).hide();\n\t\t\ttbody.find( 'tr.em-tickets-row-form' ).fadeIn();\n\t\t\treturn false;\n\t\t} );\n\t\t$( document ).on( 'click', '.ticket-actions-edited', function ( e ) {\n\t\t\te.preventDefault();\n\t\t\tlet tbody = $( this ).closest( 'tbody' );\n\t\t\tlet rowNo = tbody.attr( 'id' ).replace( 'em-ticket-', '' );\n\t\t\ttbody.find( '.em-tickets-row' ).fadeIn();\n\t\t\ttbody.find( '.em-tickets-row-form' ).hide();\n\t\t\ttbody.find( '*[name]' ).each( function ( index, el ) {\n\t\t\t\tel = $( el );\n\t\t\t\tif ( el.attr( 'name' ) == 'ticket_start_pub' ) {\n\t\t\t\t\ttbody.find( 'span.ticket_start' ).text( el.val() );\n\t\t\t\t} else if ( el.attr( 'name' ) == 'ticket_end_pub' ) {\n\t\t\t\t\ttbody.find( 'span.ticket_end' ).text( el.val() );\n\t\t\t\t} else if ( el.attr( 'name' ) == 'em_tickets[' + rowNo + '][ticket_type]' ) {\n\t\t\t\t\tif ( el.find( ':selected' ).val() == 'members' ) {\n\t\t\t\t\t\ttbody.find( 'span.ticket_name' ).prepend( '* ' );\n\t\t\t\t\t}\n\t\t\t\t} else if ( el.attr( 'name' ) == 'em_tickets[' + rowNo + '][ticket_start_recurring_days]' ) {\n\t\t\t\t\tlet text =\n\t\t\t\t\t\ttbody.find( 'select.ticket-dates-from-recurring-when' ).val() == 'before'\n\t\t\t\t\t\t\t? '-' + el.val()\n\t\t\t\t\t\t\t: el.val();\n\t\t\t\t\tif ( el.val() != '' ) {\n\t\t\t\t\t\ttbody.find( 'span.ticket_start_recurring_days' ).text( text );\n\t\t\t\t\t\ttbody\n\t\t\t\t\t\t\t.find( 'span.ticket_start_recurring_days_text, span.ticket_start_time' )\n\t\t\t\t\t\t\t.removeClass( 'hidden' )\n\t\t\t\t\t\t\t.show();\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttbody.find( 'span.ticket_start_recurring_days' ).text( ' - ' );\n\t\t\t\t\t\ttbody\n\t\t\t\t\t\t\t.find( 'span.ticket_start_recurring_days_text, span.ticket_start_time' )\n\t\t\t\t\t\t\t.removeClass( 'hidden' )\n\t\t\t\t\t\t\t.hide();\n\t\t\t\t\t}\n\t\t\t\t} else if ( el.attr( 'name' ) == 'em_tickets[' + rowNo + '][ticket_end_recurring_days]' ) {\n\t\t\t\t\tlet text =\n\t\t\t\t\t\ttbody.find( 'select.ticket-dates-to-recurring-when' ).val() == 'before'\n\t\t\t\t\t\t\t? '-' + el.val()\n\t\t\t\t\t\t\t: el.val();\n\t\t\t\t\tif ( el.val() != '' ) {\n\t\t\t\t\t\ttbody.find( 'span.ticket_end_recurring_days' ).text( text );\n\t\t\t\t\t\ttbody\n\t\t\t\t\t\t\t.find( 'span.ticket_end_recurring_days_text, span.ticket_end_time' )\n\t\t\t\t\t\t\t.removeClass( 'hidden' )\n\t\t\t\t\t\t\t.show();\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttbody.find( 'span.ticket_end_recurring_days' ).text( ' - ' );\n\t\t\t\t\t\ttbody\n\t\t\t\t\t\t\t.find( 'span.ticket_end_recurring_days_text, span.ticket_end_time' )\n\t\t\t\t\t\t\t.removeClass( 'hidden' )\n\t\t\t\t\t\t\t.hide();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlet classname = el\n\t\t\t\t\t\t.attr( 'name' )\n\t\t\t\t\t\t.replace( 'em_tickets[' + rowNo + '][', '' )\n\t\t\t\t\t\t.replace( ']', '' )\n\t\t\t\t\t\t.replace( '[]', '' );\n\t\t\t\t\ttbody.find( '.em-tickets-row .' + classname ).text( el.val() );\n\t\t\t\t}\n\t\t\t} );\n\t\t\t//allow for others to hook into this\n\t\t\t$( document ).triggerHandler( 'em_maps_tickets_edit', [ tbody, rowNo, true ] );\n\t\t\t$( 'html, body' ).animate( { scrollTop: tbody.parent().offset().top - 30 } ); //sends user back to top of form\n\t\t\treturn false;\n\t\t} );\n\t\t$( document ).on( 'change', '.em-ticket-form select.ticket_type', function ( e ) {\n\t\t\t//check if ticket is for all users or members, if members, show roles to limit the ticket to\n\t\t\tlet el = $( this );\n\t\t\tif ( el.find( 'option:selected' ).val() == 'members' ) {\n\t\t\t\tel.closest( '.em-ticket-form' ).find( '.ticket-roles' ).fadeIn();\n\t\t\t} else {\n\t\t\t\tel.closest( '.em-ticket-form' ).find( '.ticket-roles' ).hide();\n\t\t\t}\n\t\t} );\n\t\t$( document ).on( 'click', '.em-ticket-form .ticket-options-advanced', function ( e ) {\n\t\t\t//show or hide advanced tickets, hidden by default\n\t\t\te.preventDefault();\n\t\t\tlet el = $( this );\n\t\t\tif ( el.hasClass( 'show' ) ) {\n\t\t\t\tel.closest( '.em-ticket-form' ).find( '.em-ticket-form-advanced' ).fadeIn();\n\t\t\t\tel.find( '.show,.show-advanced' ).hide();\n\t\t\t\tel.find( '.hide,.hide-advanced' ).show();\n\t\t\t} else {\n\t\t\t\tel.closest( '.em-ticket-form' ).find( '.em-ticket-form-advanced' ).hide();\n\t\t\t\tel.find( '.show,.show-advanced' ).show();\n\t\t\t\tel.find( '.hide,.hide-advanced' ).hide();\n\t\t\t}\n\t\t\tel.toggleClass( 'show' );\n\t\t} );\n\t\t$( '.em-ticket-form' ).each( function () {\n\t\t\t//check whether to show advanced options or not by default for each ticket\n\t\t\tlet show_advanced = false;\n\t\t\tlet el = $( this );\n\t\t\tel.find( '.em-ticket-form-advanced input[type=\"text\"]' ).each( function () {\n\t\t\t\tif ( this.value != '' ) show_advanced = true;\n\t\t\t} );\n\t\t\tif ( el.find( '.em-ticket-form-advanced input[type=\"checkbox\"]:checked' ).length > 0 ) {\n\t\t\t\tshow_advanced = true;\n\t\t\t}\n\t\t\tel.find( '.em-ticket-form-advanced option:selected' ).each( function () {\n\t\t\t\tif ( this.value != '' ) show_advanced = true;\n\t\t\t} );\n\t\t\tif ( show_advanced ) el.find( '.ticket-options-advanced' ).trigger( 'click' );\n\t\t} );\n\t\t//Delete a ticket\n\t\t$( document ).on( 'click', '.ticket-actions-delete', function ( e ) {\n\t\t\te.preventDefault();\n\t\t\tlet el = $( this );\n\t\t\tlet tbody = el.closest( 'tbody' );\n\t\t\tif ( tbody.find( 'input.ticket_id' ).val() > 0 ) {\n\t\t\t\t//only will happen if no bookings made\n\t\t\t\tel.text( 'Deleting...' );\n\t\t\t\t$.getJSON(\n\t\t\t\t\t$( this ).attr( 'href' ),\n\t\t\t\t\t{ em_ajax_action: 'delete_ticket', id: tbody.find( 'input.ticket_id' ).val() },\n\t\t\t\t\tfunction ( data ) {\n\t\t\t\t\t\tif ( data.result ) {\n\t\t\t\t\t\t\ttbody.remove();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tel.text( 'Delete' );\n\t\t\t\t\t\t\talert( data.error );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t//not saved to db yet, so just remove\n\t\t\t\ttbody.remove();\n\t\t\t}\n\t\t\tcheck_ticket_sortability();\n\t\t\treturn false;\n\t\t} );\n\t\t//Sort Tickets\n\t\t$( '#em-tickets-form.em-tickets-sortable table' ).sortable( {\n\t\t\titems: '> tbody',\n\t\t\tplaceholder: 'em-ticket-sortable-placeholder',\n\t\t\thandle: '.ticket-status',\n\t\t\thelper: function ( event, el ) {\n\t\t\t\tlet helper = $( el ).clone().addClass( 'em-ticket-sortable-helper' );\n\t\t\t\tlet tds = helper.find( '.em-tickets-row td' ).length;\n\t\t\t\thelper.children().remove();\n\t\t\t\thelper.append(\n\t\t\t\t\t'<tr class=\"em-tickets-row\"><td colspan=\"' +\n\t\t\t\t\t\ttds +\n\t\t\t\t\t\t'\" style=\"text-align:left; padding-left:15px;\"><span class=\"dashicons dashicons-tickets-alt\"></span></td></tr>'\n\t\t\t\t);\n\t\t\t\treturn helper;\n\t\t\t},\n\t\t} );\n\t\tlet check_ticket_sortability = function () {\n\t\t\tlet em_tickets = $( '#em-tickets-form table tbody.em-ticket' );\n\n\t\t\tif ( em_tickets.length == 1 ) {\n\t\t\t\tem_tickets.find( '.ticket-status' ).addClass( 'single' );\n\t\t\t\t$( '#em-tickets-form.em-tickets-sortable table' ).sortable( 'option', 'disabled', true );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tem_tickets.find( '.ticket-status' ).removeClass( 'single' );\n\t\t\t$( '#em-tickets-form.em-tickets-sortable table' ).sortable( 'option', 'disabled', false );\n\t\t};\n\t\tcheck_ticket_sortability();\n\t}\n\t//Manageing Bookings\n\tif ( $( '#em-bookings-table' ).length > 0 ) {\n\t\t//Pagination link clicks\n\t\t$( document ).on( 'click', '#em-bookings-table .tablenav-pages a', function () {\n\t\t\tlet el = $( this );\n\t\t\tlet form = el.parents( '#em-bookings-table form.bookings-filter' );\n\t\t\t//get page no from url, change page, submit form\n\t\t\tlet match = el.attr( 'href' ).match( /#[0-9]+/ );\n\t\t\tif ( match != null && match.length > 0 ) {\n\t\t\t\tlet pno = match[ 0 ].replace( '#', '' );\n\t\t\t\tform.find( 'input[name=pno]' ).val( pno );\n\t\t\t} else {\n\t\t\t\tform.find( 'input[name=pno]' ).val( 1 );\n\t\t\t}\n\t\t\tform.trigger( 'submit' );\n\t\t\treturn false;\n\t\t} );\n\t\t//Overlay Options\n\t\tlet em_bookings_settings_dialog = {\n\t\t\tmodal: true,\n\t\t\tautoOpen: false,\n\t\t\tminWidth: 500,\n\t\t\theight: 'auto',\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ttext: EM.bookings_settings_save,\n\t\t\t\t\tclick: function ( e ) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t//we know we'll deal with cols, so wipe hidden value from main\n\t\t\t\t\t\tlet match = $( '#em-bookings-table form.bookings-filter [name=cols]' ).val( '' );\n\t\t\t\t\t\tlet booking_form_cols = $( 'form#em-bookings-table-settings-form input.em-bookings-col-item' );\n\t\t\t\t\t\t$.each( booking_form_cols, function ( i, item_match ) {\n\t\t\t\t\t\t\t//item_match = $(item_match);\n\t\t\t\t\t\t\tif ( item_match.value == 1 ) {\n\t\t\t\t\t\t\t\tif ( match.val() != '' ) {\n\t\t\t\t\t\t\t\t\tmatch.val( match.val() + ',' + item_match.name );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tmatch.val( item_match.name );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t\t//submit main form\n\t\t\t\t\t\t$( '#em-bookings-table-settings' ).trigger( 'submitted' ); //hook into this with bind()\n\t\t\t\t\t\t$( '#em-bookings-table form.bookings-filter' ).trigger( 'submit' );\n\t\t\t\t\t\t$( this ).dialog( 'close' );\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t\tlet em_bookings_export_dialog = {\n\t\t\tmodal: true,\n\t\t\tautoOpen: false,\n\t\t\tminWidth: 700,\n\t\t\theight: 'auto',\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ttext: EM.bookings_export_save,\n\t\t\t\t\tclick: function ( e ) {\n\t\t\t\t\t\t$( this ).children( 'form' ).trigger( 'submit' );\n\t\t\t\t\t\t$( this ).dialog( 'close' );\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t\tif ( $( '#em-bookings-table-settings' ).length > 0 ) {\n\t\t\t//Settings Overlay\n\t\t\t$( '#em-bookings-table-settings' ).dialog( em_bookings_settings_dialog );\n\t\t\t$( document ).on( 'click', '#em-bookings-table-settings-trigger', function ( e ) {\n\t\t\t\te.preventDefault();\n\t\t\t\t$( '#em-bookings-table-settings' ).dialog( 'open' );\n\t\t\t} );\n\t\t\t//Export Overlay\n\t\t\t$( '#em-bookings-table-export' ).dialog( em_bookings_export_dialog );\n\t\t\t$( document ).on( 'click', '#em-bookings-table-export-trigger', function ( e ) {\n\t\t\t\te.preventDefault();\n\t\t\t\t$( '#em-bookings-table-export' ).dialog( 'open' );\n\t\t\t} );\n\t\t\tlet export_overlay_show_tickets = function () {\n\t\t\t\tif ( $( '#em-bookings-table-export-form input[name=show_tickets]' ).is( ':checked' ) ) {\n\t\t\t\t\t$( '#em-bookings-table-export-form .em-bookings-col-item-ticket' ).show();\n\t\t\t\t\t$(\n\t\t\t\t\t\t'#em-bookings-table-export-form #em-bookings-export-cols-active .em-bookings-col-item-ticket input'\n\t\t\t\t\t).val( 1 );\n\t\t\t\t} else {\n\t\t\t\t\t$( '#em-bookings-table-export-form .em-bookings-col-item-ticket' ).hide().find( 'input' ).val( 0 );\n\t\t\t\t}\n\t\t\t};\n\t\t\t//Sync export overlay with table search field changes\n\t\t\t$( '#em-bookings-table form select' ).each( function ( i, el ) {\n\t\t\t\t$( el ).on( 'change', function ( e ) {\n\t\t\t\t\tlet select_el = $( this );\n\t\t\t\t\tlet input_par = $( '#em-bookings-table-export-form input[name=' + select_el.attr( 'name' ) + ']' );\n\t\t\t\t\tlet input_par_selected = select_el.find( 'option:selected' );\n\t\t\t\t\tinput_par.val( input_par_selected.val() );\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t\texport_overlay_show_tickets();\n\t\t\t$( '#em-bookings-table-export-form input[name=show_tickets]' ).on( 'click', export_overlay_show_tickets );\n\t\t\t//Sortables\n\t\t\t$( '.em-bookings-cols-sortable' )\n\t\t\t\t.sortable( {\n\t\t\t\t\tconnectWith: '.em-bookings-cols-sortable',\n\t\t\t\t\tupdate: function ( event, ui ) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tui.item.parents( 'ul#em-bookings-cols-active, ul#em-bookings-export-cols-active' ).length >\n\t\t\t\t\t\t\t0\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tui.item\n\t\t\t\t\t\t\t\t.addClass( 'ui-state-highlight' )\n\t\t\t\t\t\t\t\t.removeClass( 'ui-state-default' )\n\t\t\t\t\t\t\t\t.children( 'input' )\n\t\t\t\t\t\t\t\t.val( 1 );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tui.item\n\t\t\t\t\t\t\t\t.addClass( 'ui-state-default' )\n\t\t\t\t\t\t\t\t.removeClass( 'ui-state-highlight' )\n\t\t\t\t\t\t\t\t.children( 'input' )\n\t\t\t\t\t\t\t\t.val( 0 );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t} )\n\t\t\t\t.disableSelection();\n\t\t\tload_ui_css = true;\n\t\t}\n\t\t//Widgets and filter submissions\n\t\t$( document ).on( 'submit', '#em-bookings-table form.bookings-filter', function ( e ) {\n\t\t\tlet el = $( this );\n\t\t\t//append loading spinner\n\t\t\tel.parents( '#em-bookings-table' ).find( '.table-wrap' ).first().append( '<div id=\"em-loading\" />' );\n\t\t\t//ajax call\n\t\t\t$.post( EM.ajaxurl, el.serializeArray(), function ( data ) {\n\t\t\t\tlet root = el.parents( '#em-bookings-table' ).first();\n\t\t\t\troot.replaceWith( data );\n\t\t\t\t//recreate overlays\n\t\t\t\t$( '#em-bookings-table-export input[name=scope]' ).val( root.find( 'select[name=scope]' ).val() );\n\t\t\t\t$( '#em-bookings-table-export input[name=status]' ).val( root.find( 'select[name=status]' ).val() );\n\t\t\t\tjQuery( document ).triggerHandler( 'em_bookings_filtered', [ data, root, el ] );\n\t\t\t} );\n\t\t\treturn false;\n\t\t} );\n\t\t//Approve/Reject Links\n\t\t$( document ).on(\n\t\t\t'click',\n\t\t\t'.em-bookings-approve,.em-bookings-reject,.em-bookings-unapprove,.em-bookings-delete',\n\t\t\tfunction () {\n\t\t\t\tlet el = $( this );\n\t\t\t\tif ( el.hasClass( 'em-bookings-delete' ) && ! confirm( EM.booking_delete ) ) return false;\n\t\t\t\tlet url = em_ajaxify( el.attr( 'href' ) );\n\t\t\t\tlet td = el.parents( 'td' ).first();\n\t\t\t\ttd.html( EM.txt_loading );\n\t\t\t\ttd.load( url );\n\t\t\t\treturn false;\n\t\t\t}\n\t\t);\n\t}\n\t//Old Bookings Table - depreciating soon\n\tif ( $( '.em_bookings_events_table' ).length > 0 ) {\n\t\t//Widgets and filter submissions\n\t\t$( document ).on( 'submit', '.em_bookings_events_table form', function ( e ) {\n\t\t\tlet el = $( this );\n\t\t\tlet url = em_ajaxify( el.attr( 'action' ) );\n\t\t\tel.parents( '.em_bookings_events_table' ).find( '.table-wrap' ).first().append( '<div id=\"em-loading\" />' );\n\t\t\t$.get( url, el.serializeArray(), function ( data ) {\n\t\t\t\tel.parents( '.em_bookings_events_table' ).first().replaceWith( data );\n\t\t\t} );\n\t\t\treturn false;\n\t\t} );\n\t\t//Pagination link clicks\n\t\t$( document ).on( 'click', '.em_bookings_events_table .tablenav-pages a', function () {\n\t\t\tlet el = $( this );\n\t\t\tlet url = em_ajaxify( el.attr( 'href' ) );\n\t\t\tel.parents( '.em_bookings_events_table' ).find( '.table-wrap' ).first().append( '<div id=\"em-loading\" />' );\n\t\t\t$.get( url, function ( data ) {\n\t\t\t\tel.parents( '.em_bookings_events_table' ).first().replaceWith( data );\n\t\t\t} );\n\t\t\treturn false;\n\t\t} );\n\t}\n\n\t//Manual Booking\n\t$( document ).on( 'click', 'a.em-booking-button', function ( e ) {\n\t\te.preventDefault();\n\t\tlet button = $( this );\n\t\tif ( button.text() != EM.bb_booked && $( this ).text() != EM.bb_booking ) {\n\t\t\tbutton.text( EM.bb_booking );\n\t\t\tlet button_data = button.attr( 'id' ).split( '_' );\n\t\t\t$.ajax( {\n\t\t\t\turl: EM.ajaxurl,\n\t\t\t\tdataType: 'jsonp',\n\t\t\t\tdata: {\n\t\t\t\t\tevent_id: button_data[ 1 ],\n\t\t\t\t\t_wpnonce: button_data[ 2 ],\n\t\t\t\t\taction: 'booking_add_one',\n\t\t\t\t},\n\t\t\t\tsuccess: function ( response, statusText, xhr, $form ) {\n\t\t\t\t\tif ( response.result ) {\n\t\t\t\t\t\tbutton.text( EM.bb_booked );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbutton.text( EM.bb_error );\n\t\t\t\t\t}\n\t\t\t\t\tif ( response.message != '' ) alert( response.message );\n\t\t\t\t\t$( document ).triggerHandler( 'em_booking_button_response', [ response, button ] );\n\t\t\t\t},\n\t\t\t\terror: function () {\n\t\t\t\t\tbutton.text( EM.bb_error );\n\t\t\t\t},\n\t\t\t} );\n\t\t}\n\t\treturn false;\n\t} );\n\t$( document ).on( 'click', 'a.em-cancel-button', function ( e ) {\n\t\te.preventDefault();\n\t\tlet button = $( this );\n\t\tif ( button.text() != EM.bb_cancelled && button.text() != EM.bb_canceling ) {\n\t\t\tbutton.text( EM.bb_canceling );\n\t\t\tlet button_data = button.attr( 'id' ).split( '_' );\n\t\t\t$.ajax( {\n\t\t\t\turl: EM.ajaxurl,\n\t\t\t\tdataType: 'jsonp',\n\t\t\t\tdata: {\n\t\t\t\t\tbooking_id: button_data[ 1 ],\n\t\t\t\t\t_wpnonce: button_data[ 2 ],\n\t\t\t\t\taction: 'booking_cancel',\n\t\t\t\t},\n\t\t\t\tsuccess: function ( response, statusText, xhr, $form ) {\n\t\t\t\t\tif ( response.result ) {\n\t\t\t\t\t\tbutton.text( EM.bb_cancelled );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbutton.text( EM.bb_cancel_error );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function () {\n\t\t\t\t\tbutton.text( EM.bb_cancel_error );\n\t\t\t\t},\n\t\t\t} );\n\t\t}\n\t\treturn false;\n\t} );\n\n\tif ( load_ui_css ) em_load_jquery_css();\n\n\t//previously in em-admin.php\n\tfunction updateIntervalDescriptor() {\n\t\t$( '.interval-desc' ).hide();\n\t\tlet number = '-plural';\n\t\tif ( $( 'input#recurrence-interval' ).val() == 1 || $( 'input#recurrence-interval' ).val() == '' )\n\t\t\tnumber = '-singular';\n\t\tlet descriptor = 'span#interval-' + $( 'select#recurrence-frequency' ).val() + number;\n\t\t$( descriptor ).show();\n\t}\n\tfunction updateIntervalSelectors() {\n\t\t$( 'p.alternate-selector' ).hide();\n\t\t$( 'p#' + $( 'select#recurrence-frequency' ).val() + '-selector' ).show();\n\t}\n\tfunction updateShowHideRecurrence() {\n\t\tif ( $( 'input#event-recurrence' ).is( ':checked' ) ) {\n\t\t\t$( '#event_recurrence_pattern' ).fadeIn();\n\t\t\t$( '#event-date-explanation' ).hide();\n\t\t\t$( '#recurrence-dates-explanation' ).show();\n\t\t\t$( 'h3#recurrence-dates-title' ).show();\n\t\t\t$( 'h3#event-date-title' ).hide();\n\t\t} else {\n\t\t\t$( '#event_recurrence_pattern' ).hide();\n\t\t\t$( '#recurrence-dates-explanation' ).hide();\n\t\t\t$( '#event-date-explanation' ).show();\n\t\t\t$( 'h3#recurrence-dates-title' ).hide();\n\t\t\t$( 'h3#event-date-title' ).show();\n\t\t}\n\t}\n\t$( '#recurrence-dates-explanation' ).hide();\n\t$( '#date-to-submit' ).hide();\n\t$( '#end-date-to-submit' ).hide();\n\n\t$( '#localised-date' ).show();\n\t$( '#localised-end-date' ).show();\n\n\t$( '#em-wrapper input.select-all' ).on( 'change', function () {\n\t\tif ( $( this ).is( ':checked' ) ) {\n\t\t\t$( 'input.row-selector' ).prop( 'checked', true );\n\t\t\t$( 'input.select-all' ).prop( 'checked', true );\n\t\t} else {\n\t\t\t$( 'input.row-selector' ).prop( 'checked', false );\n\t\t\t$( 'input.select-all' ).prop( 'checked', false );\n\t\t}\n\t} );\n\n\tupdateIntervalDescriptor();\n\tupdateIntervalSelectors();\n\tupdateShowHideRecurrence();\n\t$( 'input#event-recurrence' ).on( 'change', updateShowHideRecurrence );\n\n\t// recurrency elements\n\t$( 'input#recurrence-interval' ).on( 'keyup', updateIntervalDescriptor );\n\t$( 'select#recurrence-frequency' ).on( 'change', updateIntervalDescriptor );\n\t$( 'select#recurrence-frequency' ).on( 'change', updateIntervalSelectors );\n\n\t/* Location Type Selection */\n\t$( '.em-location-types .em-location-types-select' )\n\t\t.on( 'change', function () {\n\t\t\tlet el = $( this );\n\t\t\tif ( el.val() == 0 ) {\n\t\t\t\t$( '.em-location-type' ).hide();\n\t\t\t} else {\n\t\t\t\tlet location_type = el.find( 'option:selected' ).data( 'display-class' );\n\t\t\t\t$( '.em-location-type' ).hide();\n\t\t\t\t$( '.em-location-type.' + location_type ).show();\n\t\t\t\tif ( location_type != 'em-location-type-place' ) {\n\t\t\t\t\tjQuery( '#em-location-reset a' ).trigger( 'click' );\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ( el.data( 'active' ) !== '' && el.val() !== el.data( 'active' ) ) {\n\t\t\t\t$( '.em-location-type-delete-active-alert' ).hide();\n\t\t\t\t$( '.em-location-type-delete-active-alert' ).show();\n\t\t\t} else {\n\t\t\t\t$( '.em-location-type-delete-active-alert' ).hide();\n\t\t\t}\n\t\t} )\n\t\t.trigger( 'change' );\n\n\t//Finally, add autocomplete here\n\t//Autocomplete\n\tif ( jQuery( 'div.em-location-data input#location-name' ).length > 0 ) {\n\t\tjQuery( 'div.em-location-data input#location-name' )\n\t\t\t.autocomplete( {\n\t\t\t\tsource: EM.locationajaxurl,\n\t\t\t\tminLength: 2,\n\t\t\t\tfocus: function ( event, ui ) {\n\t\t\t\t\tjQuery( 'input#location-id' ).val( ui.item.value );\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\tselect: function ( event, ui ) {\n\t\t\t\t\tjQuery( 'input#location-id' ).val( ui.item.id ).trigger( 'change' );\n\t\t\t\t\tjQuery( 'input#location-name' ).val( ui.item.value );\n\t\t\t\t\tjQuery( 'input#location-address' ).val( ui.item.address );\n\t\t\t\t\tjQuery( 'input#location-town' ).val( ui.item.town );\n\t\t\t\t\tjQuery( 'input#location-state' ).val( ui.item.state );\n\t\t\t\t\tjQuery( 'input#location-region' ).val( ui.item.region );\n\t\t\t\t\tjQuery( 'input#location-postcode' ).val( ui.item.postcode );\n\t\t\t\t\tjQuery( 'input#location-latitude' ).val( ui.item.latitude );\n\t\t\t\t\tjQuery( 'input#location-longitude' ).val( ui.item.longitude );\n\t\t\t\t\tif ( ui.item.country == '' ) {\n\t\t\t\t\t\tjQuery( 'select#location-country option:selected' ).removeAttr( 'selected' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tjQuery( 'select#location-country option[value=\"' + ui.item.country + '\"]' ).attr(\n\t\t\t\t\t\t\t'selected',\n\t\t\t\t\t\t\t'selected'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tjQuery( 'div.em-location-data input' ).css( 'background-color', '#ccc' ).prop( 'readonly', true );\n\t\t\t\t\tjQuery( 'div.em-location-data select' )\n\t\t\t\t\t\t.css( 'background-color', '#ccc' )\n\t\t\t\t\t\t.css( 'color', '#666666' )\n\t\t\t\t\t\t.prop( 'disabled', true );\n\t\t\t\t\tjQuery( '#em-location-reset' ).show();\n\t\t\t\t\tjQuery( '#em-location-search-tip' ).hide();\n\t\t\t\t\tjQuery( document ).triggerHandler( 'em_locations_autocomplete_selected', [ event, ui ] );\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t} )\n\t\t\t.data( 'ui-autocomplete' )._renderItem = function ( ul, item ) {\n\t\t\tlet html_val =\n\t\t\t\t'<a>' +\n\t\t\t\tem_esc_attr( item.label ) +\n\t\t\t\t'<br><span style=\"font-size:11px\"><em>' +\n\t\t\t\tem_esc_attr( item.address ) +\n\t\t\t\t', ' +\n\t\t\t\tem_esc_attr( item.town ) +\n\t\t\t\t'</em></span></a>';\n\t\t\treturn jQuery( '<li></li>' ).data( 'item.autocomplete', item ).append( html_val ).appendTo( ul );\n\t\t};\n\t\tjQuery( '#em-location-reset a' ).on( 'click', function () {\n\t\t\tjQuery( 'div.em-location-data input' ).val( '' ).prop( 'readonly', false );\n\t\t\tjQuery( 'div.em-location-data select' ).prop( 'disabled', false );\n\t\t\tjQuery( 'div.em-location-data option:selected' ).removeAttr( 'selected' );\n\t\t\tjQuery( 'input#location-id' ).val( '' );\n\t\t\tjQuery( '#em-location-reset' ).hide();\n\t\t\tjQuery( '#em-location-search-tip' ).show();\n\t\t\tjQuery( '#em-map' ).hide();\n\t\t\tjQuery( '#em-map-404' ).show();\n\t\t\tif ( typeof marker !== 'undefined' ) {\n\t\t\t\tmarker.setPosition( new google.maps.LatLng( 0, 0 ) );\n\t\t\t\tinfoWindow.close();\n\t\t\t\tmarker.setDraggable( true );\n\t\t\t}\n\t\t\treturn false;\n\t\t} );\n\t\tif ( jQuery( 'input#location-id' ).val() != '0' && jQuery( 'input#location-id' ).val() != '' ) {\n\t\t\tjQuery( 'div.em-location-data input' ).prop( 'readonly', true );\n\t\t\tjQuery( 'div.em-location-data select' ).prop( 'disabled', true );\n\t\t\tjQuery( '#em-location-reset' ).show();\n\t\t\tjQuery( '#em-location-search-tip' ).hide();\n\t\t}\n\t}\n\t/* Local JS Timezone related placeholders */\n\t/* Moment JS Timzeone PH */\n\tif ( window.moment ) {\n\t\tlet replace_specials = function ( day, string ) {\n\t\t\t// replace things not supported by moment\n\t\t\tstring = string.replace( /##T/g, Intl.DateTimeFormat().resolvedOptions().timeZone );\n\t\t\tstring = string.replace( /#T/g, 'GMT' + day.format( 'Z' ) );\n\t\t\tstring = string.replace( /###t/g, day.utcOffset() * -60 );\n\t\t\tstring = string.replace( /##t/g, day.isDST() );\n\t\t\tstring = string.replace( /#t/g, day.daysInMonth() );\n\t\t\treturn string;\n\t\t};\n\t\t$( '.em-date-momentjs' ).each( function () {\n\t\t\t// Start Date\n\t\t\tlet el = $( this );\n\t\t\tlet day_start = moment.unix( el.data( 'date-start' ) );\n\t\t\tlet date_start_string = replace_specials( day_start, day_start.format( el.data( 'date-format' ) ) );\n\t\t\tif ( el.data( 'date-start' ) !== el.data( 'date-end' ) ) {\n\t\t\t\t// End Date\n\t\t\t\tlet day_end = moment.unix( el.data( 'date-end' ) );\n\t\t\t\tlet day_end_string = replace_specials( day_start, day_end.format( el.data( 'date-format' ) ) );\n\t\t\t\t// Output\n\t\t\t\tlet date_string = date_start_string + el.data( 'date-separator' ) + day_end_string;\n\t\t\t} else {\n\t\t\t\tlet date_string = date_start_string;\n\t\t\t}\n\t\t\tel.text( date_string );\n\t\t} );\n\t\tlet get_date_string = function ( ts, format ) {\n\t\t\tlet date = new Date( ts * 1000 );\n\t\t\tlet minutes = date.getMinutes();\n\t\t\tif ( format == 24 ) {\n\t\t\t\tlet hours = date.getHours();\n\t\t\t\thours = hours < 10 ? '0' + hours : hours;\n\t\t\t\tminutes = minutes < 10 ? '0' + minutes : minutes;\n\t\t\t\treturn hours + ':' + minutes;\n\t\t\t} else {\n\t\t\t\tlet hours = date.getHours() % 12;\n\t\t\t\tlet ampm = hours >= 12 ? 'PM' : 'AM';\n\t\t\t\tif ( hours === 0 ) hours = 12; // the hour '0' should be '12'\n\t\t\t\tminutes = minutes < 10 ? '0' + minutes : minutes;\n\t\t\t\treturn hours + ':' + minutes + ' ' + ampm;\n\t\t\t}\n\t\t};\n\t\t$( '.em-time-localjs' ).each( function () {\n\t\t\tlet el = $( this );\n\t\t\tlet strTime = get_date_string( el.data( 'time' ), el.data( 'time-format' ) );\n\t\t\tif ( el.data( 'time-end' ) ) {\n\t\t\t\tlet separator = el.data( 'time-separator' ) ? el.data( 'time-separator' ) : ' - ';\n\t\t\t\tstrTime = strTime + separator + get_date_string( el.data( 'time-end' ), el.data( 'time-format' ) );\n\t\t\t}\n\t\t\tel.text( strTime );\n\t\t} );\n\t}\n\t/* Done! */\n\tjQuery( document ).triggerHandler( 'em_javascript_loaded' );\n} );\n\nfunction em_load_jquery_css() {\n\tif ( EM.ui_css && jQuery( 'link#jquery-ui-css' ).length == 0 ) {\n\t\tlet script = document.createElement( 'link' );\n\t\tscript.id = 'jquery-ui-css';\n\t\tscript.rel = 'stylesheet';\n\t\tscript.href = EM.ui_css;\n\t\tdocument.body.appendChild( script );\n\t}\n}\n\n/* Useful function for adding the em_ajax flag to a url, regardless of querystring format */\nlet em_ajaxify = function ( url ) {\n\tif ( url.search( 'em_ajax=0' ) != -1 ) {\n\t\turl = url.replace( 'em_ajax=0', 'em_ajax=1' );\n\t} else if ( url.search( /\\?/ ) != -1 ) {\n\t\turl = url + '&em_ajax=1';\n\t} else {\n\t\turl = url + '?em_ajax=1';\n\t}\n\treturn url;\n};\n\nfunction em_esc_attr( str ) {\n\tif ( typeof str !== 'string' ) return '';\n\treturn str.replace( /</gi, '&lt;' ).replace( />/gi, '&gt;' );\n}\n\n// TODO: Put this in extra file\nlet EventsManager = {\n\tinit: () => {\n\t\tEventsManager.autofillDate();\n\t\tEventsManager.autofillTime();\n\t\tEventsManager.lockTime();\n\t},\n\n\tgetElementByName: ( element ) => {\n\t\tlet elements = document.getElementsByName( element );\n\t\tif ( elements.length ) {\n\t\t\treturn elements[ 0 ];\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\n\tautofillDate: () => {\n\t\tconst dateStartSelector = EventsManager.getElementByName( 'event_start_date' );\n\t\tconst dateEndSelector = EventsManager.getElementByName( 'event_end_date' );\n\t\tif ( dateStartSelector && dateEndSelector ) {\n\t\t\tdateStartSelector.addEventListener( 'change', ( event ) => {\n\t\t\t\tif ( dateEndSelector.value == '' ) {\n\t\t\t\t\tdateEndSelector.value = dateStartSelector.value;\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t},\n\n\tautofillTime: () => {\n\t\tconst timeStartSelector = EventsManager.getElementByName( 'event_start_time' );\n\t\tconst timeEndSelector = EventsManager.getElementByName( 'event_end_time' );\n\t\tif ( timeStartSelector && timeEndSelector ) {\n\t\t\ttimeStartSelector.addEventListener( 'change', ( event ) => {\n\t\t\t\tif ( timeEndSelector.value == '00:00' ) {\n\t\t\t\t\ttimeEndSelector.value = timeStartSelector.value;\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t},\n\n\tlockTime: () => {\n\t\tconst allDaySelector = EventsManager.getElementByName( 'event_all_day' );\n\t\tconst timeStartSelector = EventsManager.getElementByName( 'event_start_time' );\n\t\tconst timeEndSelector = EventsManager.getElementByName( 'event_end_time' );\n\t\tif ( allDaySelector ) {\n\t\t\tallDaySelector.addEventListener( 'change', ( event ) => {\n\t\t\t\ttimeStartSelector.disabled = allDaySelector.checked;\n\t\t\t\ttimeEndSelector.disabled = allDaySelector.checked;\n\t\t\t} );\n\t\t}\n\t},\n};\n\ndocument.addEventListener( 'DOMContentLoaded', EventsManager.init, false );\n\nfunction em_custom_mails() {\n\tlet trigger_selector = document.querySelectorAll( '.em-nav-item' );\n\tif ( trigger_selector.length == 0 ) return;\n\tif ( trigger_selector.length == 1 ) {\n\t\tdocument.querySelector( '.em-nav-side' )?.classList.add( 'hidden' );\n\t\tdocument.querySelector( '.em-nav-content' )?.classList.remove( 'hidden' );\n\t\treturn;\n\t}\n\n\t//add listener to triggers for groups and subgroups\n\ttrigger_selector.forEach( ( element ) => {\n\t\telement.addEventListener( 'click', ( event ) => {\n\t\t\ttrigger_selector.forEach( ( item ) => {\n\t\t\t\titem.classList.remove( 'active' );\n\t\t\t} );\n\t\t\tdocument.querySelectorAll( '.em-nav-content' )?.forEach( ( e ) => {\n\t\t\t\te.classList.add( 'hidden' );\n\t\t\t} );\n\t\t\tevent.target.classList.add( 'active' );\n\t\t\tdocument.querySelector( element.getAttribute( 'rel' ) )?.classList.remove( 'hidden' );\n\t\t} );\n\t} );\n\n\tlet accordion_items = document.querySelectorAll( '.em-accordion-item' );\n\n\taccordion_items.forEach( ( element ) => {\n\t\telement.addEventListener( 'click', ( event ) => {\n\t\t\taccordion_items.forEach( ( item ) => {\n\t\t\t\titem.classList.remove( 'active' );\n\t\t\t} );\n\t\t\tdocument.querySelectorAll( '.em-accordion-content' )?.forEach( ( e ) => {\n\t\t\t\te.classList.add( 'hidden' );\n\t\t\t} );\n\t\t\tevent.target.classList.add( 'active' );\n\t\t\tdocument.getElementById( element.getAttribute( 'rel' ) )?.classList.remove( 'hidden' );\n\t\t} );\n\t} );\n\n\tlet mail_subgroups = document.querySelectorAll( '.em-subgroup-email' );\n\n\tmail_subgroups.forEach( ( element ) => {\n\t\tlet selector = element.querySelector( '.em-cet-status' );\n\t\tlet content = element.querySelector( '.em-mail-vals' );\n\t\tlet indicator = element.querySelector( '.em-mail-status-indicator' );\n\n\t\tselector.addEventListener( 'change', ( event ) => {\n\t\t\tindicator?.setAttribute( 'data-status', event.target.value );\n\t\t\tif ( event.target.value == 1 ) {\n\t\t\t\tcontent.classList.remove( 'hidden' );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcontent.classList.add( 'hidden' );\n\t\t} );\n\t} );\n\n\tdocument.getElementById( 'booking-modal-close' )?.addEventListener( 'click', ( event ) => {\n\t\tlet element = document.getElementById( 'booking-modal' );\n\t\telement.style.display = 'none';\n\t} );\n\n\tdocument.getElementById( 'email-modal-close' )?.addEventListener( 'click', ( event ) => {\n\t\tlet element = document.getElementById( 'email-modal' );\n\t\telement.style.display = 'none';\n\t} );\n}\n\ndocument.addEventListener( 'DOMContentLoaded', em_custom_mails, false );\n\ndocument.addEventListener( 'DOMContentLoaded', () => {\n\tdocument.body.addEventListener( 'click', ( event ) => {\n\t\tif ( event.target.classList.contains( 'em-bookings-approve-offline' ) && ! confirm( EM.offline_confirm ) ) {\n\t\t\tevent.stopPropagation();\n\t\t\tevent.stopImmediatePropagation();\n\t\t\tevent.preventDefault();\n\t\t\treturn false;\n\t\t}\n\t} );\n\n\tdocument.body.addEventListener( 'click', ( event ) => {\n\t\tif ( event.target.classList.contains( 'em-transaction-delete' ) ) {\n\t\t\tconst el = event.target;\n\t\t\tif ( ! confirm( EM.transaction_delete ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst url = em_ajaxify( el.attr( 'href' ) );\n\t\t\tlet td = el.parents( 'td' ).first();\n\t\t\ttd.html( EM.txt_loading );\n\t\t\ttd.load( url );\n\t\t\treturn false;\n\t\t}\n\t} );\n} );\n"],"names":["jQuery","document","ready","$","load_ui_css","each","i","el","addClass","next","parent","on","confirm","window","location","href","is","closest","find","hide","show","event","form","first","val","warning_text","EM","event_reschedule_warning","event_recurrence_bookings","event_recurrence_overwrite","confirmation","preventDefault","e","trigger","data","removeClass","siblings","length","checked","disable_bookings_warning","fadeIn","reset_ticket_forms","tickets","rowNo","slot","clone","attr","appendTo","index","replace","datepicker","removeAttr","off","em_timepickerObj","em_timepicker","em_setup_datepicker","em_setup_timepicker","animate","scrollTop","offset","top","check_ticket_sortability","tbody","text","prepend","classname","triggerHandler","hasClass","toggleClass","show_advanced","value","getJSON","em_ajax_action","id","result","remove","alert","error","sortable","items","placeholder","handle","helper","tds","children","append","em_tickets","parents","match","pno","em_bookings_settings_dialog","modal","autoOpen","minWidth","height","buttons","bookings_settings_save","click","booking_form_cols","item_match","name","dialog","em_bookings_export_dialog","bookings_export_save","export_overlay_show_tickets","select_el","input_par","input_par_selected","connectWith","update","ui","item","disableSelection","post","ajaxurl","serializeArray","root","replaceWith","booking_delete","url","em_ajaxify","td","html","txt_loading","load","get","button","bb_booked","bb_booking","button_data","split","ajax","dataType","event_id","_wpnonce","action","success","response","statusText","xhr","$form","bb_error","message","bb_cancelled","bb_canceling","booking_id","bb_cancel_error","em_load_jquery_css","updateIntervalDescriptor","number","descriptor","updateIntervalSelectors","updateShowHideRecurrence","prop","location_type","autocomplete","source","locationajaxurl","minLength","focus","select","address","town","state","region","postcode","latitude","longitude","country","css","_renderItem","ul","html_val","em_esc_attr","label","marker","setPosition","google","maps","LatLng","infoWindow","close","setDraggable","moment","replace_specials","day","string","Intl","DateTimeFormat","resolvedOptions","timeZone","format","utcOffset","isDST","daysInMonth","day_start","unix","date_start_string","day_end","day_end_string","date_string","get_date_string","ts","date","Date","minutes","getMinutes","hours","getHours","ampm","strTime","separator","ui_css","script","createElement","rel","body","appendChild","search","str","EventsManager","init","autofillDate","autofillTime","lockTime","getElementByName","element","elements","getElementsByName","dateStartSelector","dateEndSelector","addEventListener","timeStartSelector","timeEndSelector","allDaySelector","disabled","em_custom_mails","trigger_selector","querySelectorAll","querySelector","classList","add","forEach","target","getAttribute","accordion_items","getElementById","mail_subgroups","selector","content","indicator","setAttribute","style","display","contains","offline_confirm","stopPropagation","stopImmediatePropagation","transaction_delete"],"sourceRoot":""}