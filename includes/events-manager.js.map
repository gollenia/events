{"version":3,"file":"events-manager.js","mappings":"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","sources":["webpack:///./classes/events_manager.css?41d3","webpack:///webpack/bootstrap","webpack:///webpack/runtime/make namespace object","webpack:///./classes/events-manager.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport {};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import \"./events_manager.css\"\n\njQuery(document).ready( function($){\n\tlet load_ui_css = false; //load jquery ui css?\n\t/* Time Entry */\n\t$('#start-time').each(function(i, el){\n\t\t$(el).addClass('em-time-input em-time-start').next('#end-time').addClass('em-time-input em-time-end').parent().addClass('em-time-range');\n\t});\n\t\n\t/* Calendar AJAX */\n\t$('.em-calendar-wrapper a').off(\"click\");\n\t$('.em-calendar-wrapper').on('click', 'a.em-calnav, a.em-calnav', function(e){\n\t\te.preventDefault();\n\t\t$(this).closest('.em-calendar-wrapper').prepend('<div class=\"loading\" id=\"em-loading\"></div>');\n\t\tlet url = em_ajaxify($(this).attr('href'));\n\t\t$(this).closest('.em-calendar-wrapper').load(url, function(){$(this).trigger('em_calendar_load');});\n\t} );\n\n\t//Events Search\n\t$(document).on('click change', '.em-toggle', function(e){\n\t\te.preventDefault();\n\t\t//show or hide advanced tickets, hidden by default\n\t\tlet el = $(this);\n\t\tlet rel = el.attr('rel').split(':');\n\t\tif( el.hasClass('show-search') ){\n\t\t\tif( rel.length > 1 ){ el.closest(rel[1]).find(rel[0]).slideUp(); }\n\t\t\telse{ $(rel[0]).slideUp(); }\n\t\t\tel.find('.show, .show-advanced').show();\n\t\t\tel.find('.hide, .hide-advanced').hide();\n\t\t\tel.removeClass('show-search');\n\t\t}else{\n\t\t\tif( rel.length > 1 ){ el.closest(rel[1]).find(rel[0]).slideDown(); }\n\t\t\telse{ $(rel[0]).slideDown(); }\n\t\t\tel.find('.show, .show-advanced').hide();\n\t\t\tel.find('.hide, .hide-advanced').show();\n\t\t\tel.addClass('show-search');\n\t\t}\n\t\t\n\t});\n\tif( EM.search_term_placeholder ){\n\t\tif( 'placeholder' in document.createElement('input') ){\n\t\t\t$('input.em-events-search-text, input.em-search-text').attr('placeholder', EM.search_term_placeholder);\n\t\t}else{\n\t\t\t$('input.em-events-search-text, input.em-search-text').on('blur', function(){\n\t\t\t\tif( this.value=='' ) this.value = EM.search_term_placeholder;\n\t\t\t}).on('focus', function(){\n\t\t\t\tif( this.value == EM.search_term_placeholder ) this.value='';\n\t\t\t}).trigger('blur');\n\t\t}\n\t}\n\t$('.em-search-form select[name=country]').on('change', function(){\n\t\tlet el = $(this);\n\t\t$('.em-search select[name=state]').html('<option value=\"\">'+EM.txt_loading+'</option>');\n\t\t$('.em-search select[name=region]').html('<option value=\"\">'+EM.txt_loading+'</option>');\n\t\t$('.em-search select[name=town]').html('<option value=\"\">'+EM.txt_loading+'</option>');\n\t\tif( el.val() != '' ){\n\t\t\tel.closest('.em-search-location').find('.em-search-location-meta').slideDown();\n\t\t\tlet data = {\n\t\t\t\taction : 'search_states',\n\t\t\t\tcountry : el.val(),\n\t\t\t\treturn_html : true\n\t\t\t};\n\t\t\t$('.em-search select[name=state]').load( EM.ajaxurl, data );\n\t\t\tdata.action = 'search_regions';\n\t\t\t$('.em-search select[name=region]').load( EM.ajaxurl, data );\n\t\t\tdata.action = 'search_towns';\n\t\t\t$('.em-search select[name=town]').load( EM.ajaxurl, data );\n\t\t}else{\n\t\t\tel.closest('.em-search-location').find('.em-search-location-meta').slideUp();\n\t\t}\n\t});\n\n\t$('.em-search-form select[name=region]').on('change', function(){\n\t\t$('.em-search select[name=state]').html('<option value=\"\">'+EM.txt_loading+'</option>');\n\t\t$('.em-search select[name=town]').html('<option value=\"\">'+EM.txt_loading+'</option>');\n\t\tlet data = {\n\t\t\taction : 'search_states',\n\t\t\tregion : $(this).val(),\n\t\t\tcountry : $('.em-search-form select[name=country]').val(),\n\t\t\treturn_html : true\n\t\t};\n\t\t$('.em-search select[name=state]').load( EM.ajaxurl, data );\n\t\tdata.action = 'search_towns';\n\t\t$('.em-search select[name=town]').load( EM.ajaxurl, data );\n\t});\n\n\t$('.em-search-form select[name=state]').on('change', function(){\n\t\t$('.em-search select[name=town]').html('<option value=\"\">'+EM.txt_loading+'</option>');\n\t\tlet data = {\n\t\t\taction : 'search_towns',\n\t\t\tstate : $(this).val(),\n\t\t\tregion : $('.em-search-form select[name=region]').val(),\n\t\t\tcountry : $('.em-search-form select[name=country]').val(),\n\t\t\treturn_html : true\n\t\t};\n\t\t$('.em-search select[name=town]').load( EM.ajaxurl, data );\n\t});\n\t\n\t//in order for this to work, you need the above classes to be present in your templates\n\t$(document).on('submit', '.em-search-form, .em-events-search-form', function(e){\n\t\tlet form = $(this);\n    \tif( this.em_search && this.em_search.value == EM.txt_search){ this.em_search.value = ''; }\n    \tlet results_wrapper = form.closest('.em-search-wrapper').find('.em-search-ajax');\n    \tif( results_wrapper.length == 0 ) results_wrapper = $('.em-search-ajax');\n    \tif( results_wrapper.length > 0 ){\n    \t\tresults_wrapper.append('<div class=\"loading\" id=\"em-loading\"></div>');\n    \t\tlet submitButton = form.find('.em-search-submit');\n    \t\tsubmitButton.data('buttonText', submitButton.val()).val(EM.txt_searching);\n    \t\tlet img = submitButton.children('img');\n    \t\tif( img.length > 0 ) img.attr('src', img.attr('src').replace('search-mag.png', 'search-loading.gif'));\n    \t\tlet lets = form.serialize();\n    \t\t$.ajax( EM.ajaxurl, {\n\t\t\t\ttype : 'POST',\n\t    \t\tdataType : 'html',\n\t    \t\tdata : lets,\n\t\t\t    success : function(responseText){\n\t\t\t    \tsubmitButton.val(submitButton.data('buttonText'));\n\t\t\t    \tif( img.length > 0 ) img.attr('src', img.attr('src').replace('search-loading.gif', 'search-mag.png'));\n\t\t    \t\tresults_wrapper.replaceWith(responseText);\n\t\t        \tif( form.find('input[name=em_search]').val() == '' ){ form.find('input[name=em_search]').val(EM.txt_search); }\n\t\t        \t//reload results_wrapper\n\t\t        \tresults_wrapper = form.closest('.em-search-wrapper').find('.em-search-ajax');\n\t\t        \tif( results_wrapper.length == 0 ) results_wrapper = $('.em-search-ajax');\n\t\t\t    \tjQuery(document).triggerHandler('em_search_ajax', [lets, results_wrapper, e]); //ajax has loaded new results\n\t\t\t    }\n\t    \t});\n    \t\te.preventDefault();\n\t\t\treturn false;\n    \t}\n\t});\n\tif( $('.em-search-ajax').length > 0 ){\n\t\t$(document).on('click', '.em-search-ajax a.page-numbers', function(e){\n\t\t\tlet a = $(this);\n\t\t\tlet data = a.closest('.em-pagination').attr('data-em-ajax');\n\t\t\tlet wrapper = a.closest('.em-search-ajax');\n\t\t\tlet wrapper_parent = wrapper.parent();\n\t\t    let qlets = a.attr('href').split('?');\n\t\t    let lets = qlets[1];\n\t\t    //add data-em-ajax att if it exists\n\t\t    if( data != '' ){\n\t\t    \tlets = lets != '' ? lets+'&'+data : data;\n\t\t    }\n\t\t    wrapper.append('<div class=\"loading\" id=\"em-loading\"></div>');\n\t\t    $.ajax( EM.ajaxurl, {\n\t\t\t\ttype : 'POST',\n\t    \t\tdataType : 'html',\n\t    \t\tdata : lets,\n\t\t\t    success : function(responseText) {\n\t\t\t    \twrapper.replaceWith(responseText);\n\t\t\t    \twrapper = wrapper_parent.find('.em-search-ajax');\n\t\t\t    \tjQuery(document).triggerHandler('em_search_ajax', [lets, wrapper, e]); //ajax has loaded new results\n\t\t\t    }\n\t    \t});\n\t\t\te.preventDefault();\n\t\t\treturn false;\n\t\t});\n\t}\n\t\t\n\t/*\n\t * ADMIN AREA AND PUBLIC FORMS (Still polishing this section up, note that form ids and classes may change accordingly)\n\t */\n\t//Events List\n\t\t//Approve/Reject Links\n\t\t$('.events-table').on('click', '.em-event-delete', function(){\n\t\t\tif( !confirm(\"Are you sure you want to delete?\") ){ return false; }\n\t\t\twindow.location.href = this.href;\n\t\t});\n\t//Forms\n\t$('#event-form #event-image-delete, #location-form #location-image-delete').on('click', function(){\n\t\tlet el = $(this);\n\t\tif( el.is(':checked') ){\n\t\t\tel.closest('.event-form-image, .location-form-image').find('#event-image-img, #location-image-img').hide();\n\t\t}else{\n\t\t\tel.closest('.event-form-image, .location-form-image').find('#event-image-img, #location-image-img').show();\n\t\t}\n\t});\n\t//Event Editor \n\t\t//Recurrence Warnings\n\t\t$('#event-form.em-event-admin-recurring').on('submit', function(event){\n\t\t\tlet form = $(this);\n\t\t\tif( form.find('input[name=\"event_reschedule\"]').first().val() == 1 ){\n\t\t\t\tlet warning_text = EM.event_reschedule_warning;\n\t\t\t}else if( form.find('input[name=\"event_recreate_tickets\"]').first().val() == 1 ){\n\t\t\t\tlet warning_text = EM.event_recurrence_bookings;\n\t\t\t}else{\n\t\t\t\tlet warning_text = EM.event_recurrence_overwrite;\n\t\t\t}\n\t\t\tlet confirmation = confirm(warning_text);\n\t\t\tif( confirmation == false ){\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t});\n\t\t//Buttons for recurrence warnings within event editor forms\n\t\t$('.em-reschedule-trigger').on('click', function(e){\n\t\t\te.preventDefault();\n\t\t\tlet trigger = $(this);\n\t\t\ttrigger.closest('.em-recurrence-reschedule').find(trigger.data('target')).removeClass('reschedule-hidden');\n\t\t\ttrigger.siblings('.em-reschedule-value').val(1);\n\t\t\ttrigger.addClass('reschedule-hidden').siblings('a').removeClass('reschedule-hidden');\n\t\t});\n\t\t$('.em-reschedule-cancel').on('click', function(e){\n\t\t\te.preventDefault();\n\t\t\tlet trigger = $(this);\n\t\t\ttrigger.closest('.em-recurrence-reschedule').find(trigger.data('target')).addClass('reschedule-hidden');\n\t\t\ttrigger.siblings('.em-reschedule-value').val(0);\n\t\t\ttrigger.addClass('reschedule-hidden').siblings('a').removeClass('reschedule-hidden');\n\t\t});\n\t//Tickets & Bookings\n\tif( $(\"#em-tickets-form\").length > 0 ){\n\t\t//Enable/Disable Bookings\n\t\t$('#event-rsvp').on('click', function(event){\n\t\t\tif( !this.checked ){\n\t\t\t\tlet confirmation = confirm(EM.disable_bookings_warning);\n\t\t\t\tif( confirmation == false ){\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}else{\n\t\t\t\t\t$('#event-rsvp-options').hide();\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\t$('#event-rsvp-options').fadeIn();\n\t\t\t}\n\t\t});\n\t\tif($('input#event-rsvp').is(\":checked\")) {\n\t\t\t$(\"div#rsvp-data\").fadeIn();\n\t\t} else {\n\t\t\t$(\"div#rsvp-data\").hide();\n\t\t}\n\t\t//Ticket(s) UI\n\t\tlet reset_ticket_forms = function(){\n\t\t\t$('#em-tickets-form table tbody tr.em-tickets-row').show();\n\t\t\t$('#em-tickets-form table tbody tr.em-tickets-row-form').hide();\n\t\t};\n\t\t//recurrences and cut-off logic for ticket availability\n\t\tif( $('#em-recurrence-checkbox').length > 0 ){\n\t\t\t$('#em-recurrence-checkbox').on('change', function(){\n\t\t\t\tif( $('#em-recurrence-checkbox').is(':checked') ){\n\t\t\t\t\t$('#em-tickets-form .ticket-dates-from-recurring, #em-tickets-form .ticket-dates-to-recurring, #event-rsvp-options .em-booking-date-recurring').show();\n\t\t\t\t\t$('#em-tickets-form .ticket-dates-from-normal, #em-tickets-form .ticket-dates-to-normal, #event-rsvp-options .em-booking-date-normal, #em-tickets-form .hidden').hide();\n\t\t\t\t}else{\n\t\t\t\t\t$('#em-tickets-form .ticket-dates-from-normal, #em-tickets-form .ticket-dates-to-normal, #event-rsvp-options .em-booking-date-normal').show();\n\t\t\t\t\t$('#em-tickets-form .ticket-dates-from-recurring, #em-tickets-form .ticket-dates-to-recurring, #event-rsvp-options .em-booking-date-recurring, #em-tickets-form .hidden').hide();\n\t\t\t\t}\n\t\t\t}).trigger('change');\n\t\t}else if( $('#em-form-recurrence').length > 0 ){\n\t\t\t$('#em-tickets-form .ticket-dates-from-recurring, #em-tickets-form .ticket-dates-to-recurring, #event-rsvp-options .em-booking-date-recurring').show();\n\t\t\t$('#em-tickets-form .ticket-dates-from-normal, #em-tickets-form .ticket-dates-to-normal, #event-rsvp-options .em-booking-date-normal, #em-tickets-form .hidden').hide();\n\t\t}else{\n\t\t\t$('#em-tickets-form .ticket-dates-from-recurring, #em-tickets-form .ticket-dates-to-recurring, #event-rsvp-options .em-booking-date-recurring, #em-tickets-form .hidden').hide();\n\t\t}\n\t\t//Add a new ticket\n\t\t$(\"#em-tickets-add\").on('click', function(e){\n\t\t\te.preventDefault();\n\t\t\treset_ticket_forms();\n\t\t\t//create copy of template slot, insert so ready for population\n\t\t\tlet tickets = $('#em-tickets-form table tbody');\n\t\t\tlet rowNo = tickets.length+1;\n\t\t\tlet slot = tickets.first('.em-ticket-template').clone(true).attr('id','em-ticket-'+ rowNo).removeClass('em-ticket-template').addClass('em-ticket').appendTo($('#em-tickets-form table'));\n\t\t\t//change the index of the form element names\n\t\t\tslot.find('*[name]').each( function(index,el){\n\t\t\t\tel = $(el);\n\t\t\t\tel.attr('name', el.attr('name').replace('em_tickets[0]','em_tickets['+rowNo+']'));\n\t\t\t});\n\t\t\t//show ticket and switch to editor\n\t\t\tslot.show().find('.ticket-actions-edit').trigger('click');\n\t\t\t//refresh datepicker and values\n\t\t\tslot.find('.em-date-input-loc').datepicker('destroy').removeAttr('id'); //clear all datepickers\n\t\t\tslot.find('.em-time-input').off().each(function(index, el){\n\t\t\t\tif( typeof this.em_timepickerObj == 'object' ){\n\t\t\t\t\tthis.em_timepicker('remove');\n\t\t\t\t}\n\t\t\t}); //clear all em_timepickers - consequently, also other click/blur/change events, recreate the further down\n\t\t\tem_setup_datepicker(slot);\n\t\t\tem_setup_timepicker(slot);\n\t\t    $('html, body').animate({ scrollTop: slot.offset().top - 30 }); //sends user to form\n\t\t\tcheck_ticket_sortability();\n\t\t});\n\t\t//Edit a Ticket\n\t\t$(document).on('click', '.ticket-actions-edit', function(e){\n\t\t\te.preventDefault();\n\t\t\treset_ticket_forms();\n\t\t\tlet tbody = $(this).closest('tbody');\n\t\t\ttbody.find('tr.em-tickets-row').hide();\n\t\t\ttbody.find('tr.em-tickets-row-form').fadeIn();\n\t\t\treturn false;\n\t\t});\n\t\t$(document).on('click', '.ticket-actions-edited', function(e){\n\t\t\te.preventDefault();\n\t\t\tlet tbody = $(this).closest('tbody');\n\t\t\tlet rowNo = tbody.attr('id').replace('em-ticket-','');\n\t\t\ttbody.find('.em-tickets-row').fadeIn();\n\t\t\ttbody.find('.em-tickets-row-form').hide();\n\t\t\ttbody.find('*[name]').each(function(index,el){\n\t\t\t\tel = $(el);\n\t\t\t\tif( el.attr('name') == 'ticket_start_pub'){\n\t\t\t\t\ttbody.find('span.ticket_start').text(el.val());\n\t\t\t\t}else if( el.attr('name') == 'ticket_end_pub' ){\n\t\t\t\t\ttbody.find('span.ticket_end').text(el.val());\n\t\t\t\t}else if( el.attr('name') == 'em_tickets['+rowNo+'][ticket_type]' ){\n\t\t\t\t\tif( el.find(':selected').val() == 'members' ){\n\t\t\t\t\t\ttbody.find('span.ticket_name').prepend('* ');\n\t\t\t\t\t}\n\t\t\t\t}else if( el.attr('name') == 'em_tickets['+rowNo+'][ticket_start_recurring_days]' ){\n\t\t\t\t\tlet text = tbody.find('select.ticket-dates-from-recurring-when').val() == 'before' ? '-'+el.val():el.val();\n\t\t\t\t\tif( el.val() != '' ){\n\t\t\t\t\t\ttbody.find('span.ticket_start_recurring_days').text(text);\n\t\t\t\t\t\ttbody.find('span.ticket_start_recurring_days_text, span.ticket_start_time').removeClass('hidden').show();\n\t\t\t\t\t}else{\n\t\t\t\t\t\ttbody.find('span.ticket_start_recurring_days').text(' - ');\n\t\t\t\t\t\ttbody.find('span.ticket_start_recurring_days_text, span.ticket_start_time').removeClass('hidden').hide();\n\t\t\t\t\t}\n\t\t\t\t}else if( el.attr('name') == 'em_tickets['+rowNo+'][ticket_end_recurring_days]' ){\n\t\t\t\t\tlet text = tbody.find('select.ticket-dates-to-recurring-when').val() == 'before' ? '-'+el.val():el.val();\n\t\t\t\t\tif( el.val() != '' ){\n\t\t\t\t\t\ttbody.find('span.ticket_end_recurring_days').text(text);\n\t\t\t\t\t\ttbody.find('span.ticket_end_recurring_days_text, span.ticket_end_time').removeClass('hidden').show();\n\t\t\t\t\t}else{\n\t\t\t\t\t\ttbody.find('span.ticket_end_recurring_days').text(' - ');\n\t\t\t\t\t\ttbody.find('span.ticket_end_recurring_days_text, span.ticket_end_time').removeClass('hidden').hide();\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tlet classname = el.attr('name').replace('em_tickets['+rowNo+'][','').replace(']','').replace('[]','');\n\t\t\t\t\ttbody.find('.em-tickets-row .'+classname).text(el.val());\n\t\t\t\t}\n\t\t\t});\n\t\t\t//allow for others to hook into this\n\t\t\t$(document).triggerHandler('em_maps_tickets_edit', [tbody, rowNo, true]);\n\t\t    $('html, body').animate({ scrollTop: tbody.parent().offset().top - 30 }); //sends user back to top of form\n\t\t\treturn false;\n\t\t});\n\t\t$(document).on('change', '.em-ticket-form select.ticket_type', function(e){\n\t\t\t//check if ticket is for all users or members, if members, show roles to limit the ticket to\n\t\t\tlet el = $(this);\n\t\t\tif( el.find('option:selected').val() == 'members' ){\n\t\t\t\tel.closest('.em-ticket-form').find('.ticket-roles').fadeIn();\n\t\t\t}else{\n\t\t\t\tel.closest('.em-ticket-form').find('.ticket-roles').hide();\n\t\t\t}\n\t\t});\n\t\t$(document).on('click', '.em-ticket-form .ticket-options-advanced', function(e){\n\t\t\t//show or hide advanced tickets, hidden by default\n\t\t\te.preventDefault();\n\t\t\tlet el = $(this);\n\t\t\tif( el.hasClass('show') ){\n\t\t\t\tel.closest('.em-ticket-form').find('.em-ticket-form-advanced').fadeIn();\n\t\t\t\tel.find('.show,.show-advanced').hide();\n\t\t\t\tel.find('.hide,.hide-advanced').show();\n\t\t\t}else{\n\t\t\t\tel.closest('.em-ticket-form').find('.em-ticket-form-advanced').hide();\n\t\t\t\tel.find('.show,.show-advanced').show();\n\t\t\t\tel.find('.hide,.hide-advanced').hide();\n\t\t\t}\n\t\t\tel.toggleClass('show');\n\t\t});\n\t\t$('.em-ticket-form').each( function(){\n\t\t\t//check whether to show advanced options or not by default for each ticket\n\t\t\tlet show_advanced = false;\n\t\t\tlet el = $(this); \n\t\t\tel.find('.em-ticket-form-advanced input[type=\"text\"]').each(function(){ if(this.value != '') show_advanced = true; });\n\t\t\tif( el.find('.em-ticket-form-advanced input[type=\"checkbox\"]:checked').length > 0 ){ show_advanced = true; }\n\t\t\tel.find('.em-ticket-form-advanced option:selected').each(function(){ if(this.value != '') show_advanced = true; });\n\t\t\tif( show_advanced ) el.find('.ticket-options-advanced').trigger('click');\n\t\t});\n\t\t//Delete a ticket\n\t\t$(document).on('click', '.ticket-actions-delete', function(e){\n\t\t\te.preventDefault();\n\t\t\tlet el = $(this);\n\t\t\tlet tbody = el.closest('tbody');\n\t\t\tif( tbody.find('input.ticket_id').val() > 0 ){\n\t\t\t\t//only will happen if no bookings made\n\t\t\t\tel.text('Deleting...');\t\n\t\t\t\t$.getJSON( $(this).attr('href'), {'em_ajax_action':'delete_ticket', 'id':tbody.find('input.ticket_id').val()}, function(data){\n\t\t\t\t\tif(data.result){\n\t\t\t\t\t\ttbody.remove();\n\t\t\t\t\t}else{\n\t\t\t\t\t\tel.text('Delete');\n\t\t\t\t\t\talert(data.error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\t//not saved to db yet, so just remove\n\t\t\t\ttbody.remove();\n\t\t\t}\n\t\t\tcheck_ticket_sortability();\n\t\t\treturn false;\n\t\t});\n\t\t//Sort Tickets\n\t\t$('#em-tickets-form.em-tickets-sortable table').sortable({\n\t\t\titems: '> tbody',\n\t\t\tplaceholder: \"em-ticket-sortable-placeholder\",\n\t\t\thandle:'.ticket-status',\n\t\t\thelper: function( event, el ){\n\t\t\t\tlet helper = $(el).clone().addClass('em-ticket-sortable-helper');\n\t\t\t\tlet tds = helper.find('.em-tickets-row td').length;\n\t\t\t\thelper.children().remove();\n\t\t\t\thelper.append('<tr class=\"em-tickets-row\"><td colspan=\"'+tds+'\" style=\"text-align:left; padding-left:15px;\"><span class=\"dashicons dashicons-tickets-alt\"></span></td></tr>');\n\t\t\t\treturn helper;\n\t\t\t},\n\t\t});\n\t\tlet check_ticket_sortability = function(){\n\t\t\tlet em_tickets = $('#em-tickets-form table tbody.em-ticket');\n\t\t\tconsole.log(em_tickets)\n\t\t\tif( em_tickets.length == 1 ){\n\t\t\t\tem_tickets.find('.ticket-status').addClass('single');\n\t\t\t\t$('#em-tickets-form.em-tickets-sortable table').sortable( \"option\", \"disabled\", true );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tem_tickets.find('.ticket-status').removeClass('single');\n\t\t\t$('#em-tickets-form.em-tickets-sortable table').sortable( \"option\", \"disabled\", false );\n\t\t\t\n\t\t};\n\t\tcheck_ticket_sortability();\n\t}\n\t//Manageing Bookings\n\tif( $('#em-bookings-table').length > 0 ){\n\t\t//Pagination link clicks\n\t\t$(document).on('click', '#em-bookings-table .tablenav-pages a', function(){\n\t\t\tlet el = $(this);\n\t\t\tlet form = el.parents('#em-bookings-table form.bookings-filter');\n\t\t\t//get page no from url, change page, submit form\n\t\t\tlet match = el.attr('href').match(/#[0-9]+/);\n\t\t\tif( match != null && match.length > 0){\n\t\t\t\tlet pno = match[0].replace('#','');\n\t\t\t\tform.find('input[name=pno]').val(pno);\n\t\t\t}else{\n\t\t\t\tform.find('input[name=pno]').val(1);\n\t\t\t}\n\t\t\tform.trigger('submit');\n\t\t\treturn false;\n\t\t});\n\t\t//Overlay Options\n\t\tlet em_bookings_settings_dialog = {\n\t\t\tmodal : true,\n\t\t\tautoOpen: false,\n\t\t\tminWidth: 500,\n\t\t\theight: 'auto',\n\t\t\tbuttons: [{\n\t\t\t\ttext: EM.bookings_settings_save,\n\t\t\t\tclick: function(e){\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\t//we know we'll deal with cols, so wipe hidden value from main\n\t\t\t\t\tlet match = $(\"#em-bookings-table form.bookings-filter [name=cols]\").val('');\n\t\t\t\t\tlet booking_form_cols = $('form#em-bookings-table-settings-form input.em-bookings-col-item');\n\t\t\t\t\t$.each( booking_form_cols, function(i,item_match){\n\t\t\t\t\t\t//item_match = $(item_match);\n\t\t\t\t\t\tif( item_match.value == 1 ){\n\t\t\t\t\t\t\tif( match.val() != ''){\n\t\t\t\t\t\t\t\tmatch.val(match.val()+','+item_match.name);\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tmatch.val(item_match.name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t//submit main form\n\t\t\t\t\t$('#em-bookings-table-settings').trigger('submitted'); //hook into this with bind()\n\t\t\t\t\t$('#em-bookings-table form.bookings-filter').trigger('submit');\t\t\t\t\t\n\t\t\t\t\t$(this).dialog('close');\n\t\t\t\t}\n\t\t\t}]\n\t\t};\n\t\tlet em_bookings_export_dialog = {\n\t\t\tmodal : true,\n\t\t\tautoOpen: false,\n\t\t\tminWidth: 700,\n\t\t\theight: 'auto',\n\t\t\tbuttons: [{\n\t\t\t\ttext: EM.bookings_export_save,\n\t\t\t\tclick: function(e){\n\t\t\t\t\t$(this).children('form').trigger('submit');\n\t\t\t\t\t$(this).dialog('close');\n\t\t\t\t}\n\t\t\t}]\n\t\t};\n\t\tif( $(\"#em-bookings-table-settings\").length > 0 ){\n\t\t\t//Settings Overlay\n\t\t\t$(\"#em-bookings-table-settings\").dialog(em_bookings_settings_dialog);\n\t\t\t$(document).on('click', '#em-bookings-table-settings-trigger', function(e){ e.preventDefault(); $(\"#em-bookings-table-settings\").dialog('open'); });\n\t\t\t//Export Overlay\n\t\t\t$(\"#em-bookings-table-export\").dialog(em_bookings_export_dialog);\n\t\t\t$(document).on('click', '#em-bookings-table-export-trigger', function(e){ e.preventDefault(); $(\"#em-bookings-table-export\").dialog('open'); });\n\t\t\tlet export_overlay_show_tickets = function(){\n\t\t\t\tif( $('#em-bookings-table-export-form input[name=show_tickets]').is(':checked') ){\n\t\t\t\t\t$('#em-bookings-table-export-form .em-bookings-col-item-ticket').show();\n\t\t\t\t\t$('#em-bookings-table-export-form #em-bookings-export-cols-active .em-bookings-col-item-ticket input').val(1);\n\t\t\t\t}else{\n\t\t\t\t\t$('#em-bookings-table-export-form .em-bookings-col-item-ticket').hide().find('input').val(0);\t\t\t\t\t\n\t\t\t\t}\n\t\t\t};\n\t\t\t//Sync export overlay with table search field changes\n\t\t\t$('#em-bookings-table form select').each(function(i, el){\n\t\t\t\t$(el).on('change', function(e){\n\t\t\t\t\tlet select_el = $(this);\n\t\t\t\t\tlet input_par = $('#em-bookings-table-export-form input[name='+select_el.attr('name')+']');\n\t\t\t\t\tlet input_par_selected = select_el.find('option:selected');\n\t\t\t\t\tinput_par.val(input_par_selected.val());\n\t\t\t\t});\n\t\t\t});\n\t\t\t\n\t\t\texport_overlay_show_tickets();\n\t\t\t$('#em-bookings-table-export-form input[name=show_tickets]').on('click', export_overlay_show_tickets);\n\t\t\t//Sortables\n\t\t\t$( \".em-bookings-cols-sortable\" ).sortable({\n\t\t\t\tconnectWith: \".em-bookings-cols-sortable\",\n\t\t\t\tupdate: function(event, ui) {\n\t\t\t\t\tif( ui.item.parents('ul#em-bookings-cols-active, ul#em-bookings-export-cols-active').length > 0 ){\t\t\t\t\t\t\t\n\t\t\t\t\t\tui.item.addClass('ui-state-highlight').removeClass('ui-state-default').children('input').val(1);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tui.item.addClass('ui-state-default').removeClass('ui-state-highlight').children('input').val(0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}).disableSelection();\n\t\t\tload_ui_css = true;\n\t\t}\n\t\t//Widgets and filter submissions\n\t\t$(document).on('submit', '#em-bookings-table form.bookings-filter', function(e){\n\t\t\tlet el = $(this);\t\t\t\n\t\t\t//append loading spinner\n\t\t\tel.parents('#em-bookings-table').find('.table-wrap').first().append('<div id=\"em-loading\" />');\n\t\t\t//ajax call\n\t\t\t$.post( EM.ajaxurl, el.serializeArray(), function(data){\n\t\t\t\tlet root = el.parents('#em-bookings-table').first();\n\t\t\t\troot.replaceWith(data);\n\t\t\t\t//recreate overlays\n\t\t\t\t$('#em-bookings-table-export input[name=scope]').val(root.find('select[name=scope]').val());\n\t\t\t\t$('#em-bookings-table-export input[name=status]').val(root.find('select[name=status]').val());\n\t\t\t\tjQuery(document).triggerHandler('em_bookings_filtered', [data, root, el]);\n\t\t\t});\n\t\t\treturn false;\n\t\t});\n\t\t//Approve/Reject Links\n\t\t$(document).on('click', '.em-bookings-approve,.em-bookings-reject,.em-bookings-unapprove,.em-bookings-delete', function(){\n\t\t\tlet el = $(this); \n\t\t\tif( el.hasClass('em-bookings-delete') ){\n\t\t\t\tif( !confirm(EM.booking_delete) ){ return false; }\n\t\t\t}\n\t\t\tlet url = em_ajaxify( el.attr('href'));\t\t\n\t\t\tlet td = el.parents('td').first();\n\t\t\ttd.html(EM.txt_loading);\n\t\t\ttd.load( url );\n\t\t\treturn false;\n\t\t});\n\t}\n\t//Old Bookings Table - depreciating soon\n\tif( $('.em_bookings_events_table').length > 0 ){\n\t\t//Widgets and filter submissions\n\t\t$(document).on('submit', '.em_bookings_events_table form', function(e){\n\t\t\tlet el = $(this);\n\t\t\tlet url = em_ajaxify( el.attr('action') );\t\t\n\t\t\tel.parents('.em_bookings_events_table').find('.table-wrap').first().append('<div id=\"em-loading\" />');\n\t\t\t$.get( url, el.serializeArray(), function(data){\n\t\t\t\tel.parents('.em_bookings_events_table').first().replaceWith(data);\n\t\t\t});\n\t\t\treturn false;\n\t\t});\n\t\t//Pagination link clicks\n\t\t$(document).on('click', '.em_bookings_events_table .tablenav-pages a', function(){\n\t\t\tlet el = $(this);\n\t\t\tlet url = em_ajaxify( el.attr('href') );\t\n\t\t\tel.parents('.em_bookings_events_table').find('.table-wrap').first().append('<div id=\"em-loading\" />');\n\t\t\t$.get( url, function(data){\n\t\t\t\tel.parents('.em_bookings_events_table').first().replaceWith(data);\n\t\t\t});\n\t\t\treturn false;\n\t\t});\n\t}\n\t\n\t//Manual Booking\n\t$(document).on('click', 'a.em-booking-button', function(e){\n\t\te.preventDefault();\n\t\tlet button = $(this);\n\t\tif( button.text() != EM.bb_booked && $(this).text() != EM.bb_booking){\n\t\t\tbutton.text(EM.bb_booking);\n\t\t\tlet button_data = button.attr('id').split('_'); \n\t\t\t$.ajax({\n\t\t\t\turl: EM.ajaxurl,\n\t\t\t\tdataType: 'jsonp',\n\t\t\t\tdata: {\n\t\t\t\t\tevent_id : button_data[1],\n\t\t\t\t\t_wpnonce : button_data[2],\n\t\t\t\t\taction : 'booking_add_one'\n\t\t\t\t},\n\t\t\t\tsuccess : function(response, statusText, xhr, $form) {\n\t\t\t\t\tif(response.result){\n\t\t\t\t\t\tbutton.text(EM.bb_booked);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tbutton.text(EM.bb_error);\n\t\t\t\t\t}\n\t\t\t\t\tif(response.message != '') alert(response.message);\n\t\t\t\t\t$(document).triggerHandler('em_booking_button_response', [response, button]);\n\t\t\t\t},\n\t\t\t\terror : function(){ button.text(EM.bb_error); }\n\t\t\t});\n\t\t}\n\t\treturn false;\n\t});\t\n\t$(document).on('click', 'a.em-cancel-button', function(e){\n\t\te.preventDefault();\n\t\tlet button = $(this);\n\t\tif( button.text() != EM.bb_cancelled && button.text() != EM.bb_canceling){\n\t\t\tbutton.text(EM.bb_canceling);\n\t\t\tlet button_data = button.attr('id').split('_'); \n\t\t\t$.ajax({\n\t\t\t\turl: EM.ajaxurl,\n\t\t\t\tdataType: 'jsonp',\n\t\t\t\tdata: {\n\t\t\t\t\tbooking_id : button_data[1],\n\t\t\t\t\t_wpnonce : button_data[2],\n\t\t\t\t\taction : 'booking_cancel'\n\t\t\t\t},\n\t\t\t\tsuccess : function(response, statusText, xhr, $form) {\n\t\t\t\t\tif(response.result){\n\t\t\t\t\t\tbutton.text(EM.bb_cancelled);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tbutton.text(EM.bb_cancel_error);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror : function(){ button.text(EM.bb_cancel_error); }\n\t\t\t});\n\t\t}\n\t\treturn false;\n\t});  \n\n\tif( load_ui_css ) em_load_jquery_css();\n\t\n\t//previously in em-admin.php\n\tfunction updateIntervalDescriptor () { \n\t\t$(\".interval-desc\").hide();\n\t\tlet number = \"-plural\";\n\t\tif ($('input#recurrence-interval').val() == 1 || $('input#recurrence-interval').val() == \"\")\n\t\tnumber = \"-singular\";\n\t\tlet descriptor = \"span#interval-\"+$(\"select#recurrence-frequency\").val()+number;\n\t\t$(descriptor).show();\n\t}\n\tfunction updateIntervalSelectors () {\n\t\t$('p.alternate-selector').hide();   \n\t\t$('p#'+ $('select#recurrence-frequency').val() + \"-selector\").show();\n\t}\n\tfunction updateShowHideRecurrence () {\n\t\tif( $('input#event-recurrence').is(\":checked\")) {\n\t\t\t$(\"#event_recurrence_pattern\").fadeIn();\n\t\t\t$(\"#event-date-explanation\").hide();\n\t\t\t$(\"#recurrence-dates-explanation\").show();\n\t\t\t$(\"h3#recurrence-dates-title\").show();\n\t\t\t$(\"h3#event-date-title\").hide();     \n\t\t} else {\n\t\t\t$(\"#event_recurrence_pattern\").hide();\n\t\t\t$(\"#recurrence-dates-explanation\").hide();\n\t\t\t$(\"#event-date-explanation\").show();\n\t\t\t$(\"h3#recurrence-dates-title\").hide();\n\t\t\t$(\"h3#event-date-title\").show();   \n\t\t}\n\t}\t\t \n\t$(\"#recurrence-dates-explanation\").hide();\n\t$(\"#date-to-submit\").hide();\n\t$(\"#end-date-to-submit\").hide();\n\t\n\t$(\"#localised-date\").show();\n\t$(\"#localised-end-date\").show();\n\t\n\t$('#em-wrapper input.select-all').on('change', function(){\n\t \tif($(this).is(':checked')){\n\t\t\t$('input.row-selector').prop('checked', true);\n\t\t\t$('input.select-all').prop('checked', true);\n\t \t}else{\n\t\t\t$('input.row-selector').prop('checked', false);\n\t\t\t$('input.select-all').prop('checked', false);\n\t\t}\n\t}); \n\t\n\tupdateIntervalDescriptor(); \n\tupdateIntervalSelectors();\n\tupdateShowHideRecurrence();\n\t$('input#event-recurrence').on('change', updateShowHideRecurrence);\n\t   \n\t// recurrency elements   \n\t$('input#recurrence-interval').on('keyup', updateIntervalDescriptor);\n\t$('select#recurrence-frequency').on('change', updateIntervalDescriptor);\n\t$('select#recurrence-frequency').on('change', updateIntervalSelectors);\n\n\n\n\t/* Location Type Selection */\n\t$('.em-location-types .em-location-types-select').on('change', function(){\n\t\tlet el = $(this);\n\t\tif( el.val() == 0 ){\n\t\t\t$('.em-location-type').hide();\n\t\t}else{\n\t\t\tlet location_type = el.find('option:selected').data('display-class');\n\t\t\t$('.em-location-type').hide();\n\t\t\t$('.em-location-type.'+location_type).show();\n\t\t\tif( location_type != 'em-location-type-place' ){\n\t\t\t\tjQuery('#em-location-reset a').trigger('click');\n\t\t\t}\n\t\t}\n\t\tif( el.data('active') !== '' && el.val() !== el.data('active') ){\n\t\t\t$('.em-location-type-delete-active-alert').hide();\n\t\t\t$('.em-location-type-delete-active-alert').show();\n\t\t}else{\n\t\t\t$('.em-location-type-delete-active-alert').hide();\n\t\t}\n\t}).trigger('change');\n\t\n\t//Finally, add autocomplete here\n\t//Autocomplete\n\tif( jQuery( \"div.em-location-data input#location-name\" ).length > 0 ){\n\t\tjQuery( \"div.em-location-data input#location-name\" ).autocomplete({\n\t\t\tsource: EM.locationajaxurl,\n\t\t\tminLength: 2,\n\t\t\tfocus: function( event, ui ){\n\t\t\t\tjQuery(\"input#location-id\" ).val( ui.item.value );\n\t\t\t\treturn false;\n\t\t\t},\t\t\t \n\t\t\tselect: function( event, ui ){\n\t\t\t\tjQuery(\"input#location-id\" ).val(ui.item.id).trigger('change');\n\t\t\t\tjQuery(\"input#location-name\" ).val(ui.item.value);\n\t\t\t\tjQuery('input#location-address').val(ui.item.address);\n\t\t\t\tjQuery('input#location-town').val(ui.item.town);\n\t\t\t\tjQuery('input#location-state').val(ui.item.state);\n\t\t\t\tjQuery('input#location-region').val(ui.item.region);\n\t\t\t\tjQuery('input#location-postcode').val(ui.item.postcode);\n\t\t\t\tjQuery('input#location-latitude').val(ui.item.latitude);\n\t\t\t\tjQuery('input#location-longitude').val(ui.item.longitude);\n\t\t\t\tif( ui.item.country == '' ){\n\t\t\t\t\tjQuery('select#location-country option:selected').removeAttr('selected');\n\t\t\t\t}else{\n\t\t\t\t\tjQuery('select#location-country option[value=\"'+ui.item.country+'\"]').attr('selected', 'selected');\n\t\t\t\t}\n\t\t\t\tjQuery('div.em-location-data input').css('background-color','#ccc').prop('readonly', true);\n\t\t\t\tjQuery('div.em-location-data select').css('background-color','#ccc').css('color', '#666666').prop('disabled', true);\n\t\t\t\tjQuery('#em-location-reset').show();\n\t\t\t\tjQuery('#em-location-search-tip').hide();\n\t\t\t\tjQuery(document).triggerHandler('em_locations_autocomplete_selected', [event, ui]);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}).data( \"ui-autocomplete\" )._renderItem = function( ul, item ) {\n\t\t\tlet html_val = \"<a>\" + em_esc_attr(item.label) + '<br><span style=\"font-size:11px\"><em>'+ em_esc_attr(item.address) + ', ' + em_esc_attr(item.town)+\"</em></span></a>\";\n\t\t\treturn jQuery( \"<li></li>\" ).data( \"item.autocomplete\", item ).append(html_val).appendTo( ul );\n\t\t};\n\t\tjQuery('#em-location-reset a').on('click', function(){\n\t\t\tjQuery('div.em-location-data input').val('').prop('readonly', false);\n\t\t\tjQuery('div.em-location-data select').prop('disabled', false);\n\t\t\tjQuery('div.em-location-data option:selected').removeAttr('selected');\n\t\t\tjQuery('input#location-id').val('');\n\t\t\tjQuery('#em-location-reset').hide();\n\t\t\tjQuery('#em-location-search-tip').show();\n\t\t\tjQuery('#em-map').hide();\n\t\t\tjQuery('#em-map-404').show();\n\t\t\tif(typeof(marker) !== 'undefined'){\n\t\t\t\tmarker.setPosition(new google.maps.LatLng(0, 0));\n\t\t\t\tinfoWindow.close();\n\t\t\t\tmarker.setDraggable(true);\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\tif( jQuery('input#location-id').val() != '0' && jQuery('input#location-id').val() != '' ){\n\t\t\tjQuery('div.em-location-data input').prop('readonly', true);\n\t\t\tjQuery('div.em-location-data select').prop('disabled', true);\n\t\t\tjQuery('#em-location-reset').show();\n\t\t\tjQuery('#em-location-search-tip').hide();\n\t\t}\n\t}\n\t/* Local JS Timezone related placeholders */\n\t/* Moment JS Timzeone PH */\n\tif( window.moment ){\n\t\tlet replace_specials = function( day, string ){\n\t\t\t// replace things not supported by moment\n\t\t\tstring = string.replace(/##T/g, Intl.DateTimeFormat().resolvedOptions().timeZone);\n\t\t\tstring = string.replace(/#T/g, \"GMT\"+day.format('Z'));\n\t\t\tstring = string.replace(/###t/g, day.utcOffset()*-60);\n\t\t\tstring = string.replace(/##t/g, day.isDST());\n\t\t\tstring = string.replace(/#t/g, day.daysInMonth());\n\t\t\treturn string;\n\t\t};\n\t\t$('.em-date-momentjs').each( function(){\n\t\t\t// Start Date\n\t\t\tlet el = $(this);\n\t\t\tlet day_start = moment.unix(el.data('date-start'));\n\t\t\tlet date_start_string = replace_specials(day_start, day_start.format(el.data('date-format')));\n\t\t\tif( el.data('date-start') !== el.data('date-end') ){\n\t\t\t\t// End Date\n\t\t\t\tlet day_end = moment.unix(el.data('date-end'));\n\t\t\t\tlet day_end_string = replace_specials(day_start, day_end.format(el.data('date-format')));\n\t\t\t\t// Output\n\t\t\t\tlet date_string = date_start_string + el.data('date-separator') + day_end_string;\n\t\t\t}else{\n\t\t\t\tlet date_string = date_start_string;\n\t\t\t}\n\t\t\tel.text(date_string);\n\t\t});\n\t\tlet get_date_string = function(ts, format){\n\t\t\tlet date = new Date(ts * 1000);\n\t\t\tlet minutes = date.getMinutes();\n\t\t\tif( format == 24 ){\n\t\t\t\tlet hours = date.getHours();\n\t\t\t\thours = hours < 10 ? '0' + hours : hours;\n\t\t\t\tminutes = minutes < 10 ? '0' + minutes : minutes;\n\t\t\t\treturn hours + ':' + minutes;\n\t\t\t}else{\n\t\t\t\tlet hours = date.getHours() % 12;\n\t\t\t\tlet ampm = hours >= 12 ? 'PM' : 'AM';\n\t\t\t\tif( hours === 0 ) hours = 12; // the hour '0' should be '12'\n\t\t\t\tminutes = minutes < 10 ? '0'+minutes : minutes;\n\t\t\t\treturn hours + ':' + minutes + ' ' + ampm;\n\t\t\t}\n\t\t}\n\t\t$('.em-time-localjs').each( function(){\n\t\t\tlet el = $(this);\n\t\t\tlet strTime = get_date_string( el.data('time'), el.data('time-format') );\n\t\t\tif( el.data('time-end') ){\n\t\t\t\tlet separator = el.data('time-separator') ? el.data('time-separator') : ' - ';\n\t\t\t\tstrTime = strTime + separator + get_date_string( el.data('time-end'), el.data('time-format') );\n\t\t\t}\n\t\t\tel.text(strTime);\n\t\t});\n\t}\n\t/* Done! */\n\tjQuery(document).triggerHandler('em_javascript_loaded');\n});\n\nfunction em_load_jquery_css(){\n\tif( EM.ui_css && jQuery('link#jquery-ui-css').length == 0 ){\n\t\tlet script = document.createElement(\"link\");\n\t\tscript.id = 'jquery-ui-css';\n\t\tscript.rel = \"stylesheet\";\n\t\tscript.href = EM.ui_css;\n\t\tdocument.body.appendChild(script);\n\t}\n}\n\n/* Useful function for adding the em_ajax flag to a url, regardless of querystring format */\nlet em_ajaxify = function(url){\n\tif ( url.search('em_ajax=0') != -1){\n\t\turl = url.replace('em_ajax=0','em_ajax=1');\n\t}else if( url.search(/\\?/) != -1 ){\n\t\turl = url + \"&em_ajax=1\";\n\t}else{\n\t\turl = url + \"?em_ajax=1\";\n\t}\n\treturn url;\n};\n\n\n\nfunction em_esc_attr( str ){\n\tif( typeof str !== 'string' ) return '';\n\treturn str.replace(/</gi,'&lt;').replace(/>/gi,'&gt;');\n}\n\n// TODO: Put this in extra file\nlet EventsManager = {\n\n\tinit: () => {\n\t\tEventsManager.autofillDate();\n\t\tEventsManager.autofillTime();\n\t\tEventsManager.lockTime();\n\t},\n\n\tgetElementByName: (element) => {\n\t\tlet elements = document.getElementsByName(element);\n\t\tif (elements.length) {\n\t\t\treturn elements[0];\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\n\tautofillDate: () => {\n\t\tconst dateStartSelector = EventsManager.getElementByName(\"event_start_date\")\n\t\tconst dateEndSelector = EventsManager.getElementByName(\"event_end_date\")\n\t\tif (dateStartSelector && dateEndSelector) {\n\t\t\tdateStartSelector.addEventListener(\"change\", (event) => {\n\t\t\t\tif(dateEndSelector.value == \"\") {\n\t\t\t\t\tdateEndSelector.value = dateStartSelector.value;\n\t\t\t\t} \n\t\t\t})\n\t\t}\n\t},\n\n\tautofillTime: () => {\n\t\tconst timeStartSelector = EventsManager.getElementByName(\"event_start_time\")\n\t\tconst timeEndSelector = EventsManager.getElementByName(\"event_end_time\")\n\t\tif (timeStartSelector && timeEndSelector) {\n\t\t\ttimeStartSelector.addEventListener(\"change\", (event) => {\n\t\t\t\tif(timeEndSelector.value == \"00:00\") {\n\t\t\t\t\ttimeEndSelector.value = timeStartSelector.value;\n\t\t\t\t} \n\t\t\t})\n\t\t}\n\t},\n\n\tlockTime: () => {\n\t\tconst allDaySelector = EventsManager.getElementByName(\"event_all_day\")\n\t\tconst timeStartSelector = EventsManager.getElementByName(\"event_start_time\")\n\t\tconst timeEndSelector = EventsManager.getElementByName(\"event_end_time\")\n\t\tif(allDaySelector) {\n\t\t\tallDaySelector.addEventListener(\"change\", (event) => {\n\t\t\t\ttimeStartSelector.disabled = allDaySelector.checked;\n\t\t\t\ttimeEndSelector.disabled = allDaySelector.checked;\n\t\t\t})\n\t\t}\n\t}\n}\n\ndocument.addEventListener('DOMContentLoaded', EventsManager.init, false);\n\n\n\n\n"],"names":["jQuery","document","ready","$","load_ui_css","each","i","el","addClass","next","parent","off","on","e","preventDefault","closest","prepend","url","em_ajaxify","attr","load","trigger","rel","split","hasClass","length","find","slideUp","show","hide","removeClass","slideDown","EM","search_term_placeholder","createElement","value","html","txt_loading","val","data","action","country","return_html","ajaxurl","region","state","form","em_search","txt_search","results_wrapper","append","submitButton","txt_searching","img","children","replace","lets","serialize","ajax","type","dataType","success","responseText","replaceWith","triggerHandler","a","wrapper","wrapper_parent","qlets","confirm","window","location","href","is","event","first","warning_text","event_reschedule_warning","event_recurrence_bookings","event_recurrence_overwrite","confirmation","siblings","checked","disable_bookings_warning","fadeIn","reset_ticket_forms","tickets","rowNo","slot","clone","appendTo","index","datepicker","removeAttr","em_timepickerObj","em_timepicker","em_setup_datepicker","em_setup_timepicker","animate","scrollTop","offset","top","check_ticket_sortability","tbody","text","classname","toggleClass","show_advanced","getJSON","result","remove","alert","error","sortable","items","placeholder","handle","helper","tds","em_tickets","console","log","parents","match","pno","em_bookings_settings_dialog","modal","autoOpen","minWidth","height","buttons","bookings_settings_save","click","booking_form_cols","item_match","name","dialog","em_bookings_export_dialog","bookings_export_save","export_overlay_show_tickets","select_el","input_par","input_par_selected","connectWith","update","ui","item","disableSelection","post","serializeArray","root","booking_delete","td","get","button","bb_booked","bb_booking","button_data","event_id","_wpnonce","response","statusText","xhr","$form","bb_error","message","bb_cancelled","bb_canceling","booking_id","bb_cancel_error","em_load_jquery_css","updateIntervalDescriptor","number","descriptor","updateIntervalSelectors","updateShowHideRecurrence","prop","location_type","autocomplete","source","locationajaxurl","minLength","focus","select","id","address","town","postcode","latitude","longitude","css","_renderItem","ul","html_val","em_esc_attr","label","marker","setPosition","google","maps","LatLng","infoWindow","close","setDraggable","moment","replace_specials","day","string","Intl","DateTimeFormat","resolvedOptions","timeZone","format","utcOffset","isDST","daysInMonth","day_start","unix","date_start_string","day_end","day_end_string","date_string","get_date_string","ts","date","Date","minutes","getMinutes","hours","getHours","ampm","strTime","separator","ui_css","script","body","appendChild","search","str","EventsManager","init","autofillDate","autofillTime","lockTime","getElementByName","element","elements","getElementsByName","dateStartSelector","dateEndSelector","addEventListener","timeStartSelector","timeEndSelector","allDaySelector","disabled"],"sourceRoot":""}