!function(){"use strict";function e(e){e=jQuery(e),dateDivs=e.find(".em-date-single, .em-date-range"),dateDivs.length>0&&(dateDivs.find("input.em-date-input-loc").each((function(e,t){var a=(t=jQuery(t)).nextAll("input.em-date-input").first(),n=a.val();n&&(t.val(n),a.val(n)),t.on("change",(function(){""==jQuery(this).val()&&jQuery(this).nextAll(".em-date-input").first().val("")}))})),dateDivs.filter(".em-date-range").find("input.em-date-input-loc").each((function(e,t){if((t=jQuery(t)).hasClass("em-date-start"))t.datepicker("option","onSelect",(function(e){var t=jQuery(this),a=t.parents(".em-date-range").find(".em-date-end").first(),n=t.nextAll("input.em-date-input").first().val(),i=a.nextAll("input.em-date-input").first().val();t.trigger("em_datepicker_change"),n>i&&""!=i&&(a.datepicker("setDate",e),a.trigger("change").trigger("em_datepicker_change")),a.datepicker("option","minDate",e)}));else if(t.hasClass("em-date-end")){var a=t.parents(".em-date-range").find(".em-date-start").first();""!=a.val()&&t.datepicker("option","minDate",a.val())}})))}function t(e){(e=jQuery(e)).find(".em-time-range input.em-time-start").each((function(e,t){jQuery(t)})).on("change",(function(){var e=jQuery(this);e.nextAll(".em-time-end").val()&&(e.data("oldTime"),e.data("oldTime",time))})),e.find(".event-form-when .em-time-range input.em-time-end").on("change",(function(){var e=jQuery(this),t=e.prevAll(".em-time-start"),a=e.closest(".event-form-when"),n=a.find(".em-date-end").val(),i=a.find(".em-date-start").val();t.val()&&(t.em_timepicker("getTime")>e.em_timepicker("getTime")&&(0==i.length||n==i)?e.addClass("error"):e.removeClass("error"))})),e.find(".event-form-when .em-date-end").on("change",(function(){jQuery(this).closest(".event-form-when").find(".em-time-end").trigger("change")})),e.find(".em-time-range input.em-time-all-day").on("change",(function(){var e=jQuery(this);e.is(":checked")?e.siblings(".em-time-input").css("background-color","#ccc"):e.siblings(".em-time-input").css("background-color","#fff")})).trigger("change")}jQuery(document).ready((function(i){var r=!1;if(i("#start-time").each((function(e,t){i(t).addClass("em-time-input em-time-start").next("#end-time").addClass("em-time-input em-time-end").parent().addClass("em-time-range")})),i(".em-time-input").length>0&&t("body"),i(".em-calendar-wrapper a").off("click"),i(".em-calendar-wrapper").on("click","a.em-calnav, a.em-calnav",(function(e){e.preventDefault(),i(this).closest(".em-calendar-wrapper").prepend('<div class="loading" id="em-loading"></div>');var t=a(i(this).attr("href"));i(this).closest(".em-calendar-wrapper").load(t,(function(){i(this).trigger("em_calendar_load")}))})),i(document).on("click change",".em-toggle",(function(e){e.preventDefault();var t=i(this),a=t.attr("rel").split(":");t.hasClass("show-search")?(a.length>1?t.closest(a[1]).find(a[0]).slideUp():i(a[0]).slideUp(),t.find(".show, .show-advanced").show(),t.find(".hide, .hide-advanced").hide(),t.removeClass("show-search")):(a.length>1?t.closest(a[1]).find(a[0]).slideDown():i(a[0]).slideDown(),t.find(".show, .show-advanced").hide(),t.find(".hide, .hide-advanced").show(),t.addClass("show-search"))})),EM.search_term_placeholder&&("placeholder"in document.createElement("input")?i("input.em-events-search-text, input.em-search-text").attr("placeholder",EM.search_term_placeholder):i("input.em-events-search-text, input.em-search-text").on("blur",(function(){""==this.value&&(this.value=EM.search_term_placeholder)})).on("focus",(function(){this.value==EM.search_term_placeholder&&(this.value="")})).trigger("blur")),i(".em-search-form select[name=country]").on("change",(function(){var e=i(this);if(i(".em-search select[name=state]").html('<option value="">'+EM.txt_loading+"</option>"),i(".em-search select[name=region]").html('<option value="">'+EM.txt_loading+"</option>"),i(".em-search select[name=town]").html('<option value="">'+EM.txt_loading+"</option>"),""!=e.val()){e.closest(".em-search-location").find(".em-search-location-meta").slideDown();var t={action:"search_states",country:e.val(),return_html:!0};i(".em-search select[name=state]").load(EM.ajaxurl,t),t.action="search_regions",i(".em-search select[name=region]").load(EM.ajaxurl,t),t.action="search_towns",i(".em-search select[name=town]").load(EM.ajaxurl,t)}else e.closest(".em-search-location").find(".em-search-location-meta").slideUp()})),i(".em-search-form select[name=region]").on("change",(function(){i(".em-search select[name=state]").html('<option value="">'+EM.txt_loading+"</option>"),i(".em-search select[name=town]").html('<option value="">'+EM.txt_loading+"</option>");var e={action:"search_states",region:i(this).val(),country:i(".em-search-form select[name=country]").val(),return_html:!0};i(".em-search select[name=state]").load(EM.ajaxurl,e),e.action="search_towns",i(".em-search select[name=town]").load(EM.ajaxurl,e)})),i(".em-search-form select[name=state]").on("change",(function(){i(".em-search select[name=town]").html('<option value="">'+EM.txt_loading+"</option>");var e={action:"search_towns",state:i(this).val(),region:i(".em-search-form select[name=region]").val(),country:i(".em-search-form select[name=country]").val(),return_html:!0};i(".em-search select[name=town]").load(EM.ajaxurl,e)})),i(document).on("submit",".em-search-form, .em-events-search-form",(function(e){var t=i(this);this.em_search&&this.em_search.value==EM.txt_search&&(this.em_search.value="");var a=t.closest(".em-search-wrapper").find(".em-search-ajax");if(0==a.length&&(a=i(".em-search-ajax")),a.length>0){a.append('<div class="loading" id="em-loading"></div>');var n=t.find(".em-search-submit");n.data("buttonText",n.val()).val(EM.txt_searching);var r=n.children("img");r.length>0&&r.attr("src",r.attr("src").replace("search-mag.png","search-loading.gif"));var o=t.serialize();return i.ajax(EM.ajaxurl,{type:"POST",dataType:"html",data:o,success:function(c){n.val(n.data("buttonText")),r.length>0&&r.attr("src",r.attr("src").replace("search-loading.gif","search-mag.png")),a.replaceWith(c),""==t.find("input[name=em_search]").val()&&t.find("input[name=em_search]").val(EM.txt_search),0==(a=t.closest(".em-search-wrapper").find(".em-search-ajax")).length&&(a=i(".em-search-ajax")),jQuery(document).triggerHandler("em_search_ajax",[o,a,e])}}),e.preventDefault(),!1}})),i(".em-search-ajax").length>0&&i(document).on("click",".em-search-ajax a.page-numbers",(function(e){var t=i(this),a=t.closest(".em-pagination").attr("data-em-ajax"),n=t.closest(".em-search-ajax"),r=n.parent(),o=t.attr("href").split("?")[1];return""!=a&&(o=""!=o?o+"&"+a:a),n.append('<div class="loading" id="em-loading"></div>'),i.ajax(EM.ajaxurl,{type:"POST",dataType:"html",data:o,success:function(t){n.replaceWith(t),n=r.find(".em-search-ajax"),jQuery(document).triggerHandler("em_search_ajax",[o,n,e])}}),e.preventDefault(),!1})),i(".events-table").on("click",".em-event-delete",(function(){if(!confirm("Are you sure you want to delete?"))return!1;window.location.href=this.href})),i("#event-form #event-image-delete, #location-form #location-image-delete").on("click",(function(){var e=i(this);e.is(":checked")?e.closest(".event-form-image, .location-form-image").find("#event-image-img, #location-image-img").hide():e.closest(".event-form-image, .location-form-image").find("#event-image-img, #location-image-img").show()})),i("#event-form.em-event-admin-recurring").on("submit",(function(e){var t=i(this);if(1==t.find('input[name="event_reschedule"]').first().val())var a=EM.event_reschedule_warning;else a=1==t.find('input[name="event_recreate_tickets"]').first().val()?EM.event_recurrence_bookings:EM.event_recurrence_overwrite;confirmation=confirm(a),0==confirmation&&e.preventDefault()})),i(".em-reschedule-trigger").on("click",(function(e){e.preventDefault();var t=i(this);t.closest(".em-recurrence-reschedule").find(t.data("target")).removeClass("reschedule-hidden"),t.siblings(".em-reschedule-value").val(1),t.addClass("reschedule-hidden").siblings("a").removeClass("reschedule-hidden")})),i(".em-reschedule-cancel").on("click",(function(e){e.preventDefault();var t=i(this);t.closest(".em-recurrence-reschedule").find(t.data("target")).addClass("reschedule-hidden"),t.siblings(".em-reschedule-value").val(0),t.addClass("reschedule-hidden").siblings("a").removeClass("reschedule-hidden")})),i("#em-tickets-form").length>0){i("#event-rsvp").on("click",(function(e){this.checked?i("#event-rsvp-options").fadeIn():(confirmation=confirm(EM.disable_bookings_warning),0==confirmation?e.preventDefault():i("#event-rsvp-options").hide())})),i("input#event-rsvp").is(":checked")?i("div#rsvp-data").fadeIn():i("div#rsvp-data").hide();var o=function(){i("#em-tickets-form table tbody tr.em-tickets-row").show(),i("#em-tickets-form table tbody tr.em-tickets-row-form").hide()};i("#em-recurrence-checkbox").length>0?i("#em-recurrence-checkbox").on("change",(function(){i("#em-recurrence-checkbox").is(":checked")?(i("#em-tickets-form .ticket-dates-from-recurring, #em-tickets-form .ticket-dates-to-recurring, #event-rsvp-options .em-booking-date-recurring").show(),i("#em-tickets-form .ticket-dates-from-normal, #em-tickets-form .ticket-dates-to-normal, #event-rsvp-options .em-booking-date-normal, #em-tickets-form .hidden").hide()):(i("#em-tickets-form .ticket-dates-from-normal, #em-tickets-form .ticket-dates-to-normal, #event-rsvp-options .em-booking-date-normal").show(),i("#em-tickets-form .ticket-dates-from-recurring, #em-tickets-form .ticket-dates-to-recurring, #event-rsvp-options .em-booking-date-recurring, #em-tickets-form .hidden").hide())})).trigger("change"):i("#em-form-recurrence").length>0?(i("#em-tickets-form .ticket-dates-from-recurring, #em-tickets-form .ticket-dates-to-recurring, #event-rsvp-options .em-booking-date-recurring").show(),i("#em-tickets-form .ticket-dates-from-normal, #em-tickets-form .ticket-dates-to-normal, #event-rsvp-options .em-booking-date-normal, #em-tickets-form .hidden").hide()):i("#em-tickets-form .ticket-dates-from-recurring, #em-tickets-form .ticket-dates-to-recurring, #event-rsvp-options .em-booking-date-recurring, #em-tickets-form .hidden").hide(),i("#em-tickets-add").on("click",(function(a){a.preventDefault(),o();var n=i("#em-tickets-form table tbody"),r=n.length+1,s=n.first(".em-ticket-template").clone(!0).attr("id","em-ticket-"+r).removeClass("em-ticket-template").addClass("em-ticket").appendTo(i("#em-tickets-form table"));s.find("*[name]").each((function(e,t){(t=i(t)).attr("name",t.attr("name").replace("em_tickets[0]","em_tickets["+r+"]"))})),s.show().find(".ticket-actions-edit").trigger("click"),s.find(".em-date-input-loc").datepicker("destroy").removeAttr("id"),s.find(".em-time-input").off().each((function(e,t){"object"==typeof this.em_timepickerObj&&this.em_timepicker("remove")})),e(s),t(s),i("html, body").animate({scrollTop:s.offset().top-30}),c()})),i(document).on("click",".ticket-actions-edit",(function(e){e.preventDefault(),o();var t=i(this).closest("tbody");return t.find("tr.em-tickets-row").hide(),t.find("tr.em-tickets-row-form").fadeIn(),!1})),i(document).on("click",".ticket-actions-edited",(function(e){e.preventDefault();var t=i(this).closest("tbody"),a=t.attr("id").replace("em-ticket-","");return t.find(".em-tickets-row").fadeIn(),t.find(".em-tickets-row-form").hide(),t.find("*[name]").each((function(e,n){if("ticket_start_pub"==(n=i(n)).attr("name"))t.find("span.ticket_start").text(n.val());else if("ticket_end_pub"==n.attr("name"))t.find("span.ticket_end").text(n.val());else if(n.attr("name")=="em_tickets["+a+"][ticket_type]")"members"==n.find(":selected").val()&&t.find("span.ticket_name").prepend("* ");else if(n.attr("name")=="em_tickets["+a+"][ticket_start_recurring_days]"){var r="before"==t.find("select.ticket-dates-from-recurring-when").val()?"-"+n.val():n.val();""!=n.val()?(t.find("span.ticket_start_recurring_days").text(r),t.find("span.ticket_start_recurring_days_text, span.ticket_start_time").removeClass("hidden").show()):(t.find("span.ticket_start_recurring_days").text(" - "),t.find("span.ticket_start_recurring_days_text, span.ticket_start_time").removeClass("hidden").hide())}else if(n.attr("name")=="em_tickets["+a+"][ticket_end_recurring_days]")r="before"==t.find("select.ticket-dates-to-recurring-when").val()?"-"+n.val():n.val(),""!=n.val()?(t.find("span.ticket_end_recurring_days").text(r),t.find("span.ticket_end_recurring_days_text, span.ticket_end_time").removeClass("hidden").show()):(t.find("span.ticket_end_recurring_days").text(" - "),t.find("span.ticket_end_recurring_days_text, span.ticket_end_time").removeClass("hidden").hide());else{var o=n.attr("name").replace("em_tickets["+a+"][","").replace("]","").replace("[]","");t.find(".em-tickets-row ."+o).text(n.val())}})),i(document).triggerHandler("em_maps_tickets_edit",[t,a,!0]),i("html, body").animate({scrollTop:t.parent().offset().top-30}),!1})),i(document).on("change",".em-ticket-form select.ticket_type",(function(e){var t=i(this);"members"==t.find("option:selected").val()?t.closest(".em-ticket-form").find(".ticket-roles").fadeIn():t.closest(".em-ticket-form").find(".ticket-roles").hide()})),i(document).on("click",".em-ticket-form .ticket-options-advanced",(function(e){e.preventDefault();var t=i(this);t.hasClass("show")?(t.closest(".em-ticket-form").find(".em-ticket-form-advanced").fadeIn(),t.find(".show,.show-advanced").hide(),t.find(".hide,.hide-advanced").show()):(t.closest(".em-ticket-form").find(".em-ticket-form-advanced").hide(),t.find(".show,.show-advanced").show(),t.find(".hide,.hide-advanced").hide()),t.toggleClass("show")})),i(".em-ticket-form").each((function(){var e=!1,t=i(this);t.find('.em-ticket-form-advanced input[type="text"]').each((function(){""!=this.value&&(e=!0)})),t.find('.em-ticket-form-advanced input[type="checkbox"]:checked').length>0&&(e=!0),t.find(".em-ticket-form-advanced option:selected").each((function(){""!=this.value&&(e=!0)})),e&&t.find(".ticket-options-advanced").trigger("click")})),i(document).on("click",".ticket-actions-delete",(function(e){e.preventDefault();var t=i(this),a=t.closest("tbody");return a.find("input.ticket_id").val()>0?(t.text("Deleting..."),i.getJSON(i(this).attr("href"),{em_ajax_action:"delete_ticket",id:a.find("input.ticket_id").val()},(function(e){e.result?a.remove():(t.text("Delete"),alert(e.error))}))):a.remove(),c(),!1})),i("#em-tickets-form.em-tickets-sortable table").sortable({items:"> tbody",placeholder:"em-ticket-sortable-placeholder",handle:".ticket-status",helper:function(e,t){var a=i(t).clone().addClass("em-ticket-sortable-helper"),n=a.find(".em-tickets-row td").length;return a.children().remove(),a.append('<tr class="em-tickets-row"><td colspan="'+n+'" style="text-align:left; padding-left:15px;"><span class="dashicons dashicons-tickets-alt"></span></td></tr>'),a}});var c=function(){var e=i("#em-tickets-form table tbody.em-ticket");1==e.length?(e.find(".ticket-status").addClass("single"),i("#em-tickets-form.em-tickets-sortable table").sortable("option","disabled",!0)):(e.find(".ticket-status").removeClass("single"),i("#em-tickets-form.em-tickets-sortable table").sortable("option","disabled",!1))};c()}if(i("#em-bookings-table").length>0){i(document).on("click","#em-bookings-table .tablenav-pages a",(function(){var e=i(this),t=e.parents("#em-bookings-table form.bookings-filter"),a=e.attr("href").match(/#[0-9]+/);if(null!=a&&a.length>0){var n=a[0].replace("#","");t.find("input[name=pno]").val(n)}else t.find("input[name=pno]").val(1);return t.trigger("submit"),!1}));var s={modal:!0,autoOpen:!1,minWidth:500,height:"auto",buttons:[{text:EM.bookings_settings_save,click:function(e){e.preventDefault();var t=i("#em-bookings-table form.bookings-filter [name=cols]").val(""),a=i("form#em-bookings-table-settings-form input.em-bookings-col-item");i.each(a,(function(e,a){1==a.value&&(""!=t.val()?t.val(t.val()+","+a.name):t.val(a.name))})),i("#em-bookings-table-settings").trigger("submitted"),i("#em-bookings-table form.bookings-filter").trigger("submit"),i(this).dialog("close")}}]},l={modal:!0,autoOpen:!1,minWidth:700,height:"auto",buttons:[{text:EM.bookings_export_save,click:function(e){i(this).children("form").trigger("submit"),i(this).dialog("close")}}]};if(i("#em-bookings-table-settings").length>0){i("#em-bookings-table-settings").dialog(s),i(document).on("click","#em-bookings-table-settings-trigger",(function(e){e.preventDefault(),i("#em-bookings-table-settings").dialog("open")})),i("#em-bookings-table-export").dialog(l),i(document).on("click","#em-bookings-table-export-trigger",(function(e){e.preventDefault(),i("#em-bookings-table-export").dialog("open")}));var d=function(){i("#em-bookings-table-export-form input[name=show_tickets]").is(":checked")?(i("#em-bookings-table-export-form .em-bookings-col-item-ticket").show(),i("#em-bookings-table-export-form #em-bookings-export-cols-active .em-bookings-col-item-ticket input").val(1)):i("#em-bookings-table-export-form .em-bookings-col-item-ticket").hide().find("input").val(0)};i("#em-bookings-table form select").each((function(e,t){i(t).on("change",(function(e){var t=i(this),a=i("#em-bookings-table-export-form input[name="+t.attr("name")+"]"),n=t.find("option:selected");a.val(n.val())}))})),d(),i("#em-bookings-table-export-form input[name=show_tickets]").on("click",d),i(".em-bookings-cols-sortable").sortable({connectWith:".em-bookings-cols-sortable",update:function(e,t){t.item.parents("ul#em-bookings-cols-active, ul#em-bookings-export-cols-active").length>0?t.item.addClass("ui-state-highlight").removeClass("ui-state-default").children("input").val(1):t.item.addClass("ui-state-default").removeClass("ui-state-highlight").children("input").val(0)}}).disableSelection(),r=!0}i(document).on("submit","#em-bookings-table form.bookings-filter",(function(e){var t=i(this);return t.parents("#em-bookings-table").find(".table-wrap").first().append('<div id="em-loading" />'),i.post(EM.ajaxurl,t.serializeArray(),(function(e){var a=t.parents("#em-bookings-table").first();a.replaceWith(e),i("#em-bookings-table-export input[name=scope]").val(a.find("select[name=scope]").val()),i("#em-bookings-table-export input[name=status]").val(a.find("select[name=status]").val()),jQuery(document).triggerHandler("em_bookings_filtered",[e,a,t])})),!1})),i(document).on("click",".em-bookings-approve,.em-bookings-reject,.em-bookings-unapprove,.em-bookings-delete",(function(){var e=i(this);if(e.hasClass("em-bookings-delete")&&!confirm(EM.booking_delete))return!1;var t=a(e.attr("href")),n=e.parents("td").first();return n.html(EM.txt_loading),n.load(t),!1}))}function m(){i(".interval-desc").hide();var e="-plural";1!=i("input#recurrence-interval").val()&&""!=i("input#recurrence-interval").val()||(e="-singular");var t="span#interval-"+i("select#recurrence-frequency").val()+e;i(t).show()}function u(){i("p.alternate-selector").hide(),i("p#"+i("select#recurrence-frequency").val()+"-selector").show()}function h(){i("input#event-recurrence").is(":checked")?(i("#event_recurrence_pattern").fadeIn(),i("#event-date-explanation").hide(),i("#recurrence-dates-explanation").show(),i("h3#recurrence-dates-title").show(),i("h3#event-date-title").hide()):(i("#event_recurrence_pattern").hide(),i("#recurrence-dates-explanation").hide(),i("#event-date-explanation").show(),i("h3#recurrence-dates-title").hide(),i("h3#event-date-title").show())}if(i(".em_bookings_events_table").length>0&&(i(document).on("submit",".em_bookings_events_table form",(function(e){var t=i(this),n=a(t.attr("action"));return t.parents(".em_bookings_events_table").find(".table-wrap").first().append('<div id="em-loading" />'),i.get(n,t.serializeArray(),(function(e){t.parents(".em_bookings_events_table").first().replaceWith(e)})),!1})),i(document).on("click",".em_bookings_events_table .tablenav-pages a",(function(){var e=i(this),t=a(e.attr("href"));return e.parents(".em_bookings_events_table").find(".table-wrap").first().append('<div id="em-loading" />'),i.get(t,(function(t){e.parents(".em_bookings_events_table").first().replaceWith(t)})),!1}))),i(document).on("click","a.em-booking-button",(function(e){e.preventDefault();var t=i(this);if(t.text()!=EM.bb_booked&&i(this).text()!=EM.bb_booking){t.text(EM.bb_booking);var a=t.attr("id").split("_");i.ajax({url:EM.ajaxurl,dataType:"jsonp",data:{event_id:a[1],_wpnonce:a[2],action:"booking_add_one"},success:function(e,a,n,r){e.result?t.text(EM.bb_booked):t.text(EM.bb_error),""!=e.message&&alert(e.message),i(document).triggerHandler("em_booking_button_response",[e,t])},error:function(){t.text(EM.bb_error)}})}return!1})),i(document).on("click","a.em-cancel-button",(function(e){e.preventDefault();var t=i(this);if(t.text()!=EM.bb_cancelled&&t.text()!=EM.bb_canceling){t.text(EM.bb_canceling);var a=t.attr("id").split("_");i.ajax({url:EM.ajaxurl,dataType:"jsonp",data:{booking_id:a[1],_wpnonce:a[2],action:"booking_cancel"},success:function(e,a,n,i){e.result?t.text(EM.bb_cancelled):t.text(EM.bb_cancel_error)},error:function(){t.text(EM.bb_cancel_error)}})}return!1})),i(".em-date-single, .em-date-range, #em-date-start").length>0&&(r=!0,e("body")),r&&function(){if(EM.ui_css&&0==jQuery("link#jquery-ui-css").length){var e=document.createElement("link");e.id="jquery-ui-css",e.rel="stylesheet",e.href=EM.ui_css,document.body.appendChild(e)}}(),i("#recurrence-dates-explanation").hide(),i("#date-to-submit").hide(),i("#end-date-to-submit").hide(),i("#localised-date").show(),i("#localised-end-date").show(),i("#em-wrapper input.select-all").on("change",(function(){i(this).is(":checked")?(i("input.row-selector").prop("checked",!0),i("input.select-all").prop("checked",!0)):(i("input.row-selector").prop("checked",!1),i("input.select-all").prop("checked",!1))})),m(),u(),h(),i("input#event-recurrence").on("change",h),i("input#recurrence-interval").on("keyup",m),i("select#recurrence-frequency").on("change",m),i("select#recurrence-frequency").on("change",u),i(".em-location-types .em-location-types-select").on("change",(function(){let e=i(this);if(0==e.val())i(".em-location-type").hide();else{let t=e.find("option:selected").data("display-class");i(".em-location-type").hide(),i(".em-location-type."+t).show(),"em-location-type-place"!=t&&jQuery("#em-location-reset a").trigger("click")}""!==e.data("active")&&e.val()!==e.data("active")?(i(".em-location-type-delete-active-alert").hide(),i(".em-location-type-delete-active-alert").show()):i(".em-location-type-delete-active-alert").hide()})).trigger("change"),jQuery("div.em-location-data input#location-name").length>0&&(jQuery("div.em-location-data input#location-name").autocomplete({source:EM.locationajaxurl,minLength:2,focus:function(e,t){return jQuery("input#location-id").val(t.item.value),!1},select:function(e,t){return jQuery("input#location-id").val(t.item.id).trigger("change"),jQuery("input#location-name").val(t.item.value),jQuery("input#location-address").val(t.item.address),jQuery("input#location-town").val(t.item.town),jQuery("input#location-state").val(t.item.state),jQuery("input#location-region").val(t.item.region),jQuery("input#location-postcode").val(t.item.postcode),jQuery("input#location-latitude").val(t.item.latitude),jQuery("input#location-longitude").val(t.item.longitude),""==t.item.country?jQuery("select#location-country option:selected").removeAttr("selected"):jQuery('select#location-country option[value="'+t.item.country+'"]').attr("selected","selected"),jQuery("div.em-location-data input").css("background-color","#ccc").prop("readonly",!0),jQuery("div.em-location-data select").css("background-color","#ccc").css("color","#666666").prop("disabled",!0),jQuery("#em-location-reset").show(),jQuery("#em-location-search-tip").hide(),jQuery(document).triggerHandler("em_locations_autocomplete_selected",[e,t]),!1}}).data("ui-autocomplete")._renderItem=function(e,t){return html_val="<a>"+n(t.label)+'<br><span style="font-size:11px"><em>'+n(t.address)+", "+n(t.town)+"</em></span></a>",jQuery("<li></li>").data("item.autocomplete",t).append(html_val).appendTo(e)},jQuery("#em-location-reset a").on("click",(function(){return jQuery("div.em-location-data input").val("").prop("readonly",!1),jQuery("div.em-location-data select").prop("disabled",!1),jQuery("div.em-location-data option:selected").removeAttr("selected"),jQuery("input#location-id").val(""),jQuery("#em-location-reset").hide(),jQuery("#em-location-search-tip").show(),jQuery("#em-map").hide(),jQuery("#em-map-404").show(),"undefined"!=typeof marker&&(marker.setPosition(new google.maps.LatLng(0,0)),infoWindow.close(),marker.setDraggable(!0)),!1})),"0"!=jQuery("input#location-id").val()&&""!=jQuery("input#location-id").val()&&(jQuery("div.em-location-data input").prop("readonly",!0),jQuery("div.em-location-data select").prop("disabled",!0),jQuery("#em-location-reset").show(),jQuery("#em-location-search-tip").hide())),window.moment){var p=function(e,t){return(t=(t=(t=(t=t.replace(/##T/g,Intl.DateTimeFormat().resolvedOptions().timeZone)).replace(/#T/g,"GMT"+e.format("Z"))).replace(/###t/g,-60*e.utcOffset())).replace(/##t/g,e.isDST())).replace(/#t/g,e.daysInMonth())};i(".em-date-momentjs").each((function(){var e=i(this),t=moment.unix(e.data("date-start")),a=p(t,t.format(e.data("date-format")));if(e.data("date-start")!==e.data("date-end"))var n=moment.unix(e.data("date-end")),r=p(t,n.format(e.data("date-format"))),o=a+e.data("date-separator")+r;else o=a;e.text(o)}));var f=function(e,t){let a=new Date(1e3*e),n=a.getMinutes();if(24==t){let e=a.getHours();return e=e<10?"0"+e:e,n=n<10?"0"+n:n,e+":"+n}{let e=a.getHours()%12,t=e>=12?"PM":"AM";return 0===e&&(e=12),n=n<10?"0"+n:n,e+":"+n+" "+t}};i(".em-time-localjs").each((function(){var e=i(this),t=f(e.data("time"),e.data("time-format"));e.data("time-end")&&(t=t+(e.data("time-separator")?e.data("time-separator"):" - ")+f(e.data("time-end"),e.data("time-format"))),e.text(t)}))}jQuery(document).triggerHandler("em_javascript_loaded")}));var a=function(e){return-1!=e.search("em_ajax=0")?e=e.replace("em_ajax=0","em_ajax=1"):-1!=e.search(/\?/)?e+="&em_ajax=1":e+="?em_ajax=1",e};function n(e){return"string"!=typeof e?"":e.replace(/</gi,"&lt;").replace(/>/gi,"&gt;")}let i={init:()=>{i.autofillDate(),i.autofillTime(),i.lockTime()},getElementByName:e=>{var t=document.getElementsByName(e);return!!t.length&&t[0]},autofillDate:()=>{const e=i.getElementByName("event_start_date"),t=i.getElementByName("event_end_date");e&&t&&e.addEventListener("change",(a=>{""==t.value&&(t.value=e.value)}))},autofillTime:()=>{const e=i.getElementByName("event_start_time"),t=i.getElementByName("event_end_time");e&&t&&e.addEventListener("change",(a=>{"00:00"==t.value&&(t.value=e.value)}))},lockTime:()=>{const e=i.getElementByName("event_all_day"),t=i.getElementByName("event_start_time"),a=i.getElementByName("event_end_time");e&&e.addEventListener("change",(n=>{t.disabled=e.checked,a.disabled=e.checked}))}};document.addEventListener("DOMContentLoaded",i.init,!1)}();