jQuery(document).ready((function(t){t(".bct-options").hide(),t("form.em-form-custom").each((function(o,e){let i=(e=t(e)).find("#booking-custom-item-template").detach();e.on("click",".booking-form-custom-field-remove",(function(o){o.preventDefault(),t(this).parents(".booking-custom-item").remove(),n()})),e.find(".booking-form-custom-field-add").click((function(o){o.preventDefault(),i.clone().appendTo(t(this).parents(".em-form-custom").find("ul.booking-custom-body").first())})),e.on("click",".booking-form-custom-field-options",(function(o){t(this).blur(),o.preventDefault(),"1"!=t(this).attr("rel")?(t(this).parents(".em-form-custom").find(".booking-form-custom-field-options").attr("rel","0"),t(this).parents(".booking-custom-item").find(".booking-form-custom-type").trigger("change")):(t(this).parents(".booking-custom-item").find(".bct-options, .bct-options-toggle").slideUp(),t(this).attr("rel","0"))})),e.on("click",".bct-options-toggle",(function(o){o.preventDefault(),t(this).blur().parents(".booking-custom-item").find(".booking-form-custom-field-options").trigger("click")})),e.on("change",".booking-form-custom-label",(function(o){let e=t(this).parents(".booking-custom-item").first().find("input.booking-form-custom-fieldid").first();""==e.val()&&e.val(escape(t(this).val()).replace(/%[0-9]+/g,"_").toLowerCase())})),e.on("change",'input[type="checkbox"]',(function(){let o=t(this);"hidden"==o.next().attr("type")&&(o.is(":checked")?o.next().val(1):o.next().val(0))}));let n=function(){e.find(".booking-form-custom-type optgroup.bc-custom-user-fields option:disabled, .booking-form-custom-type optgroup.bc-core-user-fields option:disabled").prop("disabled",!1),e.find(".booking-form-custom-type optgroup.bc-custom-user-fields option:selected, .booking-form-custom-type optgroup.bc-core-user-fields option:selected").each((function(o,n){let c=(n=t(n)).val(),s='.booking-form-custom-type optgroup.bc-custom-user-fields option[value="'+c+'"], .booking-form-custom-type optgroup.bc-core-user-fields option[value="'+c+'"]';e.find(s).add(i.find(s)).each((function(o,e){(e=t(e)).is(n)||e.prop("disabled",!0)}))}))};n(),e.on("change",".booking-form-custom-type",(function(){t(".bct-options").slideUp(),t(".bct-options-toggle").hide();let o=[];i.find(".bc-custom-user-fields option, .bc-core-user-fields option").each((function(t,e){o.push(e.value)}));let e={select:["select","multiselect"],country:["country"],date:["date"],time:["time"],html:["html"],selection:["checkboxes","radio"],checkbox:["checkbox"],text:["text","textarea","email"],registration:o,captcha:["captcha"],email:["email"]},c=t(this),s=c.val();t.each(e,(function(o,e){t.inArray(s,e)>-1&&(parent_div=c.parents(".booking-custom-item").first(),parent_div.find(".bct-"+o).slideDown(),parent_div.find(".bct-options-toggle").show(),parent_div.find(".booking-form-custom-field-options").attr("rel","1"))})),n()})),e.on("click",".bc-link-up, .bc-link-down",(function(o){o.preventDefault(),item=t(this).parents(".booking-custom-item").first(),t(this).hasClass("bc-link-up")?item.prev().length>0&&item.prev().before(item):item.next().length>0&&item.next().after(item)})),e.on("mousedown",".bc-col-sort",(function(){parent_div=t(this).parents(".booking-custom-item").first(),parent_div.find(".bct-options").hide(),parent_div.find(".booking-form-custom-field-options").attr("rel","0")})),e.find(".booking-custom-body").sortable({placeholder:"bc-highlight",handle:".bc-col-sort"}),e.find(".bc-translatable").click((function(){t(this).closest("li.booking-custom-item").find("."+t(this).attr("rel")).slideToggle()}))}))}));