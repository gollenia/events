{"version":3,"file":"form-editor.js","mappings":"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","sources":["webpack:///./add-ons/bookings-form/form-editor.js"],"sourcesContent":["jQuery(document).ready( function($){\n\t$('.bct-options').hide();\n\t//Booking Form\n\t$('form.em-form-custom').each( function( i, myform ){\n\t\tmyform = $(myform);\n\t\tlet booking_template = myform.find('#booking-custom-item-template').detach();\n\t\tmyform.on('click', '.booking-form-custom-field-remove', function(e){\n\t\t\te.preventDefault();\n\t\t\t$(this).parents('.booking-custom-item').remove();\n\t\t\treserve_selected_userfields();\n\t\t});\n\t\tmyform.find('.booking-form-custom-field-add').click(function(e){\n\t\t\te.preventDefault();\n\t\t\tbooking_template.clone().appendTo($(this).parents('.em-form-custom').find('ul.booking-custom-body').first());\n\t\t});\n\t\tmyform.on('click', '.booking-form-custom-field-options', function(e){\n\t\t\t$(this).blur();\n\t\t\te.preventDefault();\n\t\t\tif( $(this).attr('rel') != '1' ){\n\t\t\t\t$(this).parents('.em-form-custom').find('.booking-form-custom-field-options').attr('rel','0')\n\t\t\t\t$(this).parents('.booking-custom-item').find('.booking-form-custom-type').trigger('change');\n\t\t\t}else{\n\t\t\t\t$(this).parents('.booking-custom-item').find('.bct-options, .bct-options-toggle').slideUp();\n\t\t\t\t$(this).attr('rel','0');\n\t\t\t}\n\t\t});\n\t\tmyform.on('click', '.bct-options-toggle', function(e){\n\t\t\te.preventDefault();\n\t\t\t$(this).blur().parents('.booking-custom-item').find('.booking-form-custom-field-options').trigger('click');\n\t\t});\n\t\t//specifics\n\t\tmyform.on('change', '.booking-form-custom-label', function(e){\n\t\t\tlet parent_div =  $(this).parents('.booking-custom-item').first();\n\t\t\tlet field_id = parent_div.find('input.booking-form-custom-fieldid').first();\n\t\t\tif( field_id.val() == '' ){\n\t\t\t\tfield_id.val(escape($(this).val()).replace(/%[0-9]+/g,'_').toLowerCase());\n\t\t\t}\n\t\t});\n\t\tmyform.on('change', 'input[type=\"checkbox\"]', function(){\n\t\t\tlet checkbox = $(this);\n\t\t\tif( checkbox.next().attr('type') == 'hidden' ){\n\t\t\t\tif( checkbox.is(':checked') ){\n\t\t\t\t\tcheckbox.next().val(1);\n\t\t\t\t}else{\n\t\t\t\t\tcheckbox.next().val(0);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tlet reserve_selected_userfields = function(){\n\t\t\tmyform.find('.booking-form-custom-type optgroup.bc-custom-user-fields option:disabled, .booking-form-custom-type optgroup.bc-core-user-fields option:disabled').prop('disabled', false);\n\t\t\tmyform.find('.booking-form-custom-type optgroup.bc-custom-user-fields option:selected, .booking-form-custom-type optgroup.bc-core-user-fields option:selected').each( function( i, item ){\n\t\t\t\titem = $(item);\n\t\t\t\tlet item_val = item.val();\n\t\t\t\tlet filter = '.booking-form-custom-type optgroup.bc-custom-user-fields option[value=\"'+item_val+'\"], .booking-form-custom-type optgroup.bc-core-user-fields option[value=\"'+item_val+'\"]';\n\t\t\t\tlet found_items = myform.find(filter).add(booking_template.find(filter));\n\t\t\t\tfound_items.each( function(i_2, taken_item){\n\t\t\t\t\ttaken_item = $(taken_item);\n\t\t\t\t\tif( !taken_item.is(item) ){\n\t\t\t\t\t\ttaken_item.prop('disabled', true);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\t\treserve_selected_userfields();\n\t\tmyform.on('change', '.booking-form-custom-type', function(){\n\t\t\t$('.bct-options').slideUp();\n\t\t\t$('.bct-options-toggle').hide();\n\t\t\tlet reg_keys = []; //get reg keys from booking template for use in type_keys\n\t\t\tbooking_template.find('.bc-custom-user-fields option, .bc-core-user-fields option').each( function( i, field ){\n\t\t\t\treg_keys.push(field.value);\n\t\t\t});\n\t\t\tlet type_keys = {\n\t\t\t\tselect : ['select','multiselect'],\n\t\t\t\tcountry : ['country'],\n\t\t\t\tdate : ['date'],\n\t\t\t\ttime : ['time'],\n\t\t\t\thtml : ['html'],\n\t\t\t\tselection : ['checkboxes','radio'],\n\t\t\t\tcheckbox : ['checkbox'],\n\t\t\t\ttext : ['text','textarea','email'],\n\t\t\t\tregistration : reg_keys,\n\t\t\t\tcaptcha : ['captcha'],\n\t\t\t\temail : ['email'],\n\t\t\t}\n\t\t\tlet select_box = $(this);\n\t\t\tlet selected_value = select_box.val();\n\t\t\t$.each(type_keys, function(option,types){\n\t\t\t\tif( $.inArray(selected_value,types) > -1 ){\n\t\t\t\t\t//get parent div\n\t\t\t\t\tparent_div =  select_box.parents('.booking-custom-item').first();\n\t\t\t\t\t//slide the right divs in/out\n\t\t\t\t\tparent_div.find('.bct-'+option).slideDown();\n\t\t\t\t\tparent_div.find('.bct-options-toggle').show();\n\t\t\t\t\tparent_div.find('.booking-form-custom-field-options').attr('rel','1');\n\t\t\t\t}\n\t\t\t});\n\t\t\treserve_selected_userfields();\n\t\t});\n\t\tmyform.on('click', '.bc-link-up, .bc-link-down', function(e){\n\t\t\te.preventDefault();\n\t\t\titem = $(this).parents('.booking-custom-item').first();\n\t\t\tif( $(this).hasClass('bc-link-up') ){\n\t\t\t\tif(item.prev().length > 0){\n\t\t\t\t\titem.prev().before(item);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif( item.next().length > 0 ){\n\t\t\t\t\titem.next().after(item);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tmyform.on('mousedown', '.bc-col-sort', function(){\n\t\t\tparent_div =  $(this).parents('.booking-custom-item').first();\n\t\t\tparent_div.find('.bct-options').hide();\n\t\t\tparent_div.find('.booking-form-custom-field-options').attr('rel','0');\n\t\t});\n\t\tmyform.find('.booking-custom-body').sortable({\n\t\t\tplaceholder: \"bc-highlight\",\n\t\t\thandle:'.bc-col-sort'\n\t\t});\n\t\t\n\t\t//ML Stuff\n\t\tmyform.find('.bc-translatable').click(function(){\n\t\t\t$(this).closest('li.booking-custom-item').find('.' + $(this).attr('rel')).slideToggle();\n\t\t});\n\t});\n});\n"],"names":["jQuery","document","ready","$","hide","each","i","myform","booking_template","find","detach","on","e","preventDefault","parents","remove","reserve_selected_userfields","click","clone","appendTo","first","blur","attr","trigger","slideUp","parent_div","field_id","val","escape","replace","toLowerCase","checkbox","next","is","prop","item","item_val","filter","found_items","add","i_2","taken_item","reg_keys","field","push","value","type_keys","select","country","date","time","html","selection","text","registration","captcha","email","select_box","selected_value","option","types","inArray","slideDown","show","hasClass","prev","length","before","after","sortable","placeholder","handle","closest","slideToggle"],"sourceRoot":""}