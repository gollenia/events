!function(){"use strict";var e={n:function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,{a:a}),a},d:function(t,a){for(var n in a)e.o(a,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:a[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=window.wp.element,a=window.React,n=window.wp.apiFetch,l=e.n(n),r=window.wp.i18n;function c(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...";if(0==e.length||0==t)return"";const n=e.split(" ");return n.length<=t?e:n.splice(0,t).join(" ")+a}function s(e,t){const a=navigator.language||navigator.userLanguage;e=new Date(1e3*e),t=new Date(1e3*t);let n={year:"numeric",month:"long",day:"numeric"};return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()&&(n={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),new Intl.DateTimeFormat(a,n).formatRange(e,t)}function i(e,t){const a=window.eventBlocksLocalization.locale;return new Intl.DateTimeFormat(a,t).format(1e3*e)}var o=function(e){const{showImages:a,showCategory:n,showLocation:l,showBookedUp:i,bookedUpWarningThreshold:o,excerptLength:m,textAlignment:d,showAudience:g,showSpeaker:_,item:u}=e,p=u.location&&["city","name"].includes(l)?u.location[l]:"";return(0,t.createElement)("div",{className:"card card--image-top card--primary card--shadow card--hover bg-white card--"+d},a&&(0,t.createElement)("a",{href:u.link,className:"card__image"},(0,t.createElement)("img",{src:u.image?.sizes?.large?.url})),(0,t.createElement)("div",{className:"card__content"},(0,t.createElement)("a",{href:u.link,className:"card__hidden-link"}),u.category&&n&&(0,t.createElement)("span",{class:"card__label"},u.category.name),(0,t.createElement)("h2",{className:"card__title"},u.title),(0,t.createElement)("h4",{class:"card__subtitle text--primary"},s(u.start,u.end)),(0,t.createElement)("p",{className:"card__text"},c(u.excerpt,m)),g||_||l||i?(0,t.createElement)("div",{class:"card__footer card__subtitle pills pills--small"},g&&u.audience?.length>0&&(0,t.createElement)("span",{className:"pills__item event__audience"},u.audience),"name"==_&&u.speaker?.id&&(0,t.createElement)("span",{className:"pills__item event__speaker"},u.speaker.name),l&&u.location?.ID&&(0,t.createElement)("span",{className:"pills__item event__location"},p),i&&u.bookings&&(i&&u.bookings.has_bookings?u.bookings?.spaces>o?(0,t.createElement)(t.Fragment,null):u.bookings?.spaces>0?(0,t.createElement)("span",{className:"pills__item pills__item--warning"},(0,r.__)("Nearly Booked up","events")):(0,t.createElement)("span",{className:"pills__item pills__item--error"},(0,r.__)("Booked up","events")):(0,t.createElement)(t.Fragment,null))):(0,t.createElement)(t.Fragment,null)))},m=function(e){const{showImages:a,showCategory:n,showLocation:l,excerptLength:r,textAlignment:i,showAudience:o,showSpeaker:m,item:d}=e,g=d.location&&["city","name"].includes(l)?d.location[l]:"";return(0,t.createElement)("div",{className:"card card--image-left has-white-background card--shadow card--primary card--"+i},a&&(0,t.createElement)("a",{href:d.link,className:"card__image"},(0,t.createElement)("img",{src:d.image?.sizes?.large?.url}),"image"==m&&d.speaker&&(0,t.createElement)("span",{className:"card__label card__label--image"},(0,t.createElement)("img",{src:d.speaker.image?.sizes?.thumbnail?.url}),d.speaker.name)),(0,t.createElement)("div",{className:"card__content"},d.category&&n&&(0,t.createElement)("span",{class:"card__label"},d.category.name),(0,t.createElement)("a",{href:d.link,className:"card__title"},d.title),(0,t.createElement)("a",{href:d.link,class:"card__subtitle text--primary"},s(d.start,d.end)),(0,t.createElement)("a",{href:d.link,className:"card__text"},c(d.excerpt,r)),(o||m||l)&&(0,t.createElement)("div",{class:"card__footer card__subtitle card__pills"},o&&d.audience&&(0,t.createElement)("span",{className:"card__pill event__audience"},d.audience),"name"==m&&d.speaker&&(0,t.createElement)("span",{className:"card__pill event__audience"},d.speaker.name),l&&d.location&&(0,t.createElement)("span",{className:"card__pill event__audience"},g))))};function d(e){const{showImages:a,showCategory:n,showLocation:l,excerptLength:r,textAlignment:c,showAudience:o,showSpeaker:m,item:d}=e,g=d.location&&["city","name"].includes(l)?d.location[l]:"";return(0,t.createElement)("a",{href:d.link,className:"description__item "+c},a&&(0,t.createElement)("img",{className:"description__image",src:d.image?.sizes?.large?.url}),!a&&(0,t.createElement)("div",{className:"description__date"},(0,t.createElement)("span",{className:"date__day--numeric"},i(d.start,{day:"numeric"})),(0,t.createElement)("span",{className:"date__day--short"},i(d.start,{weekday:"short"})),(0,t.createElement)("span",{className:"date__day--long"},i(d.start,{weekday:"long"})),(0,t.createElement)("span",{className:"date__month--long"},i(d.start,{month:"long"})),(0,t.createElement)("span",{className:"date__month--numeric"},i(d.start,{month:"numeric"})),(0,t.createElement)("span",{className:"date__month--short"},i(d.start,{month:"short"}))),(0,t.createElement)("div",{className:"description__text"},(0,t.createElement)("div",{className:"description__title"},d.title),(0,t.createElement)("div",{class:"description__data"},s(d.start,d.end),(0,t.createElement)("br",null),(0,t.createElement)("div",{class:"description__subtitle"},o&&d.audience&&(0,t.createElement)("span",null,d.audience),"name"==m&&d.speaker&&(0,t.createElement)("span",null,d.speaker.name),l&&d.location&&(0,t.createElement)("span",{className:""},g)))))}var g=function(e){if(!document.event_block_data)return(0,t.createElement)(t.Fragment,null);const{columnsSmall:n,columnsMedium:c,columnsLarge:s,showImages:i,showCategory:g,showLocation:_,showBookedUp:u,bookedUpWarningThreshold:p,style:h,limit:E,order:w,selectedCategory:f,selectedLocation:k,selectedTags:y,scope:v,excerptLength:N,textAlignment:b,showAudience:x,showSpeaker:L,showCategoryFilter:C,showTagFilter:A,showSearch:S,filterPosition:F,excludeCurrent:I}=document.event_block_data[e.block],[B,j]=(0,a.useState)([]),[D,O]=(0,a.useState)({}),[z,T]=(0,a.useState)({}),[M,U]=(0,a.useState)({category:0,tags:[],string:""}),$=(e,t)=>{U({...M,[e]:t})},P=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=window.eventBlocksLocalization?.rest_url;if(void 0!==t)return""===e?t:t+(t.includes("?")?"&":"?")+e};(0,a.useEffect)((()=>{const e=[E>0&&`limit=${E}`,"order="+w,0!=f&&`category=${f.join(",")}`,!!y.length&&`tag=${y.join(",")}`,""!=v&&`scope=${v}`,!!k&&`location=${k}`,!!I&&`exclude=${window.eventBlocksLocalization?.current_id}`].filter(Boolean).join("&");l()({url:P(e)}).then((e=>{j(e);let t={},a={};e.map((e=>{if(e.category){null==t[e.category.id]&&(t[e.category.id]=e.category);for(let t in e.tags)null==a[t]&&(a[t]=e.tags[t])}})),T(a),O(t)}))}),[]);const R=["mini"==h?"description":"grid","mini"==h&&!i&&"description--dates","grid--gap-12",!!F&&"grid__column--span-3","xl:grid--columns-"+s,"md:grid--columns-"+c,"grid--columns-"+n].filter(Boolean).join(" ");return(0,t.createElement)("div",{className:"side"==F?"grid xl:grid--columns-4 grid--gap-12":""},(0,t.createElement)("aside",{className:"filters"},S&&(0,t.createElement)("div",{class:"filter__search"},(0,t.createElement)("div",{class:"input"},(0,t.createElement)("label",null,(0,r.__)("Search","events")),(0,t.createElement)("input",{type:"text",onChange:e=>{$("string",e.target.value)}}))),C&&(0,t.createElement)("div",{className:"filter"},(0,t.createElement)("span",{className:"filter__title"},(0,r.__)("Select category","events")),(0,t.createElement)("a",{class:"filter__pill "+(0==M.category?"filter__pill--active":""),onClick:()=>{$("category",0)}},(0,r.__)("All","events")),Object.keys(D).map(((e,a)=>(0,t.createElement)("a",{className:"filter__pill "+(M.category==parseInt(e)?"filter__pill--active":""),onClick:()=>{$("category",parseInt(e))}},D[e].name)))),A&&(0,t.createElement)("div",{className:"filter "+("side"==F?"filter--columns":"")},(0,t.createElement)("span",{className:"filter__title"},(0,r.__)("Select tags","events")),Object.keys(z).map(((e,a)=>(0,t.createElement)("div",{className:"filter__box checkbox"},(0,t.createElement)("label",null,(0,t.createElement)("input",{type:"checkbox",name:e,onClick:t=>{(e=>{let t=M.tags;if(t.includes(e))return t.splice(t.indexOf(e),1),void $("tags",t);t.push(e),$("tags",t)})(e)},checked:M.tags.includes(e)}),z[e].name)))))),(0,t.createElement)("div",{className:R},(()=>{let e=B;return 0==M.category&&""==M.string&&0==M.tags.length||(0!==M.category&&(e=e.filter((e=>e.category?.id==M.category))),""!==M.string&&(e=e.filter((e=>e.title.toLowerCase().includes(M.string)))),M.tags.length>0&&(e=e.filter((e=>{let t=!1;for(let a of M.tags)a in e.tags&&(t=!0);return t})))),e})().map(((e,a)=>(0,t.createElement)(t.Fragment,null,"cards"==h&&(0,t.createElement)(o,{item:e,showImages:i,showCategory:g,showLocation:_,excerptLength:N,showBookedUp:u,bookedUpWarningThreshold:p,textAlignment:b,showAudience:x,showSpeaker:L}),"list"==h&&(0,t.createElement)(m,{item:e,showImages:i,showCategory:g,showLocation:_,excerptLength:N,textAlignment:b,showAudience:x,showSpeaker:L}),"mini"==h&&(0,t.createElement)(d,{item:e,showImages:i,showCategory:g,showLocation:_,excerptLength:N,textAlignment:b,showAudience:x,showSpeaker:L}))))))},_=window.ReactDOM,u=e.n(_);document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementsByClassName("events-upcoming-block");e&&Array.from(e).forEach((e=>{u().render((0,t.createElement)(g,{block:e.dataset.id}),e)}))}))}();