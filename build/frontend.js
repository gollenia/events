(()=>{"use strict";var e,t={71:(e,t,a)=>{const n=window.React,s=window.wp.apiFetch;var l=a.n(s);const r=window.wp.i18n;function c(e,t){const a=navigator.language||navigator.userLanguage;e=new Date(1e3*e),t=new Date(1e3*t);let n={year:"numeric",month:"long",day:"numeric"};return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()&&(n={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),new Intl.DateTimeFormat(a,n).formatRange(e,t)}function i(e,t){const a=window.eventBlocksLocalization.locale;return new Intl.DateTimeFormat(a,t).format(1e3*e)}function o(e,t,a="..."){if(0==e.length||0==t)return"";const n=e.split(" ");return n.length<=t?e:n.splice(0,t).join(" ")+a}const m=function(e){const{attributes:{showImages:t,showCategory:a,showLocation:s,showBookedUp:l,bookedUpWarningThreshold:i,excerptLength:m,textAlignment:d,showAudience:u,showSpeaker:g},events:p}=e;return(0,n.createElement)("div",{className:"event-grid"},p.map(((e,d)=>{const p=e.location&&["city","name"].includes(s)?e.location[s]:"";return(0,n.createElement)("div",{className:"event-card",key:d},t&&(0,n.createElement)("a",{href:e.link,className:"event-card-image"},(0,n.createElement)("img",{src:e.image?.sizes?.large?.url})),(0,n.createElement)("div",{className:"event-card-content"},e.category&&a&&(0,n.createElement)("span",{class:"event-card-label"},e.category.name),(0,n.createElement)("a",{href:e.link},(0,n.createElement)("h2",{className:"event-catd-title"},e.title)),(0,n.createElement)("h4",{class:"event-card-subtitle"},c(e.start,e.end)),(0,n.createElement)("p",{className:"event-card-text"},o(e.excerpt,m)),(u||g||s||l)&&(0,n.createElement)("div",{class:"event-card-footer"},u&&e.audience?.length>0&&(0,n.createElement)("span",{className:"event-audience"},e.audience),"name"==g&&e.speaker?.id&&(0,n.createElement)("span",{className:"event-speaker"},e.speaker.name),s&&e.location?.ID&&(0,n.createElement)("span",{className:"event-location"},p),l&&e.bookings&&(l&&e.bookings.has_bookings?e.bookings?.spaces>i?(0,n.createElement)(n.Fragment,null):e.bookings?.spaces>0?(0,n.createElement)("span",{className:"pills__item pills__item--warning"},(0,r.__)("Nearly Booked up","events")):(0,n.createElement)("span",{className:"pills__item pills__item--error"},(0,r.__)("Booked up","events")):(0,n.createElement)(n.Fragment,null)))))})))},d=function(e){const{attributes:{showImages:t,showCategory:a,showLocation:s,showBookedUp:l,bookedUpWarningThreshold:i,excerptLength:m,textAlignment:d,showAudience:u,showSpeaker:g},events:p}=e;return(0,n.createElement)("div",{className:"event-list"},p.map(((e,d)=>{const p=e.location&&["city","name"].includes(s)?e.location[s]:"";return(0,n.createElement)("div",{className:"event-card",key:d},t&&(0,n.createElement)("a",{href:e.link,className:"event-card-image"},(0,n.createElement)("img",{src:e.image?.sizes?.large?.url})),(0,n.createElement)("div",{className:"event-card-content"},e.category&&a&&(0,n.createElement)("span",{class:"event-card-label"},e.category.name),(0,n.createElement)("h5",{class:"event-card-subtitle"},c(e.start,e.end)),(0,n.createElement)("a",{href:e.link},(0,n.createElement)("h4",{className:"event-card-title"},e.title)),(0,n.createElement)("p",{className:"event-card-text"},o(e.excerpt,m)),(u||g||s||l)&&(0,n.createElement)("div",{class:"card__footer card__subtitle pills pills--small"},u&&e.audience?.length>0&&(0,n.createElement)("span",{className:"pills__item event__audience"},e.audience),"name"==g&&e.speaker?.id&&(0,n.createElement)("span",{className:"pills__item event__speaker"},e.speaker.name),s&&e.location?.ID&&(0,n.createElement)("span",{className:"pills__item event__location"},p),l&&e.bookings&&(l&&e.bookings.has_bookings?e.bookings?.spaces>i?(0,n.createElement)(n.Fragment,null):e.bookings?.spaces>0?(0,n.createElement)("span",{className:"pills__item pills__item--warning"},(0,r.__)("Nearly Booked up","events")):(0,n.createElement)("span",{className:"pills__item pills__item--error"},(0,r.__)("Booked up","events")):(0,n.createElement)(n.Fragment,null)))))})))},u=function(e){const{attributes:{showImages:t,showCategory:a,showLocation:s,showBookedUp:l,bookedUpWarningThreshold:m,excerptLength:d,textAlignment:u,showAudience:g,showSpeaker:p},events:v}=e;return(0,n.createElement)("table",{className:"event-table"},v.map(((e,t)=>{const u=e.location&&["city","name"].includes(s)?e.location[s]:"";return(0,n.createElement)("tr",{className:"event-row",key:t},(0,n.createElement)("td",{class:"event-table-subtitle"},(0,n.createElement)("div",{className:"description__date"},(0,n.createElement)("span",{className:"date__day--numeric"},i(e.start,{day:"numeric"})),(0,n.createElement)("span",{className:"date__day--short"},i(e.start,{weekday:"short"})),(0,n.createElement)("span",{className:"date__day--long"},i(e.start,{weekday:"long"})),(0,n.createElement)("span",{className:"date__month--long"},i(e.start,{month:"long"})),(0,n.createElement)("span",{className:"date__month--numeric"},i(e.start,{month:"numeric"})),(0,n.createElement)("span",{className:"date__month--short"},i(e.start,{month:"short"})))),(0,n.createElement)("td",null,(0,n.createElement)("a",{href:e.link},(0,n.createElement)("b",{className:"event-table-title"},e.title)),(0,n.createElement)("div",{className:"event-table-subtitle"},c(e.start,e.end))),e.category&&a&&(0,n.createElement)("td",{class:"event-table-label"},e.category.name),(0,n.createElement)("td",{className:"event-table-text"},o(e.excerpt,d)),g&&e.audience?.length>0&&(0,n.createElement)("td",{className:"pills__item event__audience"},e.audience),"name"==p&&e.speaker?.id&&(0,n.createElement)("td",{className:"pills__item event__speaker"},e.speaker.name),s&&e.location?.ID&&(0,n.createElement)("td",{className:"pills__item event__location"},u),l&&(0,n.createElement)("td",null,e.bookings&&(l&&e.bookings.has_bookings?e.bookings?.spaces>m?(0,n.createElement)(n.Fragment,null):e.bookings?.spaces>0?(0,n.createElement)("span",{className:"pills__item pills__item--warning"},(0,r.__)("Nearly Booked up","events")):(0,n.createElement)("span",{className:"pills__item pills__item--error"},(0,r.__)("Booked up","events")):(0,n.createElement)(n.Fragment,null))," "))})))},g=function(e){const{showImages:t,showCategory:a,showLocation:s,showBookedUp:c,userStylePicker:i,bookedUpWarningThreshold:o,view:g,limit:p,order:v,selectedCategory:h,selectedLocation:_,selectedTags:E,scope:b,excerptLength:k,textAlignment:w,showAudience:N,showSpeaker:f,showCategoryFilter:y,showTagFilter:x,showSearch:C,excludeCurrent:O}=e.attributes,[L,S]=(0,n.useState)([]),[B,F]=(0,n.useState)({}),[D,j]=(0,n.useState)({}),[I,A]=(0,n.useState)(!1),[T,U]=(0,n.useState)(""),[$,z]=(0,n.useState)({category:0,tags:[],string:""}),M=(e,t)=>{z({...$,[e]:t})},W=(e="")=>{const t=window.eventBlocksLocalization?.rest_url;if(void 0!==t)return""===e?t:t+(t.includes("?")?"&":"?")+e};(0,n.useEffect)((()=>{const e=[p>0&&`limit=${p}`,"order="+v,!!h&&`category=${h.join(",")}`,!!E?.length&&`tag=${E.join(",")}`,""!=b&&`scope=${b}`,!!_&&`location=${_}`,!!O&&`exclude=${window.eventBlocksLocalization?.current_id}`].filter(Boolean).join("&");l()({url:W(e)}).then((e=>{S(e);let t={},a={};e.map((e=>{if(e.category){null==t[e.category.id]&&(t[e.category.id]=e.category);for(let t in e.tags)null==a[t]&&(a[t]=e.tags[t])}})),j(a),F(t)}))}),[]);const P=(e="")=>{let t=L;return 0==$.category&&""==$.string&&0==$.tags.length||(0!==$.category&&(t=t.filter((e=>e.category?.id==$.category))),""!==$.string&&(t=t.filter((e=>e.title.toLowerCase().includes($.string)))),$.tags.length>0&&(t=t.filter((e=>{let t=!1;for(let a of $.tags)a in e.tags&&(t=!0);return t}))),"asc"==e&&t.sort(((e,t)=>new Date(e.start)-new Date(t.start)))),t},R=""!=T?T:g;console.log(P());const Y=y||x||C;return(0,n.createElement)("div",{className:"upcoming__events "+(Y?"has-filters":"")},Y&&(0,n.createElement)("aside",{className:"event-filters"},(0,n.createElement)("div",{className:"event-filters-header"},C&&(0,n.createElement)("div",{class:"filter__search"},(0,n.createElement)("div",{class:"input"},(0,n.createElement)("label",null,(0,r.__)("Search","events")),(0,n.createElement)("input",{type:"text",onChange:e=>{M("string",e.target.value)}}))),i&&(0,n.createElement)("div",{className:"view-switcher"},(0,n.createElement)("button",{onClick:()=>U("cards"),className:"cards"==R?"button active":"button"},(0,n.createElement)("i",{className:"material-icons"},"grid_view")),(0,n.createElement)("button",{onClick:()=>U("list"),className:"list"==R?"button active":"button"},(0,n.createElement)("i",{className:"material-icons"},"view_agenda")),(0,n.createElement)("button",{onClick:()=>U("table"),className:"table"==R?"button active":"button"},(0,n.createElement)("i",{className:"material-icons"},"format_list_bulleted"))),(0,n.createElement)("div",{className:"event-filter-toggle"},(0,n.createElement)("button",{className:"button",onClick:()=>A(!I)},(0,n.createElement)("i",{className:"material-icons"},"filter_list")))),(0,n.createElement)("div",{className:I?"event-filters-advanced":"event-filters-advanced mobile-hidden"},y&&Object.keys(B).length>0&&(0,n.createElement)("div",null,(0,n.createElement)("h5",{className:"event-filters-title"},(0,r.__)("Select category","events")),(0,n.createElement)("div",{className:"event-filter-pills"},(0,n.createElement)("button",{class:0==$.category?"active":"",onClick:()=>{M("category",0)}},(0,r.__)("All","events")),Object.keys(B).map(((e,t)=>(0,n.createElement)("button",{className:$.category==parseInt(e)?"active":"",onClick:()=>{M("category",parseInt(e))}},B[e].name))))),x&&Object.keys(D).length>0&&(0,n.createElement)("div",{className:""},(0,n.createElement)("h5",{className:"event-filters-title"},(0,r.__)("Select tags","events")),Object.keys(D).map(((e,t)=>(0,n.createElement)("div",{className:"filter__box checkbox"},(0,n.createElement)("label",null,(0,n.createElement)("input",{type:"checkbox",name:e,onClick:t=>{(e=>{let t=$.tags;if(t.includes(e))return t.splice(t.indexOf(e),1),void M("tags",t);t.push(e),M("tags",t)})(e)},checked:$.tags.includes(e)}),D[e].name))))))),(0,n.createElement)(n.Fragment,null,"cards"==R&&(0,n.createElement)(m,{attributes:e.attributes,events:P()}),"list"==R&&(0,n.createElement)(d,{attributes:e.attributes,events:P()}),"table"==R&&(0,n.createElement)(u,{attributes:e.attributes,events:P()})))},p=window.ReactDOM;var v=a.n(p);document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementsByClassName("events-upcoming-block");e&&Array.from(e).forEach((e=>{const t=JSON.parse(e.dataset.attributes);v().render((0,n.createElement)(g,{attributes:{...t}}),e)}))}))}},a={};function n(e){var s=a[e];if(void 0!==s)return s.exports;var l=a[e]={exports:{}};return t[e](l,l.exports,n),l.exports}n.m=t,e=[],n.O=(t,a,s,l)=>{if(!a){var r=1/0;for(m=0;m<e.length;m++){for(var[a,s,l]=e[m],c=!0,i=0;i<a.length;i++)(!1&l||r>=l)&&Object.keys(n.O).every((e=>n.O[e](a[i])))?a.splice(i--,1):(c=!1,l<r&&(r=l));if(c){e.splice(m--,1);var o=s();void 0!==o&&(t=o)}}return t}l=l||0;for(var m=e.length;m>0&&e[m-1][2]>l;m--)e[m]=e[m-1];e[m]=[a,s,l]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={495:0,383:0};n.O.j=t=>0===e[t];var t=(t,a)=>{var s,l,[r,c,i]=a,o=0;if(r.some((t=>0!==e[t]))){for(s in c)n.o(c,s)&&(n.m[s]=c[s]);if(i)var m=i(n)}for(t&&t(a);o<r.length;o++)l=r[o],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(m)},a=globalThis.webpackChunk=globalThis.webpackChunk||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var s=n.O(void 0,[383],(()=>n(71)));s=n.O(s)})();